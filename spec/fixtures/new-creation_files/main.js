/*!
 * jQuery Cookie Plugin v1.3.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(e){var a=/\+/g;function d(g){return g}function b(g){return decodeURIComponent(g.replace(a," "))}function f(g){if(g.indexOf('"')===0){g=g.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")}try{return c.json?JSON.parse(g):g}catch(h){}}var c=e.cookie=function(p,o,u){if(o!==undefined){u=e.extend({},c.defaults,u);if(typeof u.expires==="number"){var q=u.expires,s=u.expires=new Date();s.setDate(s.getDate()+q)}o=c.json?JSON.stringify(o):String(o);return(document.cookie=[c.raw?p:encodeURIComponent(p),"=",c.raw?o:encodeURIComponent(o),u.expires?"; expires="+u.expires.toUTCString():"",u.path?"; path="+u.path:"",u.domain?"; domain="+u.domain:"",u.secure?"; secure":""].join(""))}var g=c.raw?d:b;var r=document.cookie.split("; ");var v=p?undefined:{};for(var n=0,k=r.length;n<k;n++){var m=r[n].split("=");var h=g(m.shift());var j=g(m.join("="));if(p&&p===h){v=f(j);break}if(!p){v[h]=f(j)}}return v};c.defaults={};e.removeCookie=function(h,g){if(e.cookie(h)!==undefined){e.cookie(h,"",e.extend({},g,{expires:-1}));return true}return false}}));
(function(e,c,a,g){var d="inputTextCheck",f={callback:g,delay:300,events:"keyup blur"};function b(i,h){this.element=i;this.options=e.extend({},f,h);this.currentTimeout=g;this._defaults=f;this._name=d;this.currentValue=i.value;var j=this;this.init()}b.prototype={init:function(){var h=this;e(this.element).on(this.options.events,function(i){clearTimeout(h.currentTimeout);if(i.type==="keyup"){if(i.keyCode===13){i.preventDefault();i.stopImmediatePropagation()}if(h.currentValue!=this.value){if(this.value.length===0){return}h.currentValue=this.value;h.currentTimeout=setTimeout(function(){h.applyCallback.apply(h)},h.options.delay)}}else{h.applyCallback()}})},applyCallback:function(){clearTimeout(this.currentTimeout);this.currentTimeout=g;if(typeof this.options.callback==="function"){this.options.callback.apply(this.element)}}};e.fn[d]=function(h){return this.each(function(){if(!e.data(this,"plugin_"+d)){e.data(this,"plugin_"+d,new b(this,h))}})}})(jQuery,window,document);
var incubart={};window.String.prototype.replaceAll=function(d,c){var b=this.toString();var a=b.indexOf(d);while(a!=-1){b=b.replace(d,c);a=b.indexOf(d)}return b};
(function(b,c,a,d){b=b||{};b.ui=b.ui||{};b.ui.Chart=function(f,e){this.data=f;this.options=e;this.element=null};b.ui.Chart.prototype.render=function(){this.decorate($("<div />").appendTo("body"))};b.ui.Chart.prototype.decorate=function(e){this.element=$(e);var f=new google.visualization.AreaChart(this.element[0]);f.draw(google.visualization.arrayToDataTable(this.data),this.options)}})(incubart,window,document);
(function(b,c,a,d){b=b||{};b.ui=b.ui||{};b.ui.Confirm=function(e){this.message=e;this.element=null};b.ui.Confirm.prototype.decorate=function(f){var e=this;this.element=$(f);this.element.on("click",function(g){if(!confirm(e.message)){g.preventDefault()}})}})(incubart,window,document);
(function(b,c,a,d){b=b||{};b.ui=b.ui||{};b.ui.Datepicker=function(e){this.options=e||{}};b.ui.Datepicker.prototype.decorate=function(e){this.element=$(e);return this.element.datepicker(this.options)}})(incubart,window,document);
(function(b,c,a,d){b=b||{};b.ui=b.ui||{};b.ui.Dropdown=function(){this.element=null};b.ui.Dropdown.prototype.decorate=function(e){this.element=$(e);this.element.find(".body").css({position:"absolute",display:"none","min-width":this.element.find(".label").outerWidth()+"px","z-index":10,background:"#000"});this.element.on("click",".label",{instance:this},this.onToggle);this.element.on("mouseleave",{instance:this},this.onClose)};b.ui.Dropdown.prototype.onToggle=function(f){var e=f.data.instance;if(e.element.find(".body").is(":visible")){e.close()}else{e.open()}};b.ui.Dropdown.prototype.onClose=function(f){var e=f.data.instance;e.close()};b.ui.Dropdown.prototype.open=function(){this.element.find(".body").css({top:(this.element.offset().top+this.element.outerHeight())+"px",left:this.element.offset().left+"px"});this.element.find(".body").show()};b.ui.Dropdown.prototype.close=function(){this.element.find(".body").slideUp("fast")}})(incubart,window,document);
var Favorites=function(a){this.options=a};Favorites.prototype={options:{favoritesRoute:null},addToFavoritesRole:"add-to-favorites",removeFromFavoritesRole:"remove-from-favorites",currentAction:null,addAction:"addOneUserFavorite",removeAction:"delOneUserFavorite",originalNode:null,targetId:null,userId:null,init:function(){this.plugEvents()},plugEvents:function(){$('[data-role="'+this.addToFavoritesRole+'"], [data-role="'+this.removeFromFavoritesRole+'"]').on("click",$.proxy(this.saveNode,this));$(this).on("nodeSaved",$.proxy(this.setAction,this));$(this).on("actionSet",$.proxy(this.launchAjaxCall,this))},saveNode:function(a){this.$element=$(a.currentTarget);this.targetId=this.$element.data("target-id");this.userId=this.$element.data("user-id");$(this).trigger("nodeSaved")},setAction:function(){if(this.addToFavoritesRole===this.$element.data("role")){this.currentAction=this.addAction}else{this.currentAction=this.removeAction}$(this).trigger("actionSet")},launchAjaxCall:function(){if(null!==this.options.favoritesRoute&&null!==this.targetId&&null!==this.userId){var b={action:this.currentAction,targetId:this.targetId,userId:this.userId};var a=this;$.post(this.options.favoritesRoute,b,function(){$(a).trigger("actionDone",{element:a.$element})},"json")}}};
(function(b,c,a,d){b=b||{};b.ui=b.ui||{};b.ui.GAEventForwarder=function(){};b.ui.GAEventForwarder.prototype.decorate=function(e,f,g){if(typeof f==="undefined"){return}if(typeof f.event==="undefined"){return}if(typeof f.callback!=="function"){return}$(e).bind(f.event,function(h){data=f.callback.apply(this);if(data){_gaq.push(data);return true}return false})}})(incubart,window,document);
(function(b,c,a,d){b=b||{};b.ui=b.ui||{};b.ui.HiddenLink=function(e){this.element=null;if("undefined"!=typeof(selector)){this.decorate(selector)}};b.ui.HiddenLink.prototype.decorate=function(e,h,g){this.element=$(e);var f=this;this.element.each(function(){var n=$(this).data("attribute");f.replacer=$('<a href="'+f.decodeLink(n)+'">'+$(this).html()+"</a>");var k=$(this).get(0).attributes;var l=0;var j=k.length;while(l<j){var m=k[l];if(!$(this).is("["+m.name+"]")||m.name==="data-attributes"||m.name==="href"){l++;continue}f.replacer.attr(m.name,m.value);l++}if(typeof h==="function"){h.apply(f)}$(this).replaceWith(f.replacer)});if(typeof g==="function"){g.apply(f)}return this.element};b.ui.HiddenLink.prototype.decodeLink=function(e){if(typeof e==="undefined"){return}return e.split("").reverse().join("")}})(incubart,window,document);
(function(b,d,a,e){var c=function(g,f){this.settings=$.extend({},{openClassName:"",data:{}},g);this.selectors=$.extend({},{label:null,content:null,openTarget:null,mobileContent:null},f);this._labelNode=null;this._contentNode=null;this._contentMobileNode=null;this._openNode=null;this._openTimeout=null;this._closeTimeout=null;this._isTactileDevice=b.tools.isTactileDevice();this._listeners={};if("undefined"!==typeof(f)){this.decorate(this.selectors)}};c.prototype.decorate=function(f){this.selectors=f;this._labelNode=(null===this.selectors.label)?null:$(this.selectors.label);this._contentNode=(null===this.selectors.content)?null:$(this.selectors.content);this._openNode=(null===this.selectors.openTarget)?this._labelNode:$(this.selectors.openTarget);this._contentMobileNode=(null===this.selectors.mobileContent)?null:$(this.selectors.mobileContent);if(this._contentNode!=null){this._contentNode.hide()}if(this._contentMobileNode!=null){this._contentMobileNode.hide()}if(this._isTactileDevice){if(typeof this._contentNode!=="undefined"&&this._contentNode!==null){this._contentNode.on("click",function(g){g.stopImmediatePropagation()})}this._labelNode.on("click",{self:this},this.onLabelMouseClick)}else{this._labelNode.on("mouseenter",{self:this},this.onLabelMouseEnter);this._labelNode.on("mouseleave",{self:this},this.onLabelMouseLeave);if(this._contentNode!=null){this._contentNode.on("mouseenter",{self:this},this.onContentMouseEnter);this._contentNode.on("mouseleave",{self:this},this.onContentMouseLeave)}}};c.prototype.onLabelMouseClick=function(g){var f=g.data.self;g.preventDefault();if(f._contentNode!=null&&f._contentNode.is(":visible")){f.close()}else{f.open()}};c.prototype.onLabelMouseEnter=function(g){var f=g.data.self;clearTimeout(f._closeTimeout);f._openTimeout=setTimeout(function(){f.open()},250)};c.prototype.onLabelMouseLeave=function(g){var f=g.data.self;clearTimeout(f._openTimeout);clearTimeout(f._closeTimeout);f._closeTimeout=setTimeout(function(){f.close()},250)};c.prototype.onContentMouseEnter=function(g){var f=g.data.self;clearTimeout(f._closeTimeout)};c.prototype.onContentMouseLeave=function(g){var f=g.data.self;clearTimeout(f._closeTimeout);f._closeTimeout=setTimeout(function(){f.close()},250)};c.prototype.on=function(f,g){if(!(f in this._listeners)){this._listeners[f]=[]}this._listeners[f].push(g)};c.prototype.updatePosition=function(){var m=this._contentNode.css("visibility");var i=this._contentNode.css("display");this._contentNode.css({visibility:"hidden",display:"block"});var f=this._contentNode.closest(".row");var h=f.offset();var g=h.left;var n=f.width()+g;var k=this._contentNode.width();var l=this._contentNode.offset();var o=l.left;var j=n-k;if(o>j){this._contentNode.animate({left:"-="+(o-j)},0)}this._contentNode.css({visibility:m,display:i})};c.prototype.open=function(){if(this._contentNode.is(":visible")){return}this.updatePosition();this._contentNode.slideDown("fast");$(this._openNode).addClass(this.settings.openClassName);this._emit("open",this.settings.data)};c.prototype.close=function(){if(!this._contentNode.is(":visible")){return}this._contentNode.hide();$(this._openNode).removeClass(this.settings.openClassName)};c.prototype.openMobile=function(){this._contentMobileNode.slideDown("fast");$(this._openNode).addClass(this.settings.openClassName)};c.prototype.closeMobile=function(){this._contentMobileNode.slideUp("fast");$(this._openNode).removeClass(this.settings.openClassName)};c.prototype._emit=function(g,h){if(!(g in this._listeners)){return}for(var f=0;f<this._listeners[g].length;++f){this._listeners[g][f](h)}};b=b||{};b.ui=b.ui||{};b.ui.HoveredDropdown=c})(incubart,window,document);
(function(b,c,a,d){b=b||{};b.ui=b.ui||{};var e=function(g){if(typeof b.ui.Layer!=="undefined"){return b.ui.Layer}var f={overlayClassname:"overlay",backgroundId:"layerBackground",backgroundClassname:"background",containerClassname:"container",containerId:"",contentClassname:"content",contentId:""};this.options=$.extend({},f,g)||f;$(c).resize(function(){$(a).trigger("windowResized")});var h=this;$(a).on("click","."+this.options.overlayClassname,function(){h.hide()});$(a).on("click","."+this.options.overlayClassname+" .alm-icon-close",function(){h.hide()});$(a).on("click","."+this.options.containerClassname,function(i){i.stopImmediatePropagation()});this.bindWindowResize();return this};e.prototype.hide=function(){if(this.onStartData!==d){this.onStartData.item.css({visibility:this.onStartData.visibility,display:this.onStartData.display});$("i.alm-icon-close").remove();this.onStartData.item.unwrap().unwrap().unwrap();$("."+this.options.backgroundClassname).remove();this.restoreLocation(this.onStartData.originalLocation);this.onStartData=d}else{$("."+this.options.overlayClassname).remove()}};e.prototype.render=function(g,f){this.content=g;g.css($.extend({},f));g.wrap('<div class="'+this.options.containerClassname+'" id="'+this.options.containerId+'" />');$("."+this.options.containerClassname).wrap('<div class="'+this.options.overlayClassname+'" />');$('<div class="'+this.options.backgroundClassname+'" />').prependTo("."+this.options.overlayClassname);this.container=$("."+this.options.containerClassname);this.overlayContainer=$("."+this.options.overlayClassname);$('<i class="alm-icon-close">x</i>').appendTo(this.container);this.content.show();$("."+this.options.overlayClassname).show();this.refreshLayerPosition()};e.prototype.saveLocation=function(f){var h={};var g=$(f).prev();h.element=f;if(g.length){h.prev=g[0]}else{h.parent=$(f).parent()[0]}return(h)};e.prototype.restoreLocation=function(f){if(f.parent){$(f.parent).prepend(f.element)}else{$(f.prev).after(f.element)}};e.prototype.bindWindowResize=function(){var f=this;$(a).bind("windowResized",function(){f.refreshLayerPosition()})};e.prototype.refreshLayerPosition=function(){if(typeof this.container==="undefined"){return}var g=this.container.css("display");var f=this.container.css("visibility");this.container.css({visibility:"hidden",display:"block"}).show();this.container.css({top:$(c).height()/2-this.content.innerHeight()/2,left:$(c).width()/2-this.content.innerWidth()/2});this.container.css({visibility:f,display:g})};e.prototype.unbindWindowResize=function(){$(a).unbind("windowResized")};e.prototype.renderFrame=function(g,f){g.fancybox(f);return};e.prototype.renderDiv=function(f){$(f).fancybox();return};e.prototype.calculateContentSize=function(i){var g=i.css("visibility");var j=i.css("display");i.css({visibility:"hidden",display:"block"});var f=i.width();var h=i.height();i.css({visibility:g,display:j});return{height:h,width:f}};e.prototype.bind=function(f,g){return this.overlayContainer.bind(f,g)};e.prototype.unbind=function(f,g){return this.overlayContainer.unbind(f)};b.ui.Layer=new e()})(incubart,window,document);
(function(c,d,a,e){var b=function(f,g){this.options=f;this.selectors=g;this.dataProvider=f.dataProvider;this.$target=null;this.$resultTemplate=null;this.$result=null;this.cache={};if(typeof(g)!="undefined"){this.decorate(g)}};b.prototype.decorate=function(g){var f=this;this.$target=$(this.selectors.target);this.$resultTemplate=$(this.selectors.resultTemplate);this.$target.attr("autocomplete","off");this.$target.on("keyup",function(k){var h=[13,38,40];for(var j=0;j<h.length;++j){if(h[j]===k.keyCode){return}}if(!(f.$target.val() in f.cache)||"undefined"==typeof f.cache[f.$target.val()]){f.dataProvider(f.$target.val(),function(i){f.cache[f.$target.val()]=i;f.showResult(i)});return}f.showResult(f.cache[f.$target.val()])})};b.prototype.showResult=function(f){var g=this;if(f.length==0){if(null!==this.$result){this.$result.remove();this.$result=null}return}if(null===this.$result){this.$result=$('<div class="'+g.options.resultClassName+'"></div>');this.$result.insertAfter(this.$target)}this.$result.html("");incubart.ui.Templater.render(this.$resultTemplate,{items:f},function(i,h){g.$result.html(h).show().find("a").on("click",function(j){j.preventDefault();g.$target.val(j.delegateTarget.innerHTML);g.hideResult()})})};b.prototype.hideResult=function(){var f=this;$("."+f.options.resultClassName).hide()};c=c||{};c.ui=c.ui||{};c.ui.LiveSearch=b})(incubart,window,document);
(function(){var a;a=(function(){function b(g,e,f,h){var c,d;this.buttonLabels=g;this.xhrObject=e;this.nbItemsByPage=f;this.contentProcessor=h;if(!this.contentProcessor){this.contentProcessor(function(i){return i})}this.maxDisplayedPages=8;this.wrapper='<a data-role="load-remote-content" data-range="::start::-::end::">::page::</a>';this.gapSeparator="<span> ... </span>";this.separator="<span> - </span>";this.prevPageLabel=this.buttonLabels.prev;this.nextPageLabel=this.buttonLabels.next;this.currentPageClass="lead";if(this.isPartialContent()){c=new RegExp(/\/(\d+)/g);d=c.exec(this.xhrObject.getResponseHeader("content-range"));this.nbItems=d[1]|0;this.currentPage=(this.xhrObject.getResponseHeader("content-page"))|0;this.pageCount=(this.xhrObject.getResponseHeader("content-pagecount"))|0}return this}b.prototype.renderTo=function(d){var c;this.targetSelector=d;if(this.pageCount===1){this.removePagination();return}c=this.render();$(this.targetSelector).empty();c.appendTo(this.targetSelector);return $(this.targetSelector).trigger("paginationBubbled")};b.prototype.render=function(){var l,m,h,d,k,f,i,p,g,c,o,j,e,n;j=this;p=$("<div />");if(this.isPartialContent()){i=this.getPageNumbersToDisplay();m=true;g=null;l=function(q){q.preventDefault();return q.stopImmediatePropagation()};o=this.renderPageLink(this.prevPageLabel,this.getRangeForPage(this.currentPage-1));c=$(o);if(this.currentPage===1){c.addClass("disabled").on("click",l)}c.addClass("btn d-iblock spaced-right");c.appendTo(p);for(e=0,n=i.length;e<n;e++){k=i[e];if(!m){if((k-g)>1){$(this.gapSeparator).appendTo(p)}else{$(this.separator).appendTo(p)}}f=$(j.renderPageLink(k,this.getRangeForPage(k)));if(k===this.currentPage){f.addClass(this.currentPageClass)}f.appendTo(p);m=false;g=k}if(k<this.pageCount){$(this.gapSeparator).appendTo(p)}d=this.renderPageLink(this.nextPageLabel,this.getRangeForPage(this.currentPage+1));h=$(d);if(this.currentPage===this.pageCount){h.addClass("disabled").on("click",l)}h.addClass("btn d-iblock spaced-left");h.appendTo(p)}return this.contentProcessor(p)};b.prototype.getRangeForPage=function(e){var c,d,f;d=(e-1)*this.nbItemsByPage;f=d+this.nbItemsByPage-1;c={begin:d,end:f};return c};b.prototype.isPartialContent=function(){return this.xhrObject.status===206};b.prototype.getPageNumbersToDisplay=function(){var d,c,j,f,h,g,k,i,e;g=[1];if(this.pageCount===1){return g}i=2;d=this.pageCount;c=2;k=this.maxDisplayedPages-c-1;if((this.currentPage+c)>=d){j=d;f=d-this.maxDisplayedPages+1}else{if((this.currentPage-k)<i){f=i;j=i+this.maxDisplayedPages-1}else{f=this.currentPage-k;j=this.currentPage+c}}if(f<i){f=i}if(j>d){j=d}for(h=e=f;f<=j?e<=j:e>=j;h=f<=j?++e:--e){g.push(h)}return g};b.prototype.renderPageLink=function(d,c){return this.wrapper.replace("::page::",d).replace("::start::",c.begin).replace("::end::",c.end)};b.prototype.regenerateWithNElements=function(c){var e,d,f;this.nbItems=c;f=this.pageCount;this.pageCount=Math.ceil(this.nbItems/this.nbItemsByPage);this.renderTo(this.targetSelector);e=$(this.targetSelector).find('[data-role="load-remote-content"].'+this.currentPageClass);if(f!==this.pageCount){if(e.size()){return e.trigger("click")}else{d=$(this.targetSelector).find('[data-role="load-remote-content"]:not(.btn):last');if(d.size()){return d.trigger("click")}else{return $('[data-role="load-remote-content"].current').trigger("click")}}}};b.prototype.getElementsCount=function(){return this.nbItems};b.prototype.removePagination=function(){return $(this.targetSelector).html("")};return b})();window.Pagination=a}).call(this);
(function(b,c,a,d){b=b||{};b.ui=b.ui||{};b.ui.Placeholder=function(e){this.content=e;this.element=null};b.ui.Placeholder.prototype.decorate=function(e){this.element=$(e);this.element.html(this.content)}})(incubart,window,document);
(function(b,c,a,d){b=b||{};b.ui=b.ui||{};b.ui.Selector=function(e,f){this.entries=e||[];this.displayedEntries=[];this.attributes=f||{}};b.ui.Selector.prototype.render=function(){this.decorate($('<div class="'+this.attributes.className+'" />').css(this.attributes.style).appendTo("body"))};b.ui.Selector.prototype.decorate=function(f){var e=this;this.element=$(f);this.element.find(".item").each(function(g){e.entries.push({image:g.find(".image").html(),title:g.find(".title").html(),content:g.find(".content").html(),sideCOntent:g.find(".sideCOntent").html()})});this.displayedEntries=this.entries;if(0==this.element.find(".form").length){this.element.append('<form class="form"><p><input type="text" value="" placeholder="Filter" /></p></form>');this.element.on("keyup",".form",{instance:this},this.onFilterKeyUp)}this.renderEntries()};b.ui.Selector.prototype.renderEntries=function(){this.element.find(".item").remove();for(var g=0;g<this.entries.length;++g){var h=this.entries[g];var f='<div class="item">';if(h.image){f=f+'<img src="'+h.image+'" alt="Item" class="image" />'}if(h.sideContent){f=f+'<div class="sideContent">'+h.sideContent+"</div>"}if(h.title){f=f+'<div class="title">'+h.title+"</div>"}if(h.content){f=f+'<p class="content">'+h.content+"</p>"}f=f+"</div>";var e=$(f);this.element.append(e);if(-1==$.inArray(h,this.displayedEntries)){e.hide()}}};b.ui.Selector.prototype.on=function(e,f){switch(e){case"click":this.element.on(e,".item",{instance:this,userCallback:f},this.onItemClick);break;default:this.element.on(e,f);break}};b.ui.Selector.prototype.onFilterKeyUp=function(f){var e=f.data.instance;e.filter($(f.currentTarget).find("input").val())};b.ui.Selector.prototype.onItemClick=function(h){var e=h.data.instance;var f=h.data.userCallback;var g=e.element.find(".item").index($(h.currentTarget));f(g)};b.ui.Selector.prototype.dispose=function(){this.element.remove()};b.ui.Selector.prototype.filter=function(g){this.displayedEntries=[];for(var e=0;e<this.entries.length;++e){var f=this.entries[e];if(f.title.match(new RegExp(g))){this.displayedEntries.push(f)}}this.renderEntries();return this.displayedEntries}})(incubart,window,document);
(function(b,c,a,d){b=b||{};b.ui=b.ui||{};b.ui.TabPane=function(e){this.element=null;this.childSelector=e;this.child=$(e)};b.ui.TabPane.prototype.decorate=function(e){this.element=$(e);this.element.on("click",".item",{instance:this},this.onSelect);this.select(0)};b.ui.TabPane.prototype.onSelect=function(g){var e=g.data.instance;var f=e.element.find(".item").index(g.currentTarget);e.select(f)};b.ui.TabPane.prototype.select=function(e){this.element.find(".item").removeClass("highlighted");this.element.find(".item").eq(e).addClass("highlighted");this.child.hide();this.child.eq(e).show()}})(incubart,window,document);
(function(b,c,a,d){Templater=function(){};Templater.render=function(e,h,i){if(typeof e===d||$(e).size()!==1){return}h=h||{};if(typeof i!="function"){i=$.noop}var g=(function(j){return function(l,k){j(l,k.replaceAll("-nfg",""))}}).call(this,i);var f=$(e).html().replaceAll("{{","{").replaceAll("}}","}");dust.renderSource(f,h,g)};Templater.getRawContent=function(e,f,g){f=f||{};if(typeof g!="function"){g=$.noop}dust.renderSource($(e).html(),f,g)};b=b||{};b.ui=b.ui||{};b.ui.Templater=Templater})(incubart,window,document);
(function(b,c,a,d){b=b||{};b.tools=b.tools||{};b.tools.isTactileDevice=function(){if(typeof c.isTactileDevice==="undefined"){if(("ontouchstart" in c)||c.DocumentTouch&&a instanceof DocumentTouch){c.isTactileDevice=true}else{c.isTactileDevice=false}}return c.isTactileDevice};b.tools.handleSvgFiles=function(){if(typeof c.allowSvgFiles==="undefined"){c.allowSvgFiles=(!!a.createElementNS&&!!a.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect)}if(!c.allowSvgFiles){$('img[src*="svg"]').attr("src",function(){return $(this).attr("src").replace(".svg",".png")})}}})(incubart,window,document);
(function(b,c,a,d){b=b||{};b.tools=b.tools||{};b.tools.getXPathUsingSizzle=function(h,f){var e="";for(var g=h.get(f);g&&g.nodeType==1;g=g.parentNode){var i=$(g.parentNode).children(g.tagName).index(g)+1;i>1?(i="["+i+"]"):(i="");e="/"+g.tagName.toLowerCase()+i+e}return e}})(incubart,window,document);
function ALMSliderHome(b,a){this.ALMSLIDER_IMAGEPATH="/include/js/alm_slider/images";this._constuctor=function(d,c){defaultOptions={scrollAmount:500,itemsPerPage:3,onNextPageRequested:null,leftArrow:"leftarrow",rightArrow:"rightarrow"};this.id=d;this.options=$.extend(defaultOptions,c);this.htmlContainer=$("#"+d);this.htmlContent=$("#"+d+"_content");this.htmlNavigation=$("#"+d+"_navigation");this.htmlNavigationLeftArrow=this.htmlNavigation.find("img")[0];this.htmlNavigationRightArrow=this.htmlNavigation.find("img")[1];this.currentPage=0;this.nbPages=0;this.leftArrow=this.options.leftArrow;this.rightArrow=this.options.rightArrow;this.scrollAmount=this.options.scrollAmount;this.ALMSLIDER_LEFTARROW_ENABLED=this.ALMSLIDER_IMAGEPATH+"/"+this.leftArrow+"_enabled.png";this.ALMSLIDER_LEFTARROW_DISABLED=this.ALMSLIDER_IMAGEPATH+"/"+this.leftArrow+"_disabled.png";this.ALMSLIDER_RIGHTARROW_ENABLED=this.ALMSLIDER_IMAGEPATH+"/"+this.rightArrow+"_enabled.png";this.ALMSLIDER_RIGHTARROW_DISABLED=this.ALMSLIDER_IMAGEPATH+"/"+this.rightArrow+"_disabled.png";referenceItem=this.htmlContent.find(".item");this.htmlContainer.css("overflow","hidden");this.htmlContent.css("overflow","hidden");this.updatePages()};this.hasCarousel=function(){return $("#ts_slide_alm").length>0};this.next=function(){if(this.options.onNextPageRequested&&(this.currentPage>=(this.nbPages-1))){this.options.onNextPageRequested(this);return false}else{if(this.currentPage<this.nbPages-1){++this.currentPage;this.htmlContent.find(".item").eq(this.currentPage-1).fadeOut(500);this.htmlContent.find(".item").eq(this.currentPage).fadeIn(600);this.updateNavigation(this.currentPage)}}return false};this.insertNewPage=function(c){this.htmlContent.append(c);this.updatePages()};this.returnBegin=function(){this.htmlContent.find(".item").eq(this.currentPage).fadeOut(500);this.currentPage=-1};this.updatePages=function(){this.nbPages=this.htmlContent.find(".item").length/this.options.itemsPerPage};this.showSlide=function(d){var e=$("a div","#ts_slide_alm_content").size(),c=null;if(e<3){c=$("a div","#ts_slide_alm_content").last().attr("id").split("_")[1];if(e!==c){$("#next_slide").val(e);this.options.onPageRequested(this)}}else{this.displaySlide(d)}d--;this.currentPage=d;this.updateNavigation(d)};this.displaySlide=function(c){if(c===1){slide=$("a div","#ts_slide_alm_content").first().attr("id").split("_")[1]}else{if(c===2){slide=$("a div","#ts_slide_alm_content").eq(1).attr("id").split("_")[1]}else{slide=$("a div","#ts_slide_alm_content").last().attr("id").split("_")[1]}}$(".item","#ts_slide_alm_content").fadeOut();$("#item_"+slide).fadeIn()};this.updateNavigation=function(c){c++;$("img","#ts_slide_alm_navigation").attr("src",$("#circleOff").attr("src"));$("#slide"+c).attr("src",$("#circleOn").attr("src"))};this._constuctor(b,a)}function tresor_click(a){_gaq.push(["_trackEvent","home-collection",a]);$.post("ajax_main.php",{atype:"TRESOR_CLICK",id:a});return true}function collectionChange(a,b){if(a){$("#collection_menu .item").removeClass("selected");$("#collection_center").fadeOut("fast",function(){$.post("/index_ajax.php",{id_collection:b},function(c){$("#collection_center").html(c);$(a).parent().addClass("selected");$("#collection_center").fadeIn()})})}else{$.post("/index_ajax.php",{id_collection:b},function(c){$("#collection_center").html(c);$(a).parent().addClass("selected");$("#collection_center").fadeIn()})}}$(document).ready(function(){featureSlideshow=new ALMSliderHome("ts_slide_alm",{scrollAmount:520,leftArrow:"f_gauche",rightArrow:"f_droite",itemsPerPage:1,onNextPageRequested:function(b){$.post("/ajax_main.php",{atype:"INDEXFEATURE_V3",lastid:$("a .item","#ts_slide_alm_content").size()},function(c){if($("a .item","#ts_slide_alm_content").size()<3){b.insertNewPage($("#ts_slide_alm_content",c).html());b.next();b.updateNavigation(b.currentPage)}else{b.returnBegin();b.next();b.updateNavigation(0)}})},onPageRequested:function(b){$.post("/ajax_main.php",{atype:"INDEXFEATURE_V3",lastid:$("#next_slide").val()},function(c){b.insertNewPage($("#ts_slide_alm_content",c).html());b.displaySlide()})}});$("a:has(div)","#ts_slide_alm_content").hover(function(){$("div",this).stop().animate({opacity:0.8})},function(){$("div",this).stop().animate({opacity:1})});if(featureSlideshow.hasCarousel()){var a=setInterval("featureSlideshow.next();",3500);$("#ts_slide_alm").mouseover(function(){clearInterval(a)});$("#ts_slide_alm").mouseout(function(){a=setInterval("featureSlideshow.next();",4000)})}});
(function(a){a.flexslider=function(d,n){var b=a(d),l=a.extend({},a.flexslider.defaults,n),g=l.namespace,i=("ontouchstart" in window)||window.DocumentTouch&&document instanceof DocumentTouch,c=(i)?"touchend":"click",h=l.direction==="vertical",j=l.reverse,m=(l.itemWidth>0),f=l.animation==="fade",k=l.asNavFor!=="",e={};a.data(d,"flexslider",b);e={init:function(){b.animating=false;b.currentSlide=l.startAt;b.animatingTo=b.currentSlide;b.atEnd=(b.currentSlide===0||b.currentSlide===b.last);b.containerSelector=l.selector.substr(0,l.selector.search(" "));b.slides=a(l.selector,b);b.container=a(b.containerSelector,b);b.count=b.slides.length;b.syncExists=a(l.sync).length>0;if(l.animation==="slide"){l.animation="swing"}b.prop=(h)?"top":"marginLeft";b.args={};b.manualPause=false;b.transitions=!l.video&&!f&&l.useCSS&&(function(){var q=document.createElement("div"),p=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var o in p){if(q.style[p[o]]!==undefined){b.pfx=p[o].replace("Perspective","").toLowerCase();b.prop="-"+b.pfx+"-transform";return true}}return false}());if(l.controlsContainer!==""){b.controlsContainer=a(l.controlsContainer).length>0&&a(l.controlsContainer)}if(l.manualControls!==""){b.manualControls=a(l.manualControls).length>0&&a(l.manualControls)}if(l.randomize){b.slides.sort(function(){return(Math.round(Math.random())-0.5)});b.container.empty().append(b.slides)}b.doMath();if(k){e.asNav.setup()}b.setup("init");if(l.controlNav){e.controlNav.setup()}if(l.directionNav){e.directionNav.setup()}if(l.keyboard&&(a(b.containerSelector).length===1||l.multipleKeyboard)){a(document).bind("keyup",function(p){var o=p.keyCode;if(!b.animating&&(o===39||o===37)){var q=(o===39)?b.getTarget("next"):(o===37)?b.getTarget("prev"):false;b.flexAnimate(q,l.pauseOnAction)}})}if(l.mousewheel){b.bind("mousewheel",function(q,s,p,o){q.preventDefault();var r=(s<0)?b.getTarget("next"):b.getTarget("prev");b.flexAnimate(r,l.pauseOnAction)})}if(l.pausePlay){e.pausePlay.setup()}if(l.slideshow){if(l.pauseOnHover){b.hover(function(){if(!b.manualPlay&&!b.manualPause){b.pause()}},function(){if(!b.manualPause&&!b.manualPlay){b.play()}})}(l.initDelay>0)?setTimeout(b.play,l.initDelay):b.play()}if(i&&l.touch){e.touch()}if(!f||(f&&l.smoothHeight)){a(window).bind("resize focus",e.resize)}setTimeout(function(){l.start(b)},200)},asNav:{setup:function(){b.asNav=true;b.animatingTo=Math.floor(b.currentSlide/b.move);b.currentItem=b.currentSlide;b.slides.removeClass(g+"active-slide").eq(b.currentItem).addClass(g+"active-slide");b.slides.click(function(q){q.preventDefault();var p=a(this),o=p.index();if(!a(l.asNavFor).data("flexslider").animating&&!p.hasClass("active")){b.direction=(b.currentItem<o)?"next":"prev";b.flexAnimate(o,l.pauseOnAction,false,true,true)}})}},controlNav:{setup:function(){if(!b.manualControls){e.controlNav.setupPaging()}else{e.controlNav.setupManual()}},setupPaging:function(){var q=(l.controlNav==="thumbnails")?"control-thumbs":"control-paging",o=1,r;b.controlNavScaffold=a('<ol class="'+g+"control-nav "+g+q+'"></ol>');if(b.pagingCount>1){for(var p=0;p<b.pagingCount;p++){r=(l.controlNav==="thumbnails")?'<img src="'+b.slides.eq(p).attr("data-thumb")+'"/>':"<a>"+o+"</a>";b.controlNavScaffold.append("<li>"+r+"</li>");o++}}(b.controlsContainer)?a(b.controlsContainer).append(b.controlNavScaffold):b.append(b.controlNavScaffold);e.controlNav.set();e.controlNav.active();b.controlNavScaffold.delegate("a, img",c,function(s){s.preventDefault();var u=a(this),t=b.controlNav.index(u);if(!u.hasClass(g+"active")){b.direction=(t>b.currentSlide)?"next":"prev";b.flexAnimate(t,l.pauseOnAction)}});if(i){b.controlNavScaffold.delegate("a","click touchstart",function(s){s.preventDefault()})}},setupManual:function(){b.controlNav=b.manualControls;e.controlNav.active();b.controlNav.on(c,function(o){o.preventDefault();var q=a(this),p=b.controlNav.index(q);if(!q.hasClass(g+"active")){(p>b.currentSlide)?b.direction="next":b.direction="prev";b.flexAnimate(p,l.pauseOnAction)}});if(i){b.controlNav.on("click touchstart",function(o){o.preventDefault()})}},set:function(){var o=(l.controlNav==="thumbnails")?"img":"a";b.controlNav=a("."+g+"control-nav li "+o,(b.controlsContainer)?b.controlsContainer:b)},active:function(){b.controlNav.removeClass(g+"active").eq(b.animatingTo).addClass(g+"active")},update:function(o,p){if(b.pagingCount>1&&o==="add"){b.controlNavScaffold.append(a("<li><a>"+b.count+"</a></li>"))}else{if(b.pagingCount===1){b.controlNavScaffold.find("li").remove()}else{b.controlNav.eq(p).closest("li").remove()}}e.controlNav.set();(b.pagingCount>1&&b.pagingCount!==b.controlNav.length)?b.update(p,o):e.controlNav.active()}},directionNav:{setup:function(){var o=a('<ul class="'+g+'direction-nav"><li><a class="'+g+'prev" href="#">'+l.prevText+'</a></li><li><a class="'+g+'next" href="#">'+l.nextText+"</a></li></ul>");if(b.controlsContainer){a(b.controlsContainer).append(o);b.directionNav=a("."+g+"direction-nav li a",b.controlsContainer)}else{b.append(o);b.directionNav=a("."+g+"direction-nav li a",b)}e.directionNav.update();b.directionNav.bind(c,function(p){p.preventDefault();var q=(a(this).hasClass(g+"next"))?b.getTarget("next"):b.getTarget("prev");b.flexAnimate(q,l.pauseOnAction)});if(i){b.directionNav.bind("click touchstart",function(p){p.preventDefault()})}},update:function(){var o=g+"disabled";if(b.pagingCount===1){b.directionNav.addClass(o)}else{if(!l.animationLoop){if(b.animatingTo===0){b.directionNav.removeClass(o).filter("."+g+"prev").addClass(o)}else{if(b.animatingTo===b.last){b.directionNav.removeClass(o).filter("."+g+"next").addClass(o)}else{b.directionNav.removeClass(o)}}}else{b.directionNav.removeClass(o)}}}},pausePlay:{setup:function(){var o=a('<div class="'+g+'pauseplay"><a></a></div>');if(b.controlsContainer){b.controlsContainer.append(o);b.pausePlay=a("."+g+"pauseplay a",b.controlsContainer)}else{b.append(o);b.pausePlay=a("."+g+"pauseplay a",b)}e.pausePlay.update((l.slideshow)?g+"pause":g+"play");b.pausePlay.bind(c,function(p){p.preventDefault();if(a(this).hasClass(g+"pause")){b.manualPause=true;b.manualPlay=false;b.pause()}else{b.manualPause=false;b.manualPlay=true;b.play()}});if(i){b.pausePlay.bind("click touchstart",function(p){p.preventDefault()})}},update:function(o){(o==="play")?b.pausePlay.removeClass(g+"pause").addClass(g+"play").text(l.playText):b.pausePlay.removeClass(g+"play").addClass(g+"pause").text(l.pauseText)}},touch:function(){var t,r,p,u,x,v,s=false;d.addEventListener("touchstart",q,false);function q(y){if(b.animating){y.preventDefault()}else{if(y.touches.length===1){b.pause();u=(h)?b.h:b.w;v=Number(new Date());p=(m&&j&&b.animatingTo===b.last)?0:(m&&j)?b.limit-(((b.itemW+l.itemMargin)*b.move)*b.animatingTo):(m&&b.currentSlide===b.last)?b.limit:(m)?((b.itemW+l.itemMargin)*b.move)*b.currentSlide:(j)?(b.last-b.currentSlide+b.cloneOffset)*u:(b.currentSlide+b.cloneOffset)*u;t=(h)?y.touches[0].pageY:y.touches[0].pageX;r=(h)?y.touches[0].pageX:y.touches[0].pageY;d.addEventListener("touchmove",o,false);d.addEventListener("touchend",w,false)}}}function o(y){x=(h)?t-y.touches[0].pageY:t-y.touches[0].pageX;s=(h)?(Math.abs(x)<Math.abs(y.touches[0].pageX-r)):(Math.abs(x)<Math.abs(y.touches[0].pageY-r));if(!s||Number(new Date())-v>500){y.preventDefault();if(!f&&b.transitions){if(!l.animationLoop){x=x/((b.currentSlide===0&&x<0||b.currentSlide===b.last&&x>0)?(Math.abs(x)/u+2):1)}b.setProps(p+x,"setTouch")}}}function w(A){if(b.animatingTo===b.currentSlide&&!s&&!(x===null)){var z=(j)?-x:x,y=(z>0)?b.getTarget("next"):b.getTarget("prev");if(b.canAdvance(y)&&(Number(new Date())-v<550&&Math.abs(z)>50||Math.abs(z)>u/2)){b.flexAnimate(y,l.pauseOnAction)}else{b.flexAnimate(b.currentSlide,l.pauseOnAction,true)}}d.removeEventListener("touchmove",o,false);d.removeEventListener("touchend",w,false);t=null;r=null;x=null;p=null}},resize:function(){if(!b.animating&&b.is(":visible")){if(!m){b.doMath()}if(f){e.smoothHeight()}else{if(m){b.slides.width(b.computedW);b.update(b.pagingCount);b.setProps()}else{if(h){b.viewport.height(b.h);b.setProps(b.h,"setTotal")}else{if(l.smoothHeight){e.smoothHeight()}b.newSlides.width(b.computedW);b.setProps(b.computedW,"setTotal")}}}}},smoothHeight:function(o){if(!h||f){var p=(f)?b:b.viewport;(o)?p.animate({height:b.slides.eq(b.animatingTo).height()},o):p.height(b.slides.eq(b.animatingTo).height())}},sync:function(o){var q=a(l.sync).data("flexslider"),p=b.animatingTo;switch(o){case"animate":q.flexAnimate(p,l.pauseOnAction,false,true);break;case"play":if(!q.playing&&!q.asNav){q.play()}break;case"pause":q.pause();break}}};b.flexAnimate=function(w,x,q,s,t){if(k&&b.pagingCount===1){b.direction=(b.currentItem<w)?"next":"prev"}if(!b.animating&&(b.canAdvance(w,t)||q)&&b.is(":visible")){if(k&&s){var p=a(l.asNavFor).data("flexslider");b.atEnd=w===0||w===b.count-1;p.flexAnimate(w,true,false,true,t);b.direction=(b.currentItem<w)?"next":"prev";p.direction=b.direction;if(Math.ceil((w+1)/b.visible)-1!==b.currentSlide&&w!==0){b.currentItem=w;b.slides.removeClass(g+"active-slide").eq(w).addClass(g+"active-slide");w=Math.floor(w/b.visible)}else{b.currentItem=w;b.slides.removeClass(g+"active-slide").eq(w).addClass(g+"active-slide");return false}}b.animating=true;b.animatingTo=w;l.before(b);if(x){b.pause()}if(b.syncExists&&!t){e.sync("animate")}if(l.controlNav){e.controlNav.active()}if(!m){b.slides.removeClass(g+"active-slide").eq(w).addClass(g+"active-slide")}b.atEnd=w===0||w===b.last;if(l.directionNav){e.directionNav.update()}if(w===b.last){l.end(b);if(!l.animationLoop){b.pause()}}if(!f){var v=(h)?b.slides.filter(":first").height():b.computedW,u,r,o;if(m){u=(l.itemWidth>b.w)?l.itemMargin*2:l.itemMargin;o=((b.itemW+u)*b.move)*b.animatingTo;r=(o>b.limit&&b.visible!==1)?b.limit:o}else{if(b.currentSlide===0&&w===b.count-1&&l.animationLoop&&b.direction!=="next"){r=(j)?(b.count+b.cloneOffset)*v:0}else{if(b.currentSlide===b.last&&w===0&&l.animationLoop&&b.direction!=="prev"){r=(j)?0:(b.count+1)*v}else{r=(j)?((b.count-1)-w+b.cloneOffset)*v:(w+b.cloneOffset)*v}}}b.setProps(r,"",l.animationSpeed);if(b.transitions){if(!l.animationLoop||!b.atEnd){b.animating=false;b.currentSlide=b.animatingTo}b.container.unbind("webkitTransitionEnd transitionend");b.container.bind("webkitTransitionEnd transitionend",function(){b.wrapup(v)})}else{b.container.animate(b.args,l.animationSpeed,l.easing,function(){b.wrapup(v)})}}else{b.slides.eq(b.currentSlide).fadeOut(l.animationSpeed,l.easing);b.slides.eq(w).fadeIn(l.animationSpeed,l.easing,b.wrapup)}if(l.smoothHeight){e.smoothHeight(l.animationSpeed)}}};b.wrapup=function(o){if(!f&&!m){if(b.currentSlide===0&&b.animatingTo===b.last&&l.animationLoop){b.setProps(o,"jumpEnd")}else{if(b.currentSlide===b.last&&b.animatingTo===0&&l.animationLoop){b.setProps(o,"jumpStart")}}}b.animating=false;b.currentSlide=b.animatingTo;l.after(b)};b.animateSlides=function(){if(!b.animating){b.flexAnimate(b.getTarget("next"))}};b.pause=function(){clearInterval(b.animatedSlides);b.playing=false;if(l.pausePlay){e.pausePlay.update("play")}if(b.syncExists){e.sync("pause")}};b.play=function(){b.animatedSlides=setInterval(b.animateSlides,l.slideshowSpeed);b.playing=true;if(l.pausePlay){e.pausePlay.update("pause")}if(b.syncExists){e.sync("play")}};b.canAdvance=function(q,o){var p=(k)?b.pagingCount-1:b.last;return(o)?true:(k&&b.currentItem===b.count-1&&q===0&&b.direction==="prev")?true:(k&&b.currentItem===0&&q===b.pagingCount-1&&b.direction!=="next")?false:(q===b.currentSlide&&!k)?false:(l.animationLoop)?true:(b.atEnd&&b.currentSlide===0&&q===p&&b.direction!=="next")?false:(b.atEnd&&b.currentSlide===p&&q===0&&b.direction==="next")?false:true};b.getTarget=function(o){b.direction=o;if(o==="next"){return(b.currentSlide===b.last)?0:b.currentSlide+1}else{return(b.currentSlide===0)?b.last:b.currentSlide-1}};b.setProps=function(r,o,p){var q=(function(){var s=(r)?r:((b.itemW+l.itemMargin)*b.move)*b.animatingTo,t=(function(){if(m){return(o==="setTouch")?r:(j&&b.animatingTo===b.last)?0:(j)?b.limit-(((b.itemW+l.itemMargin)*b.move)*b.animatingTo):(b.animatingTo===b.last)?b.limit:s}else{switch(o){case"setTotal":return(j)?((b.count-1)-b.currentSlide+b.cloneOffset)*r:(b.currentSlide+b.cloneOffset)*r;case"setTouch":return(j)?r:r;case"jumpEnd":return(j)?r:b.count*r;case"jumpStart":return(j)?b.count*r:r;default:return r}}}());return(t*-1)+"px"}());if(b.transitions){q=(h)?"translate3d(0,"+q+",0)":"translate3d("+q+",0,0)";p=(p!==undefined)?(p/1000)+"s":"0s";b.container.css("-"+b.pfx+"-transition-duration",p)}b.args[b.prop]=q;if(b.transitions||p===undefined){b.container.css(b.args)}};b.setup=function(q){if(!f){var r,o;if(q==="init"){b.viewport=a('<div class="'+g+'viewport"></div>').css({overflow:"hidden",position:"relative"}).appendTo(b).append(b.container);b.cloneCount=0;b.cloneOffset=0;if(j){o=a.makeArray(b.slides).reverse();b.slides=a(o);b.container.empty().append(b.slides)}}if(l.animationLoop&&!m){b.cloneCount=2;b.cloneOffset=1;if(q!=="init"){b.container.find(".clone").remove()}b.container.append(b.slides.first().clone().addClass("clone")).prepend(b.slides.last().clone().addClass("clone"))}b.newSlides=a(l.selector,b);r=(j)?b.count-1-b.currentSlide+b.cloneOffset:b.currentSlide+b.cloneOffset;if(h&&!m){b.container.height((b.count+b.cloneCount)*200+"%").css("position","absolute").width("100%");setTimeout(function(){b.newSlides.css({display:"block"});b.doMath();b.viewport.height(b.h);b.setProps(r*b.h,"init")},(q==="init")?100:0)}else{b.container.width((b.count+b.cloneCount)*200+"%");b.setProps(r*b.computedW,"init");setTimeout(function(){b.doMath();b.newSlides.css({width:b.computedW,"float":"left",display:"block"});if(l.smoothHeight){e.smoothHeight()}},(q==="init")?100:0)}}else{b.slides.css({width:"100%","float":"left",marginRight:"-100%",position:"relative"});if(q==="init"){for(var p=b.count-1;p>0;p--){b.slides.eq(p).fadeOut(0)}b.slides.eq(b.currentSlide).fadeIn(l.animationSpeed,l.easing)}if(l.smoothHeight){e.smoothHeight()}}if(!m){b.slides.removeClass(g+"active-slide").eq(b.currentSlide).addClass(g+"active-slide")}};b.doMath=function(){var o=b.slides.first(),r=l.itemMargin,p=l.minItems,q=l.maxItems;b.w=b.width();b.h=o.height();b.boxPadding=o.outerWidth(true)-o.width();if(m){b.itemT=l.itemWidth+r;b.minW=(p)?p*b.itemT:b.w;b.maxW=(q)?q*b.itemT:b.w;b.itemW=(b.minW>b.w)?(b.w-(r*p))/p:(b.maxW<b.w)?(b.w-(r*q))/q:(l.itemWidth>b.w)?b.w:l.itemWidth;b.visible=Math.floor(b.w/(b.itemW+r));b.move=(l.move>0&&l.move<b.visible)?l.move:b.visible;b.pagingCount=Math.ceil(((b.count-b.visible)/b.move)+1);b.last=b.pagingCount-1;b.limit=(b.pagingCount===1)?0:(l.itemWidth>b.w)?((b.itemW+(r*2))*b.count)-b.w-r:((b.itemW+r)*b.count)-b.w-r}else{b.itemW=b.w;b.pagingCount=b.count;b.last=b.count-1}b.computedW=b.itemW-b.boxPadding};b.update=function(p,o){b.doMath();if(!m){if(p<b.currentSlide){b.currentSlide+=1}else{if(p<=b.currentSlide&&p!==0){b.currentSlide-=1}}b.animatingTo=b.currentSlide}if(l.controlNav&&!b.manualControls){if((o==="add"&&!m)||b.pagingCount>b.controlNav.length){e.controlNav.update("add")}else{if((o==="remove"&&!m)||b.pagingCount<b.controlNav.length){if(m&&b.currentSlide>b.last){b.currentSlide-=1;b.animatingTo-=1}e.controlNav.update("remove",b.last)}}}if(l.directionNav){e.directionNav.update()}};b.addSlide=function(o,q){var p=a(o);b.count+=1;b.last=b.count-1;if(h&&j){(q!==undefined)?b.slides.eq(b.count-q).after(p):b.container.prepend(p)}else{(q!==undefined)?b.slides.eq(q).before(p):b.container.append(p)}b.update(q,"add");b.slides=a(l.selector+":not(.clone)",b);b.setup();l.added(b)};b.removeSlide=function(o){var p=(isNaN(o))?b.slides.index(a(o)):o;b.count-=1;b.last=b.count-1;if(isNaN(o)){a(o,b.slides).remove()}else{(h&&j)?b.slides.eq(b.last).remove():b.slides.eq(o).remove()}b.doMath();b.update(p,"remove");b.slides=a(l.selector+":not(.clone)",b);b.setup();l.removed(b)};e.init()};a.flexslider.defaults={namespace:"flex-",selector:".slides > li",animation:"fade",easing:"swing",direction:"horizontal",reverse:false,animationLoop:true,smoothHeight:false,startAt:0,slideshow:true,slideshowSpeed:7000,animationSpeed:600,initDelay:0,randomize:false,pauseOnAction:true,pauseOnHover:false,useCSS:true,touch:true,video:false,controlNav:true,directionNav:true,prevText:"Previous",nextText:"Next",keyboard:true,multipleKeyboard:false,mousewheel:false,pausePlay:false,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",sync:"",asNavFor:"",itemWidth:0,itemMargin:0,minItems:0,maxItems:0,move:0,start:function(){},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){}};a.fn.flexslider=function(b){if(b===undefined){b={}}if(typeof b==="object"){return this.each(function(){var f=a(this),d=(b.selector)?b.selector:".slides > li",e=f.find(d);if(e.length===1){e.fadeIn(400);if(b.start){b.start(f)}}else{if(f.data("flexslider")===undefined){new a.flexslider(this,b)}}})}else{var c=a(this).data("flexslider");switch(b){case"play":c.play();break;case"pause":c.pause();break;case"next":c.flexAnimate(c.getTarget("next"),true);break;case"prev":case"previous":c.flexAnimate(c.getTarget("prev"),true);break;default:if(typeof b==="number"){c.flexAnimate(b,true)}}}}})(jQuery);$(document).ready(function(){if($(".flexslider").size()){$(".flexslider .slides").css("display","block");$(".flexslider").flexslider({animation:"fade",manualControls:".flex-nav li",directionNav:false,slideshowSpeed:5500,animationSpeed:1000})}});
var ALGOLIA_VERSION="2.7.2";var AlgoliaSearch=function(c,d,e,g,f){var h=this;this.applicationID=c;this.apiKey=d;this.dsn=false;this.dsnHost=null;this.hosts=[];var a;if(typeof e==="string"){a=e}else{var j=e||{};if(!this._isUndefined(j.method)){a=j.method}if(!this._isUndefined(j.dsn)){this.dsn=j.dsn}if(!this._isUndefined(j.hosts)){f=j.hosts}if(!this._isUndefined(j.dsnHost)){this.dsnHost=j.dsnHost}}if(this._isUndefined(f)){f=[this.applicationID+"-1.algolia.io",this.applicationID+"-2.algolia.io",this.applicationID+"-3.algolia.io"]}this.host_protocol="http://";if(this._isUndefined(a)||a===null){this.host_protocol=("https:"==document.location.protocol?"https":"http")+"://"}else{if(a==="https"||a==="HTTPS"){this.host_protocol="https://"}}for(var b=0;b<f.length;++b){if(Math.random()>0.5){this.hosts.reverse()}this.hosts.push(this.host_protocol+f[b])}if(Math.random()>0.5){this.hosts.reverse()}if(this.dsn||this.dsnHost!=null){if(this.dsnHost){this.hosts.unshift(this.host_protocol+this.dsnHost)}else{this.hosts.unshift(this.host_protocol+this.applicationID+"-dsn.algolia.io")}}this.requestTimeoutInMs=2000;this.currentHostIndex=0;this.jsonp=null;this.jsonpWait=0;this._jsonRequest({method:"GET",url:"/1/isalive",callback:function(k,i){h.jsonp=!k},removeCustomHTTPHeaders:true});this.extraHeaders=[]};function AlgoliaExplainResults(a,c,b){function f(q,v){var u=[];if(typeof q==="object"&&"matchedWords" in q&&"value" in q){var s=false;for(var p=0;p<q.matchedWords.length;++p){var o=q.matchedWords[p];if(!(o in v)){v[o]=1;s=true}}if(s){u.push(q.value)}}else{if(Object.prototype.toString.call(q)==="[object Array]"){for(var r=0;r<q.length;++r){var t=f(q[r],v);u=u.concat(t)}}else{if(typeof q==="object"){for(var n in q){if(q.hasOwnProperty(n)){u=u.concat(f(q[n],v))}}}}}return u}function m(n,v,t){var o=n._highlightResult||n;if(t.indexOf(".")===-1){if(t in o){return f(o[t],v)}return[]}var s=t.split(".");var q=o;for(var r=0;r<s.length;++r){if(Object.prototype.toString.call(q)==="[object Array]"){var u=[];for(var p=0;p<q.length;++p){u=u.concat(m(q[p],v,s.slice(r).join(".")))}return u}if(s[r] in q){q=q[s[r]]}else{return[]}}return f(q,v)}var h={};var l={};var k=m(a,l,c);h.title=(k.length>0)?k[0]:"";h.subtitles=[];if(typeof b!=="undefined"){for(var e=0;e<b.length;++e){var g=m(a,l,b[e]);for(var d=0;d<g.length;++d){h.subtitles.push({attr:b[e],value:g[d]})}}}return h}AlgoliaSearch.prototype={deleteIndex:function(a,b){this._jsonRequest({method:"DELETE",url:"/1/indexes/"+encodeURIComponent(a),callback:b})},moveIndex:function(c,b,d){var a={operation:"move",destination:b};this._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(c)+"/operation",body:a,callback:d})},copyIndex:function(c,b,d){var a={operation:"copy",destination:b};this._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(c)+"/operation",body:a,callback:d})},getLogs:function(c,b,a){if(this._isUndefined(b)){b=0}if(this._isUndefined(a)){a=10}this._jsonRequest({method:"GET",url:"/1/logs?offset="+b+"&length="+a,callback:c})},listIndexes:function(c,a){var b=a?"?page="+a:"";this._jsonRequest({method:"GET",url:"/1/indexes"+b,callback:c})},initIndex:function(a){return new this.Index(this,a)},listUserKeys:function(a){this._jsonRequest({method:"GET",url:"/1/keys",callback:a})},getUserKeyACL:function(a,b){this._jsonRequest({method:"GET",url:"/1/keys/"+a,callback:b})},deleteUserKey:function(a,b){this._jsonRequest({method:"DELETE",url:"/1/keys/"+a,callback:b})},addUserKey:function(b,c){var a={};a.acl=b;this._jsonRequest({method:"POST",url:"/1/keys",body:a,callback:c})},addUserKeyWithValidity:function(f,d,b,a,g){var e=this;var c={};c.acl=f;c.validity=d;c.maxQueriesPerIPPerHour=b;c.maxHitsPerQuery=a;this._jsonRequest({method:"POST",url:"/1/indexes/"+e.indexName+"/keys",body:c,callback:g})},setSecurityTags:function(c){if(Object.prototype.toString.call(c)==="[object Array]"){var e=[];for(var d=0;d<c.length;++d){if(Object.prototype.toString.call(c[d])==="[object Array]"){var a=[];for(var b=0;b<c[d].length;++b){a.push(c[d][b])}e.push("("+a.join(",")+")")}else{e.push(c[d])}}c=e.join(",")}this.tagFilters=c},setUserToken:function(a){this.userToken=a},startQueriesBatch:function(){this.batch=[]},addQueryInBatch:function(d,b,a){var c="query="+encodeURIComponent(b);if(!this._isUndefined(a)&&a!==null){c=this._getSearchParams(a,c)}this.batch.push({indexName:d,params:c})},clearCache:function(){this.cache={}},sendQueriesBatch:function(f,b){var a=this;var e={requests:[],apiKey:this.apiKey,appID:this.applicationID};if(this.userToken){e["X-Algolia-UserToken"]=this.userToken}if(this.tagFilters){e["X-Algolia-TagFilters"]=this.tagFilters}for(var c=0;c<a.batch.length;++c){e.requests.push(a.batch[c])}window.clearTimeout(a.onDelayTrigger);if(!this._isUndefined(b)&&b!==null&&b>0){var d=window.setTimeout(function(){a._sendQueriesBatch(e,f)},b);a.onDelayTrigger=d}else{this._sendQueriesBatch(e,f)}},setRequestTimeout:function(a){if(a){this.requestTimeoutInMs=parseInt(a,10)}},Index:function(a,b){this.indexName=b;this.as=a;this.typeAheadArgs=null;this.typeAheadValueOption=null},setExtraHeader:function(a,b){this.extraHeaders.push({key:a,value:b})},_sendQueriesBatch:function(e,f){if(this.jsonp===null){var a=this;this._waitReady(function(){a._sendQueriesBatch(e,f)});return}if(this.jsonp){var c="";for(var b=0;b<e.requests.length;++b){var d="/1/indexes/"+encodeURIComponent(e.requests[b].indexName)+"?"+e.requests[b].params;c+=b+"="+encodeURIComponent(d)+"&"}this._jsonRequest({cache:this.cache,method:"GET",jsonp:true,url:"/1/indexes/*",body:{params:c},callback:f})}else{this._jsonRequest({cache:this.cache,method:"POST",url:"/1/indexes/*/queries",body:e,callback:f,removeCustomHTTPHeaders:true})}},_jsonRequest:function(d){var f=0;var c=this;var g=d.callback;var b=null;var e=d.url;if(!this._isUndefined(d.body)){e=d.url+"_body_"+JSON.stringify(d.body)}if(!this._isUndefined(d.cache)){b=d.cache;if(!this._isUndefined(b[e])){if(!this._isUndefined(g)){setTimeout(function(){g(true,b[e])},1)}return}}var a=function(){if(f>=c.hosts.length){if(!c._isUndefined(g)){f=0;g(false,{message:"Cannot connect the Algolia's Search API. Please send an email to support@algolia.com to report the issue."})}return}d.callback=function(i,k,j,h){if(!k&&!c._isUndefined(h)){console&&console.log("Error: "+h.message)}if(k&&!c._isUndefined(d.cache)){b[e]=h}if(!k&&i){c.currentHostIndex=++c.currentHostIndex%c.hosts.length;f+=1;a()}else{f=0;if(!c._isUndefined(g)){g(k,h)}}};d.hostname=c.hosts[c.currentHostIndex];c._jsonRequestByHost(d)};a()},_jsonRequestByHost:function(c){var a=this;var b=c.hostname+c.url;if(this.jsonp){this._makeJsonpRequestByHost(b,c)}else{this._makeXmlHttpRequestByHost(b,c)}},_makeJsonpRequestByHost:function(e,g){if(!g.jsonp){g.callback(true,false,null,{message:"Method "+g.method+" "+e+" is not supported by JSONP."});return}this.jsonpCounter=this.jsonpCounter||0;this.jsonpCounter+=1;var f=document.getElementsByTagName("head")[0];var d=document.createElement("script");var b="algoliaJSONP_"+this.jsonpCounter;var c=false;var a=null;window[b]=function(h){g.callback(false,true,null,h);try{delete window[b]}catch(i){window[b]=undefined}};d.type="text/javascript";d.src=e+"?callback="+b+","+this.applicationID+","+this.apiKey;if(g.body["X-Algolia-TagFilters"]){d.src+="&X-Algolia-TagFilters="+encodeURIComponent(g.body["X-Algolia-TagFilters"])}if(g.body["X-Algolia-UserToken"]){d.src+="&X-Algolia-UserToken="+encodeURIComponent(g.body["X-Algolia-UserToken"])}if(g.body&&g.body.params){d.src+="&"+g.body.params}a=setTimeout(function(){d.onload=d.onreadystatechange=d.onerror=null;window[b]=function(h){try{delete window[b]}catch(i){window[b]=undefined}};g.callback(true,false,null,{message:"Timeout - Failed to load JSONP script."});f.removeChild(d);clearTimeout(a);a=null},this.requestTimeoutInMs);d.onload=d.onreadystatechange=function(){clearTimeout(a);a=null;if(!c&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){c=true;if(typeof window[b+"_loaded"]==="undefined"){g.callback(true,false,null,{message:"Failed to load JSONP script."});try{delete window[b]}catch(h){window[b]=undefined}}else{try{delete window[b+"_loaded"]}catch(h){window[b+"_loaded"]=undefined}}d.onload=d.onreadystatechange=null;f.removeChild(d)}};d.onerror=function(){clearTimeout(a);a=null;g.callback(true,false,null,{message:"Failed to load JSONP script."});f.removeChild(d);try{delete window[b]}catch(h){window[b]=undefined}};f.appendChild(d)},_makeXmlHttpRequestByHost:function(e,g){var d=this;var c=window.XMLHttpRequest?new XMLHttpRequest():{};var b=null;var a=null;if(!this._isUndefined(g.body)){b=JSON.stringify(g.body)}if("withCredentials" in c){c.open(g.method,e,true);if(this._isUndefined(g.removeCustomHTTPHeaders)||!g.removeCustomHTTPHeaders){c.setRequestHeader("X-Algolia-API-Key",this.apiKey);c.setRequestHeader("X-Algolia-Application-Id",this.applicationID)}c.timeout=this.requestTimeoutInMs;for(var f=0;f<this.extraHeaders.length;++f){c.setRequestHeader(this.extraHeaders[f].key,this.extraHeaders[f].value)}if(b!==null){c.setRequestHeader("Content-type","application/json")}}else{if(typeof XDomainRequest!=="undefined"){c=new XDomainRequest();c.open(g.method,e)}else{console&&console.log("Your browser is too old to support CORS requests");g.callback(false,false,null,{message:"CORS not supported"});return}}a=setTimeout(function(){c.abort();if(c.aborted===true){stopLoadAnimation();return}g.callback(true,false,null,{message:"Timeout - Could not connect to endpoint "+e});clearTimeout(a);a=null},this.requestTimeoutInMs);c.onload=function(j){clearTimeout(a);a=null;if(!d._isUndefined(j)&&j.target!==null){var h=(j.target.status===0||j.target.status===503);var k=false;var i=null;if(typeof XDomainRequest!=="undefined"){i=j.target.responseText;k=(i&&i.length>0)}else{i=j.target.response;k=(j.target.status===200||j.target.status===201)}g.callback(h,k,j.target,i?JSON.parse(i):null)}else{g.callback(false,true,j,JSON.parse(c.responseText))}};c.ontimeout=function(h){};c.onerror=function(h){clearTimeout(a);a=null;g.callback(true,false,null,{message:"Could not connect to host",error:h})};c.send(b)},_waitReady:function(a){if(this.jsonp===null){this.jsonpWait+=100;if(this.jsonpWait>2000){this.jsonp=true}setTimeout(a,100)}},_getSearchParams:function(a,c){if(this._isUndefined(a)||a===null){return c}for(var b in a){if(b!==null&&a.hasOwnProperty(b)){c+=(c.length===0)?"?":"&";c+=b+"="+encodeURIComponent(Object.prototype.toString.call(a[b])==="[object Array]"?JSON.stringify(a[b]):a[b])}}return c},_isUndefined:function(a){return a===void 0},applicationID:null,apiKey:null,tagFilters:null,userToken:null,hosts:[],cache:{},extraHeaders:[]};AlgoliaSearch.prototype.Index.prototype={clearCache:function(){this.cache={}},addObject:function(b,d,c){var a=this;if(this.as._isUndefined(c)){this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(a.indexName),body:b,callback:d})}else{this.as._jsonRequest({method:"PUT",url:"/1/indexes/"+encodeURIComponent(a.indexName)+"/"+encodeURIComponent(c),body:b,callback:d})}},addObjects:function(e,f){var d=this;var a={requests:[]};for(var b=0;b<e.length;++b){var c={action:"addObject",body:e[b]};a.requests.push(c)}this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(d.indexName)+"/batch",body:a,callback:f})},getObject:function(g,f,b){if(this.as.jsonp===null){var a=this;this.as._waitReady(function(){a.getObject(g,f,b)});return}var d=this;var e="";if(!this.as._isUndefined(b)){e="?attributes=";for(var c=0;c<b.length;++c){if(c!==0){e+=","}e+=b[c]}}this.as._jsonRequest({method:"GET",jsonp:true,url:"/1/indexes/"+encodeURIComponent(d.indexName)+"/"+encodeURIComponent(g)+e,callback:f})},partialUpdateObject:function(c,b){var a=this;this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(a.indexName)+"/"+encodeURIComponent(c.objectID)+"/partial",body:c,callback:b})},partialUpdateObjects:function(e,f){var d=this;var a={requests:[]};for(var b=0;b<e.length;++b){var c={action:"partialUpdateObject",objectID:e[b].objectID,body:e[b]};a.requests.push(c)}this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(d.indexName)+"/batch",body:a,callback:f})},saveObject:function(a,c){var b=this;this.as._jsonRequest({method:"PUT",url:"/1/indexes/"+encodeURIComponent(b.indexName)+"/"+encodeURIComponent(a.objectID),body:a,callback:c})},saveObjects:function(e,f){var d=this;var a={requests:[]};for(var b=0;b<e.length;++b){var c={action:"updateObject",objectID:e[b].objectID,body:e[b]};a.requests.push(c)}this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(d.indexName)+"/batch",body:a,callback:f})},deleteObject:function(c,b){if(c===null||c.length===0){b(false,{message:"empty objectID"});return}var a=this;this.as._jsonRequest({method:"DELETE",url:"/1/indexes/"+encodeURIComponent(a.indexName)+"/"+encodeURIComponent(c),callback:b})},search:function(e,g,b,a){var d=this;var f="query="+encodeURIComponent(e);if(!this.as._isUndefined(b)&&b!==null){f=this.as._getSearchParams(b,f)}window.clearTimeout(d.onDelayTrigger);if(!this.as._isUndefined(a)&&a!==null&&a>0){var c=window.setTimeout(function(){d._search(f,g)},a);d.onDelayTrigger=c}else{this._search(f,g)}},browse:function(c,e,a){var b=this;var d="?page="+c;if(!this.as._isUndefined(a)){d+="&hitsPerPage="+a}this.as._jsonRequest({method:"GET",url:"/1/indexes/"+encodeURIComponent(b.indexName)+"/browse"+d,callback:e})},ttAdapter:function(b){var a=this;return function(d,c){a.search(d,function(f,e){if(f){c(e.hits)}},b)}},waitTask:function(a,c){var b=this;this.as._jsonRequest({method:"GET",url:"/1/indexes/"+encodeURIComponent(b.indexName)+"/task/"+a,callback:function(e,d){if(e){if(d.status==="published"){c(true,d)}else{setTimeout(function(){b.waitTask(a,c)},100)}}else{c(false,d)}}})},clearIndex:function(b){var a=this;this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(a.indexName)+"/clear",callback:b})},getSettings:function(b){var a=this;this.as._jsonRequest({method:"GET",url:"/1/indexes/"+encodeURIComponent(a.indexName)+"/settings",callback:b})},setSettings:function(a,c){var b=this;this.as._jsonRequest({method:"PUT",url:"/1/indexes/"+encodeURIComponent(b.indexName)+"/settings",body:a,callback:c})},listUserKeys:function(b){var a=this;this.as._jsonRequest({method:"GET",url:"/1/indexes/"+encodeURIComponent(a.indexName)+"/keys",callback:b})},getUserKeyACL:function(a,c){var b=this;this.as._jsonRequest({method:"GET",url:"/1/indexes/"+encodeURIComponent(b.indexName)+"/keys/"+a,callback:c})},deleteUserKey:function(a,c){var b=this;this.as._jsonRequest({method:"DELETE",url:"/1/indexes/"+encodeURIComponent(b.indexName)+"/keys/"+a,callback:c})},addUserKey:function(c,d){var b=this;var a={};a.acl=c;this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(b.indexName)+"/keys",body:a,callback:d})},addUserKeyWithValidity:function(f,d,b,a,g){var e=this;var c={};c.acl=f;c.validity=d;c.maxQueriesPerIPPerHour=b;c.maxHitsPerQuery=a;this.as._jsonRequest({method:"POST",url:"/1/indexes/"+encodeURIComponent(e.indexName)+"/keys",body:c,callback:g})},_search:function(c,d){if(this.as.jsonp===null){var a=this;this.as._waitReady(function(){a._search(c,d)});return}var b={params:c,apiKey:this.as.apiKey,appID:this.as.applicationID};if(this.as.tagFilters){b["X-Algolia-TagFilters"]=this.as.tagFilters}if(this.as.userToken){b["X-Algolia-UserToken"]=this.as.userToken}if(this.as.jsonp){this.as._jsonRequest({cache:this.cache,method:"GET",jsonp:true,url:"/1/indexes/"+encodeURIComponent(this.indexName),body:b,callback:d})}else{this.as._jsonRequest({cache:this.cache,method:"POST",url:"/1/indexes/"+encodeURIComponent(this.indexName)+"/query",body:b,callback:d,removeCustomHTTPHeaders:true})}},as:null,indexName:null,cache:{},typeAheadArgs:null,typeAheadValueOption:null,emptyConstructor:function(){}};(function(a){var b=function(c){c=c||{};for(var e=1;e<arguments.length;e++){if(!arguments[e]){continue}for(var d in arguments[e]){if(arguments[e].hasOwnProperty(d)){c[d]=arguments[e][d]}}}return c};window.AlgoliaSearchHelper=function(c,e,d){var f={facets:[],disjunctiveFacets:[],hitsPerPage:20};this.init(c,e,b({},f,d))};AlgoliaSearchHelper.prototype={init:function(c,e,d){this.client=c;this.index=e;this.options=d;this.page=0;this.refinements={};this.disjunctiveRefinements={}},search:function(d,c,e){this.q=d;this.searchCallback=c;this.searchParams=e||{};this.page=this.page||0;this.refinements=this.refinements||{};this.disjunctiveRefinements=this.disjunctiveRefinements||{};this._search()},clearRefinements:function(){this.disjunctiveRefinements={};this.refinements={}},addDisjunctiveRefine:function(d,c){this.disjunctiveRefinements=this.disjunctiveRefinements||{};this.disjunctiveRefinements[d]=this.disjunctiveRefinements[d]||{};this.disjunctiveRefinements[d][c]=true},removeDisjunctiveRefine:function(f,c){this.disjunctiveRefinements=this.disjunctiveRefinements||{};this.disjunctiveRefinements[f]=this.disjunctiveRefinements[f]||{};try{delete this.disjunctiveRefinements[f][c]}catch(d){this.disjunctiveRefinements[f][c]=undefined}},addRefine:function(e,c){var d=e+":"+c;this.refinements=this.refinements||{};this.refinements[d]=true},removeRefine:function(e,c){var d=e+":"+c;this.refinements=this.refinements||{};this.refinements[d]=false},toggleRefine:function(g,e){for(var d=0;d<this.options.facets.length;++d){if(this.options.facets[d]==g){var f=g+":"+e;this.refinements[f]=!this.refinements[f];this.page=0;this._search();return true}}this.disjunctiveRefinements[g]=this.disjunctiveRefinements[g]||{};for(var c=0;c<this.options.disjunctiveFacets.length;++c){if(this.options.disjunctiveFacets[c]==g){this.disjunctiveRefinements[g][e]=!this.disjunctiveRefinements[g][e];this.page=0;this._search();return true}}return false},isRefined:function(e,c){var d=e+":"+c;if(this.refinements[d]){return true}if(this.disjunctiveRefinements[e]&&this.disjunctiveRefinements[e][c]){return true}return false},nextPage:function(){this._gotoPage(this.page+1)},previousPage:function(){if(this.page>0){this._gotoPage(this.page-1)}},gotoPage:function(c){this._gotoPage(c)},setPage:function(c){this.page=c},setIndex:function(c){this.index=c},getIndex:function(){return this.index},_gotoPage:function(c){this.page=c;this._search()},_search:function(){this.client.startQueriesBatch();this.client.addQueryInBatch(this.index,this.q,this._getHitsSearchParams());for(var d=0;d<this.options.disjunctiveFacets.length;++d){this.client.addQueryInBatch(this.index,this.q,this._getDisjunctiveFacetSearchParams(this.options.disjunctiveFacets[d]))}var c=this;this.client.sendQueriesBatch(function(k,h){if(!k){c.searchCallback(false,h);return}var g=h.results[0];g.disjunctiveFacets={};g.facetStats={};for(var f=1;f<h.results.length;++f){for(var l in h.results[f].facets){g.disjunctiveFacets[l]=h.results[f].facets[l];if(c.disjunctiveRefinements[l]){for(var j in c.disjunctiveRefinements[l]){if(!g.disjunctiveFacets[l][j]&&c.disjunctiveRefinements[l][j]){g.disjunctiveFacets[l][j]=0}}}}for(var e in h.results[f].facets_stats){g.facetStats[e]=h.results[f].facets_stats[e]}}c.searchCallback(true,g)})},_getHitsSearchParams:function(){return b({},{hitsPerPage:this.options.hitsPerPage,page:this.page,facets:this.options.facets,facetFilters:this._getFacetFilters()},this.searchParams)},_getDisjunctiveFacetSearchParams:function(c){return b({},this.searchParams,{hitsPerPage:1,page:0,attributesToRetrieve:[],attributesToHighlight:[],attributesToSnippet:[],facets:c,facetFilters:this._getFacetFilters(c)})},_getFacetFilters:function(h){var d=[];for(var g in this.refinements){if(this.refinements[g]){d.push(g)}}for(var c in this.disjunctiveRefinements){if(c!=h){var f=[];for(var e in this.disjunctiveRefinements[c]){if(this.disjunctiveRefinements[c][e]){f.push(c+":"+e)}}if(f.length>0){d.push(f)}}}return d}}})();(function(a){window.AlgoliaPlaces=function(c,b){this.init(c,b)};AlgoliaPlaces.prototype={init:function(c,b){this.client=new AlgoliaSearch(c,b,"http",true,["places-1.algolia.io","places-2.algolia.io","places-3.algolia.io"]);this.cache={}},search:function(d,c,g){var b=this;var f="query="+encodeURIComponent(d);if(!this.client._isUndefined(g)&&g!=null){f=this.client._getSearchParams(g,f)}var e={params:f,apiKey:this.client.apiKey,appID:this.client.applicationID};this.client._jsonRequest({cache:this.cache,method:"POST",url:"/1/places/query",body:e,callback:c,removeCustomHTTPHeaders:true})}}})();if(typeof JSON!=="object"){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var cx,escapable,gap,indent,meta,rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());
AlgoliaSearchClient=function(a){this.options=a};AlgoliaSearchClient.prototype={algolia:null,lastQuery:"",lastTermsTypoNb:0,searchField:'[data-role="search-field"]',resultsContainer:'[data-role="results-container"]',productsContainer:'[data-role="products-container"]',shopsContainer:'[data-role="shops-container"]',productLineTemplate:'[data-template="product-line"]',shopLineTemplate:'[data-template="shop-line"]',blacklist:["burberry"],init:function(){if(0==$(this.searchField).size()){return}this.initAlgoliaSearch();this.positionResults();this.plugEvents()},initAlgoliaSearch:function(){this.algolia=new AlgoliaSearch(this.options.appId,this.options.apiKey);this.options.nbResults=5;this.idxTerms=this.algolia.initIndex(this.options.site+"_cats_queries_"+this.options.zone);this.idxShops=this.algolia.initIndex(this.options.site+"_shops_"+this.options.zone)},plugEvents:function(){var a=this;$(this.searchField).on("focus keyup",$.proxy(this.search,this));$(document).on("keydown",$.proxy(this.navigate,this));$(this.productsContainer).on("click","a",function(){a.trackLink("algolia_suggest_search")});$(this.shopContainer).on("click","a",function(){a.trackLink("algolia_shop_search")});this.manageHiding()},positionResults:function(){var b=$(this.searchField).position().top+$(this.searchField).outerHeight();var a=$(this.searchField).position().left;$(this.resultsContainer).width($(this.searchField).outerWidth()).css({top:b+"px",left:a+"px"})},search:function(){this.lastQuery=$(this.searchField).val();if(this.lastQuery.length==0){$(this.resultsContainer).hide();return}this.idxTerms.search(this.lastQuery,$.proxy(this.productsSearchCallback,this),{getRankingInfo:1});if(this.lastQuery.length<3){$(this.shopsContainer).hide();return}this.idxShops.search(this.lastQuery,$.proxy(this.shopsSearchCallback,this),{getRankingInfo:1,numericFilters:"countProduct>0"})},productsSearchCallback:function(g,e){if(e.query!=this.lastQuery){return}if(e.hits.length==0){if(this.lastQuery.length<3){$(this.productsContainer).hide()}$(this.productsContainer).html("").hide();return}this.lastTermsTypoNb=e.hits.length>0?e.hits[0]._rankingInfo.nbTypos:0;var d="",f={creations:[]},b;for(var c=0;c<e.hits.length&&c<this.options.nbResults;c++){b=e.hits[c];if(b._rankingInfo.nbTypos!==this.lastTermsTypoNb){continue}var a={url:b.url};if(b.type==1){a.title=b._highlightResult.title.value;a.name=b.title}else{a.title=b._highlightResult.string.value;a.name=b.string}if("string"===jQuery.type(a.name)&&0<a.name.length){if(!this.inArray(a.name,this.blacklist)){f.creations.push(a)}}}this.displayResults($(this.productLineTemplate),f,$(this.productsContainer))},inArray:function(f,e){var g=[],d=(""+f).toLowerCase(),b="";if("array"!==jQuery.type(e)){g.push(e)}else{g=e}for(var c=0,a=g.length;c<a;c++){b=""+g[c];if(d.indexOf(b)!==-1){return true}}return false},shopsSearchCallback:function(f,c){var g=[];var b="";var d={};d.shops=[];if(c.hits&&c.hits.length>0){maxResults=(c.hits.length<this.options.nbResults)?c.hits.length:this.options.nbResults;for(var a=0;a<maxResults;a++){var e={};if(a+1<c.hits.length){g.push("bordered-bottom")}e.url=c.hits[a].url;e["class"]=g.join(" ");if(c.hits[a].avatar==="http://galerie.alittlemarket.com/galerie/avatar/"){e.avatar="https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcTRDsrx4EVHqTCcffEEfPKCOBNQgrsojmQCtKJuVDVSeSgbidKqXA"}else{e.avatar=c.hits[a].avatar}e.title=c.hits[a]._highlightResult.name.value;e.name=c.hits[a].name;g=[];d.shops.push(e)}this.displayResults($(this.shopLineTemplate),d,$(this.shopsContainer))}},navigate:function(b){if($(this.resultsContainer).is(":visible")){var a=[38,40];if($.inArray(b.keyCode,a)>-1){b.preventDefault();$resultsContainerLinks=$(this.resultsContainer).find("a");if(b.keyCode==40){$linkToFocus=$resultsContainerLinks.first()}else{$linkToFocus=$resultsContainerLinks.last()}$.each($resultsContainerLinks,function(c){if($(this).is(":focus")){if(b.keyCode==40){if(c+1!=$resultsContainerLinks.length){$linkToFocus=$resultsContainerLinks[c+1]}else{$linkToFocus=$resultsContainerLinks.first()}}if(b.keyCode==38){if(c>0){$linkToFocus=$resultsContainerLinks[c-1]}else{$linkToFocus=$resultsContainerLinks.last()}}}});$linkToFocus.focus()}}},hideResults:function(a){$(this.resultsContainer).html("").hide()},displayResults:function(c,b,a){var d=this;incubart.ui.Templater.render(c,b,function(f,e){a.html(e).show();$(d.resultsContainer).show()})},manageHiding:function(){var a=this;$(this.searchField).on("click",function(b){b.stopImmediatePropagation()});$("body").click(function(){$(a.resultsContainer).hide()})},trackLink:function(a){_gaq.push(["_trackEvent",a,$(this).text()])}};
var Header=function(a){this.options=a};Header.prototype={phoneNumberSelector:"#phone-number-header",subMenuTemplates:["accountMenu","likeMenu"],options:{userDataRoute:null},likesLinkSelector:'[data-role="likesLink"]',connectedMenuSelector:'[data-role="connected-menu"]',init:function(){this.plugEvents();this.trackSearch();this.registerSubMenus();if(null!==this.options.userDataRoute){this.loadUserData()}},plugEvents:function(){$(this).on("userDataLoaded",$.proxy(this.renderSubMenus,this));$(this).on("userDataLoaded",$.proxy(this.updateMainCounters,this));$(this).on("userDataLoaded",$.proxy(this.updateLikesLink,this))},trackSearch:function(){var a=new incubart.ui.GAEventForwarder();a.decorate('form[role="search"]',{event:"submit",callback:function(){if(""===$(this).find("input:text").val()){return false}var b=["_trackEvent","Recherche",$(this).find("input:text").val()];return b}})},registerSubMenus:function(){var a=new incubart.ui.HoveredDropdown({openClassName:"opened-menu"},{label:"[data-menu-trigger=connectMenu]",openTarget:"[data-menu-style*=connectMenu]",mobileContent:"[data-menu-mobile=connectMenu]"});var a=new incubart.ui.HoveredDropdown({openClassName:"opened-menu"},{label:"[data-menu-trigger=accountMenu]",content:"[data-menu-name=accountMenu]",openTarget:"[data-menu-style*=accountMenu]",mobileContent:"[data-menu-mobile=accountMenu]"});var a=new incubart.ui.HoveredDropdown({openClassName:"opened-menu"},{label:"[data-menu-trigger=likeMenu]",content:"[data-menu-name=likeMenu]",openTarget:"[data-menu-style*=likeMenu]"});var a=new incubart.ui.HoveredDropdown({openClassName:"opened-menu"},{label:"[data-menu-trigger=searchMenu]",mobileContent:"[data-menu-mobile=searchMenu]",openTarget:"[data-menu-style=searchMenu]"})},loadUserData:function(){var a=this;if($(this.connectedMenuSelector).length>0){$.ajax({url:a.options.userDataRoute,dataType:"json",success:function(b){$(a).trigger("userDataLoaded",b)}})}},renderSubMenus:function(b,a){$.each($(this.subMenuTemplates),function(e,f){var c=$('[data-template="'+f+'"]');var d=$('[data-menu-name="'+f+'"]');incubart.ui.Templater.render(c,a,function(h,g){d.html(g)})})},displayNotification:function(a,b){if(0<b){$(a).html(b).show()}},updateMainCounters:function(b,a){this.displayNotification(".accountCounter",a.counters.account.global);this.displayNotification(".receivedMessageCount",a.counters.messaging.global);this.displayNotification(".favoriteProductCount",a.counters.likes.global);this.displayNotification(".cartProductCount",a.counters.cart.global)},updateLikesLink:function(c,b){var a=b.menus.likes.link;if("undefined"!==typeof a){$(this.likesLinkSelector).prop("href",a)}}};
function initFormDislay(b){var a=!isNaN(parseFloat(navigator.appVersion.split("MSIE")[1]))?true:false;if(false===a){return}$(b).each(function(){if($(this).val()===""){$(this).val($(this).attr("placeholder"))}});$(b).focus(function(){if($(this).val()==$(this).attr("placeholder")){$(this).val("")}});$(b).blur(function(){if($(this).val()==""){$(this).val($(this).attr("placeholder"))}})}$(function(){var d=new incubart.ui.Dropdown();d.decorate(".dropdown");var c=new incubart.ui.Placeholder("<p>Chargement...</p>");c.decorate(".loading");var b=new incubart.ui.Confirm("Êtes-vous sûr de vouloir supprimer cet élément ?");b.decorate(".delete");var b=new incubart.ui.Confirm("Êtes-vous sûr de vouloir effectuer cette action ?");b.decorate(".confirm");function a(e,n,o,j){var m=window.screenLeft!==undefined?window.screenLeft:screen.left;var f=window.screenTop!==undefined?window.screenTop:screen.top;var g=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width;var p=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;var i=((g/2)-(o/2))+m;var l=((p/2)-(j/2))+f;var k=window.open(e,n,"width="+o+", height="+j+", top="+l+", left="+i);if(window.focus){k.focus()}}$(document).on("click",'[data-layer-type="connexion"]',function(f){f.preventDefault();a($(this).attr("href"),"","490","635")});$(document).on("click",'[data-layer-type="ajax"]',function(f){f.preventDefault();$.fancybox($(this).attr("href"),{type:"ajax"})});$(document).on("click",'[data-layer-type="remote-html-content"]',function(f){f.preventDefault();$.fancybox($(this).attr("href"),{type:"ajax",ajax:{dataType:"html",headers:{"X-Requested-With":"nothing"}},helpers:{overlay:{closeClick:false}}})});$(document).on("click",'[data-layer-type="div"]',function(f){f.preventDefault();$.fancybox($(this).attr("href"),{beforeLoad:function(g){$(document).trigger("fancybox.beforeLoad")},afterLoad:function(g){$(document).trigger("fancybox.afterLoad")},beforeShow:function(g){$(document).trigger("fancybox.beforeShow")},afterShow:function(g){$(document).trigger("fancybox.afterShow")},beforeClose:function(g){$(document).trigger("fancybox.beforeClose")},afterClose:function(g){$(document).trigger("fancybox.afterClose")}})});$(document).on("click",'[data-layer-type="ajax"]',function(f){f.preventDefault();$.fancybox($(this).attr("href"),{type:"ajax"})});$(document).on("click",'[data-layer-type="iframe"]',function(f){f.preventDefault();$.fancybox($(this).attr("href"),{type:"iframe"})});initFormDislay("input:not([type=hidden],[type=submit]), textarea");incubart.tools.handleSvgFiles()});