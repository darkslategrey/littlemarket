if (undefined === window.Kameleoon){Kameleoon={processOmniture:function(a){Kameleoon.API.processOmniture(a)}};Kameleoon.API={runWhenElementPresent:function(a,c,b){var d=Kameleoon.Utils.querySelectorAll(a);if(0<d.length){Kameleoon.Utils.runProtectedFunction(c)}else{if(!Kameleoon.Internals.pageLoaded){window.setTimeout(function(){Kameleoon.API.runWhenElementPresent.apply(Kameleoon,[a,c,b])},b?b:200)}}},runWhenConditionTrue:function(b,c,a){if(b()){Kameleoon.Utils.runProtectedFunction(c)}else{if(!Kameleoon.Internals.pageLoaded){window.setTimeout(function(){Kameleoon.API.runWhenConditionTrue.apply(Kameleoon,[b,c,a])},a?a:200)}}},processRedirect:function(b,a){if(window.location.href!=b){if(Kameleoon.Internals.configuration.googleAnalytics&&Kameleoon.Gatherer&&(1==Kameleoon.Internals.Visitor.currentVisit.wholeVisitHistory.timesStartedPages.length)){b=Kameleoon.Utils.addParameterToURL(b,"utm_referrer="+encodeURIComponent(document.referrer),Kameleoon.Internals.configuration.googleAnalyticsAllowAnchor)}if(Kameleoon.Internals.configuration.adobeOmniture&&Kameleoon.Internals.configuration.adobeOmniture.anchorReferrer&&Kameleoon.Gatherer&&(1==Kameleoon.Internals.Visitor.currentVisit.wholeVisitHistory.timesStartedPages.length)){b=Kameleoon.Utils.addParameterToURL(b,"sc_referrer="+encodeURIComponent(document.referrer),true)}if(a){b=Kameleoon.Utils.addParameterToURL(b,"kameleoonAVTE-"+Kameleoon.API.currentContainer.id+"="+Kameleoon.API.currentContainer.registeredVariation.id,true);b=Kameleoon.Utils.addParameterToURL(b,"kameleoonRedirect-"+Kameleoon.API.currentContainer.id+"=true",true)}if(window.location.href!=b){Kameleoon.Utils.createLocalData("kameleoonRedirect-"+Kameleoon.API.currentContainer.id,window.location.href,1,null,null,false);Kameleoon.API.forceNoFlicker("*");Kameleoon.Internals.Analyst.applyRedirect=true;window.location.replace(b)}}},triggerEvent:function(a){Kameleoon.API.events.push(a);Kameleoon.Analyst.processAllContainers()},processConversion:function(f,g){var d=[];for(var c=0,b=Kameleoon.API.currentVisit.activeExperiments.length;c<b;++c){d.push(Kameleoon.API.currentVisit.activeExperiments[c].id)}for(var c=0,b=Kameleoon.Internals.configuration.goals.length;c<b;++c){var a=Kameleoon.Internals.configuration.goals[c];var h,e;if(a.linkedExperimentId){h=a.masterGoalId;e=a.masterGoalName}else{h=a.id;e=a.name}if(h==f||e==f){if(!Kameleoon.Gatherer||("ENGAGEMENT"==a.type&&Kameleoon.Internals.Visitor.currentVisit.obtainNumberConversions(a.id)!=0)||(a.baseGoalId&&-1==d.indexOf(a.linkedExperimentId))){return}Kameleoon.Gatherer.trackConversion(a.id,g?g:0)}}},processOmniture:function(d){if(Kameleoon.API.experiments){for(var c=0,b=Kameleoon.API.experiments.length;c<b;++c){var a=Kameleoon.API.experiments[c];if(a.adobeOmnitureTracking&&a.adobeOmnitureTracking.active){if(a.adobeOmnitureTracking.omnitureAlreadyLoaded){d.linkTrackVars=((!d.linkTrackVars||"None"==d.linkTrackVars)?"":(d.linkTrackVars+","))+"eVar"+a.adobeOmnitureTracking.eVar}d["eVar"+a.adobeOmnitureTracking.eVar]=a.name+" / "+a.registeredVariation.name}}}},waitToProcessElements:function(b,d){if(!(b instanceof Array)){b=[b]}var e=[];for(var h=0,c=b.length;h<c;++h){var g=null;for(var f=0,a=Kameleoon.Internals.pageElementSets.length;f<a;++f){if(Kameleoon.Internals.pageElementSets[f].selector==b[h]){g=f;break}}if(null!==g){e.push(Kameleoon.Internals.pageElementSets[g])}}if(!Kameleoon.Analyst.setupDOMStructure({elementSets:e},false,false,false)&&!Kameleoon.Internals.pageLoaded){window.setTimeout(function(){Kameleoon.API.waitToProcessElements.apply(Kameleoon,[b,d])},d?d:200)}},forceNoFlicker:function(c){var b=document.createElement("style");b.setAttribute("id","kameleoonPageLoading");b.setAttribute("rel","stylesheet");b.setAttribute("type","text/css");b.setAttribute("media","screen");var a=c+" { visibility: hidden !important; background-image: none !important; }";if(b.styleSheet){b.styleSheet.cssText=a}else{b.appendChild(document.createTextNode(a))}Kameleoon.Internals.headNode.appendChild(b)},refresh:function(){Kameleoon.Analyst.refreshForScreenResize()},loadScriptSequentially:function(b){if(b){var a=document.createElement("script");a.src=b;a.setAttribute("onload","Kameleoon.API.loadScriptSequentially();");Kameleoon.Internals.waitingScripts.push(a);if(1==Kameleoon.Internals.waitingScripts.length){Kameleoon.Internals.headNode.appendChild(Kameleoon.Internals.waitingScripts[0])}}else{Kameleoon.Internals.waitingScripts.shift();if(0<Kameleoon.Internals.waitingScripts.length){Kameleoon.Internals.headNode.appendChild(Kameleoon.Internals.waitingScripts[0])}}},processPageLoaded:function(){Kameleoon.Internals.pageLoaded=true;Kameleoon.Utils.removeBlockingStyleSheet();for(var b=0,a=Kameleoon.Internals.configuration.variations.length;b<a;++b){if(Kameleoon.Internals["enginePollerForVariation"+Kameleoon.Internals.configuration.variations[b].id]){window.clearInterval(Kameleoon.Internals["enginePollerForVariation"+Kameleoon.Internals.configuration.variations[b].id]);Kameleoon.Internals["enginePollerForVariation"+Kameleoon.Internals.configuration.variations[b].id]=null}}},setCustomData:function(c,g,f){if(Kameleoon.Gatherer){var e=Kameleoon.Internals.configuration.Gatherer;var b=null;for(var d=0,a=e.customData.length;d<a;++d){if(e.customData[d].name==c){b=d;break}}if(b!=null){Kameleoon.Gatherer.trackCustomData([b],[g],f)}}}};Kameleoon.Analyst={load:function(){try{if (window.localStorage){localStorage.setItem("kameleoonPrivateMode", "false");localStorage.removeItem("kameleoonPrivateMode");}else{Kameleoon.Internals.noLocalStorage = true;}}catch (e){Kameleoon.Internals.noLocalStorage = true;}try{var b=navigator.cookieEnabled?true:false;if((typeof navigator.cookieEnabled=="undefined")&&(!b)){Kameleoon.Utils.createLocalData("kameleoonTestCookie","test",null,"CURRENT_HOST","COOKIE",false,null);if(Kameleoon.Utils.readLocalData("kameleoonTestCookie","COOKIE",false)!="test"){b=false}else{b=true;Kameleoon.Utils.eraseLocalData("kameleoonTestCookie","CURRENT_HOST","COOKIE")}}if(!b){Kameleoon.Internals.noCookie=true}}catch(a){Kameleoon.Internals.noCookie=true}if(window.kameleoonDisplayPage){if(!Kameleoon.Internals.configuration.disableWhenTimeout||document.getElementById("kameleoonLoadingStyleSheet")){window.clearTimeout(window.kameleoonDisplayPageTimeOut)}else{if(!Kameleoon.Internals.noLocalStorage&&Kameleoon.Internals.configuration.disableVisitWhenTimeout){sessionStorage.setItem("kameleoonDisableForVisit","true")}}try{window.kameleoonDisplayPage()}catch(a){}}if(Kameleoon.Internals.noLocalStorage||Kameleoon.Internals.noCookie||sessionStorage.getItem("kameleoonDisableForVisit")){return}if(Kameleoon.Internals.Analyst==null){Kameleoon.Internals.Analyst={}}this.setupKameleoon(Kameleoon.Internals.configuration.siteCode,Kameleoon.Internals.configuration.memberCode)},setupKameleoon:function(b,h){Kameleoon.Internals.QOOXDOO_ESTIMATED_LOADING_TIME=2000;Kameleoon.Internals.SERVER_CALL_ESTIMATED_LOADING_TIME=500;Kameleoon.Internals.GUI_ESTIMATED_LOADING_TIME=3000;Kameleoon.Internals.DOMAIN="kameleoon.com";Kameleoon.Internals.BASE_EDITOR_URL="//static."+Kameleoon.Internals.DOMAIN+"/js/editor/";Kameleoon.Internals.JS_EDITOR_URL=Kameleoon.Internals.BASE_EDITOR_URL+"script/editor.js";Kameleoon.Internals.EDITOR_HOST_NAME="editor";Kameleoon.Internals.ABTESTING_TRACKING_URL="//server1.analyst."+Kameleoon.Internals.DOMAIN+"/_.gif?";Kameleoon.Internals.PAGE_LOADING_POLL_DELAY=75;Kameleoon.Internals.PAGE_LOADED_POLL_DELAY=250;Kameleoon.Internals.GEOLOCATION_URL="//tracker."+Kameleoon.Internals.DOMAIN+"/geolocation.gif?";Kameleoon.Internals.oldOpera=/Opera( |\/)12/.test(navigator.userAgent)||(/Opera/.test(navigator.userAgent)&&/Version\/12/.test(navigator.userAgent));Kameleoon.Internals.unsupportedBrowser=/MSIE (6|7)/.test(navigator.userAgent)||Kameleoon.Internals.oldOpera;Kameleoon.Internals.internetExplorer=!!(window.attachEvent&&!window.opera);Kameleoon.Internals.oldInternetExplorer=/MSIE 8/.test(navigator.userAgent);Kameleoon.Internals.modernInternetExplorer=/MSIE 10/.test(navigator.userAgent);Kameleoon.Internals.webKit=/webkit\/(\d+)/i.test(navigator.userAgent);Kameleoon.Internals.firefox=/Firefox/i.test(navigator.userAgent);Kameleoon.Internals.parameters=Kameleoon.Utils.parseParameters();Kameleoon.Internals.siteCode=b;if(Kameleoon.Internals.parameters.kameleoonOptout){Kameleoon.Utils.createLocalData("kameleoonOptout",true,45,null,"COOKIE",false)}if(Kameleoon.Internals.configuration.checkTraffic){if(!Kameleoon.Utils.readLocalData("kameleoonTraffic","COOKIE",false)){var c="//server1.counter."+Kameleoon.Internals.DOMAIN+"/_.gif?siteCode="+Kameleoon.Internals.siteCode+"&totalTraffic=true";Kameleoon.Utils.performBeaconServerCall(c);Kameleoon.Utils.createLocalData("kameleoonTraffic","true",30,null,"COOKIE",false)}}if(this.shouldAbortSetup()){return}Kameleoon.Internals.headNode=document.getElementsByTagName("head")[0];Kameleoon.Internals.waitingScripts=[];Kameleoon.Internals.pageElementSets=[];Kameleoon.Internals.editorMode=("true"==Kameleoon.Internals.parameters.kameleoon);Kameleoon.Internals.disableCache=("true"==Kameleoon.Internals.parameters.kameleoonDisableCache)||Kameleoon.Internals.parameters.kameleoonVariationId;Kameleoon.Internals.memberCode=h;Kameleoon.API.personalizations=Kameleoon.Internals.configuration.personalizations;for(var d=0,a=Kameleoon.API.personalizations.length;d<a;++d){Kameleoon.API.personalizations[d].targeting=undefined;Kameleoon.API.personalizations[d].currentTargetingSegment=Kameleoon.Utils.clone(Kameleoon.API.personalizations[d].targetingSegment)}Kameleoon.API.activePersonalizations=[];Kameleoon.Internals.currentTime=new Date().getTime();Kameleoon.Internals.virtualRootElement=document.createElement("div");if(Kameleoon.Internals.parameters.kameleoonVariationId){Kameleoon.Internals.configuration.variations=[{id:"reference",name:"Reference",builtCssCodeLevel2:"",elementSets:[]}];Kameleoon.API.personalizations.push({id:"",name:"Visualization",targeting:undefined,currentTargetingSegment:{},targetingSegment:{},variation:{name:"",id:Kameleoon.Internals.parameters.kameleoonVariationId}});if(Kameleoon.Internals.parameters.kameleoonHeatMap){var f=document.createElement("script");f.setAttribute("type","text/javascript");f.setAttribute("charset","utf-8");f.setAttribute("src","https://tracker.kameleoon.com:8443/tracker/heatMap/obtainHeatMapScript?siteCode="+b+"&variationId="+Kameleoon.Internals.parameters.kameleoonVariationId+"&experimentId="+Kameleoon.Internals.parameters.kameleoonExperimentId+"&pageWidth="+Kameleoon.Internals.parameters.kameleoonPageWidth);Kameleoon.Internals.headNode.appendChild(f)}}if(window.parent!=window){try{Kameleoon.Internals.editorMode=Kameleoon.Internals.editorMode||(window.parent.location.search&&-1!=window.parent.location.search.indexOf("kameleoon=true"))}catch(g){}}if(Kameleoon.Internals.configuration.analyst){Kameleoon.API.events=[];Kameleoon.API.experiments=Kameleoon.Internals.parameters.kameleoonVariationId?[]:Kameleoon.Internals.configuration.experiments;for(var d=0,a=Kameleoon.API.experiments.length;d<a;++d){Kameleoon.API.experiments[d].targeting=undefined;Kameleoon.API.experiments[d].currentTargetingSegment=Kameleoon.Utils.clone(Kameleoon.API.experiments[d].targetingSegment)}this.obtainSimulationModeData()}else{this.setupAfterLocalDataRetrieval()}if(window.addEventListener){window.addEventListener("message",Kameleoon.Utils.processMessageEvent,false)}},shouldAbortSetup:function(){if(Kameleoon.Internals.parameters.kameleoonDisabled||Kameleoon.Internals.configuration.kameleoonDisabled){return true}if(Kameleoon.Internals.unsupportedBrowser){return true}if(Kameleoon.Internals.configuration.useWideDomainSupport&&Kameleoon.Internals.oldInternetExplorer){return true}if(Kameleoon.Utils.readLocalData("kameleoonOptout","COOKIE",false)){return true}return false},obtainSimulationModeData:function(){if(Kameleoon.Internals.parameters.kameleoonSimulation){Kameleoon.Internals.newSimulationModeData=true;if(0==Kameleoon.Internals.parameters.kameleoonSimulation.indexOf("serverCall-")){var a="//api."+Kameleoon.Internals.DOMAIN+"/api?task=retrieveSimulationData&siteCode="+Kameleoon.Internals.siteCode+"&simulationCode="+Kameleoon.Internals.parameters.kameleoonSimulation.substring(11);var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("charset","utf-8");b.setAttribute("src",a);Kameleoon.Internals.headNode.appendChild(b);return}Kameleoon.Internals.simulationModeData=Kameleoon.Utils.JSONParse(Kameleoon.Internals.parameters.kameleoonSimulation)}this.setupLocalData()},setupLocalData:function(){if(Kameleoon.Internals.configuration.useWideDomainSupport){if(Kameleoon.API.experiments.length>0&&Kameleoon.Internals.configuration.useBlockingWideDomainSupport){Kameleoon.API.forceNoFlicker("*");window.setTimeout(this.stopKameleoonLoad,1000)}Kameleoon.Internals.postMessageCallbacks={};this.loadExternalIframe();var a=function(b){Kameleoon.Analyst.setupLocalDataCallback.apply(Kameleoon.Analyst,[b])};if(window.kameleoonExternalIFrameLoaded){Kameleoon.Internals.externalIframe.contentWindow.postMessage(Kameleoon.Utils.JSONStringify({type:"retrieve",callbackId:Kameleoon.Utils.addPostMessageCallback(a)}),"*")}else{Kameleoon.Internals.externalIframe.addEventListener("load",function(){Kameleoon.Internals.externalIframe.contentWindow.postMessage(Kameleoon.Utils.JSONStringify({type:"retrieve",callbackId:Kameleoon.Utils.addPostMessageCallback(a)}),"*")},false)}}else{this.setupLocalDataCallback(null)}},stopKameleoonLoad:function(){if(Kameleoon.Internals.wideDomainTimeout!==false){Kameleoon.Utils.removeBlockingStyleSheet();Kameleoon.Internals.wideDomainTimeout=true}},loadExternalIframe:function(){Kameleoon.Internals.externalIframe=document.getElementById("kameleoonExternalIframe");Kameleoon.Internals.postMessageOrigin="https://"+Kameleoon.Internals.siteCode+"."+Kameleoon.Internals.DOMAIN;Kameleoon.Internals.postMessageOriginIFrameIntegration="https://"+Kameleoon.Internals.siteCode+".kameleoon.eu";if(!Kameleoon.Internals.externalIframe){var a=document.createElement("iframe");a.id="kameleoonExternalIframe";a.setAttribute("src",Kameleoon.Internals.postMessageOrigin);a.setAttribute("style","opacity: 0.0 !important; width: 0px !important; height: 0px !important;");Kameleoon.Internals.externalIframe=a;Kameleoon.Internals.headNode.appendChild(a)}},loadKameleoonFull:function(callback){var kameleoonFullJS=sessionStorage.getItem("kameleoonFullJS");var kameleoonFullJSTime=sessionStorage.getItem("kameleoonFullJSTime");if((null==kameleoonFullJS)||(null==kameleoonFullJSTime)||(new Date().getTime()-parseInt(kameleoonFullJSTime)>=12*60*60*1000)){Kameleoon.Utils.performBeaconServerCall("//static."+Kameleoon.Internals.DOMAIN+"/kameleoon-full.js",function(){if((this.readyState==4)&&(this.status==200)){sessionStorage.setItem("kameleoonFullJS",this.responseText);sessionStorage.setItem("kameleoonFullJSTime",new Date().getTime());eval(this.responseText);if(null!=callback){callback()}}})}else{eval(kameleoonFullJS);if(null!=callback){callback()}}},setupLocalDataCallback:function(p){Kameleoon.Utils.removeBlockingStyleSheet();if(Kameleoon.Internals.wideDomainTimeout){return}Kameleoon.Internals.wideDomainTimeout=false;if(Kameleoon.Internals.newSimulationModeData){Kameleoon.Utils.createLocalData("kameleoonSimulationMode",Kameleoon.Internals.simulationModeData,1/24,null,"LS",true)}else{Kameleoon.Internals.simulationModeData=p?p.kameleoonSimulationMode:Kameleoon.Utils.readLocalData("kameleoonSimulationMode","LS",true)}if(Kameleoon.Internals.simulationModeData){Kameleoon.Internals.simulationMode=true;Kameleoon.Internals.disableCache=true;Kameleoon.Internals.configuration.variations=[{id:"reference",name:"Reference",builtCssCodeLevel2:"",elementSets:[]}];this.loadKameleoonFull(function(){Kameleoon.Loader.enableKameleoonEditor.apply(Kameleoon.Loader);Kameleoon.Analyst.processSimulations.apply(Kameleoon.Analyst)})}for(var y=0,v=Kameleoon.API.experiments.length;y<v;++y){var e=Kameleoon.API.experiments[y];var b=false;var o=p?p["kameleoonRedirect-"+e.id]:Kameleoon.Utils.readLocalData("kameleoonRedirect-"+e.id,null,false)?true:false;o=o?true:(Kameleoon.Internals.parameters["kameleoonRedirect-"+e.id]?true:false);e.previousRequestRedirected=o;var k=p?p["kameleoonExperiment-"+e.id]:Kameleoon.Utils.readLocalData("kameleoonExperiment-"+e.id,null,false);for(var C in Kameleoon.Internals.parameters){if(0==C.indexOf("kameleoonAVTE-"+e.id)){k=Kameleoon.Internals.parameters[C]+"/"+new Date().getTime()+"/"+false;b=true}}if(k){var t=k.split("/");e.registeredVariationId=t[0];e.assignmentTime=t[1];e.counterActive=(t[2]=="true"&&(new Date().getTime()-e.assignmentTime<2592000000))?true:false}else{e.counterActive=false}if(e.registeredVariationId&&-1!=e.registeredVariationId.indexOf("-mentalist")){e.registeredVariationId=e.registeredVariationId.replace("-mentalist","");e.mentalistEnabled=true}if(b){Kameleoon.Analyst.writeExperimentLocalData(e)}}if(Kameleoon.API.personalizations.length>0){var c;var k=p?p.kameleoonPersonalizations:Kameleoon.Utils.readLocalData("kameleoonPersonalizations");if(k){var t=k.split("/");c=(t[0]=="true")?true:false}else{if(Math.random()<=Kameleoon.Internals.configuration.personalizationsDeviation){c=true}else{c=false}k=c+"/"+new Date().getTime();Kameleoon.Utils.createLocalData("kameleoonPersonalizations",k,380,null,null,false)}if(Kameleoon.API.visitor==null){Kameleoon.API.visitor={}}if(Kameleoon.Internals.simulationMode&&null==Kameleoon.Internals.simulationModeData.experiments){c=true}Kameleoon.API.visitor.personalizationsActive=c}var h=p?p.kameleoonData:Kameleoon.Utils.readLocalData("kameleoonData","LS",true);var n=h?Kameleoon.Utils.decodeString(h):"{}";var d;try{d=n?Kameleoon.Utils.JSONParse(n):{}}catch(f){n=h;d=n?Kameleoon.Utils.JSONParse(n):{}}Kameleoon.Internals.storedData=d;Kameleoon.Analyst.setupAfterLocalDataRetrieval();var a={simulation:true};for(var y=0,v=Kameleoon.Internals.configuration.experiments.length;y<v;++y){a[Kameleoon.Internals.configuration.experiments[y].id]=true}for(var y=0,v=Kameleoon.Internals.configuration.pausedExperiments.length;y<v;++y){a[Kameleoon.Internals.configuration.pausedExperiments[y]]=true}var g=[];var x=document.cookie.split(new RegExp("; *"));for(var y=0,v=x.length;y<v;++y){var z=x[y].substring(0,x[y].indexOf("="));var r=z.indexOf("kameleoonExperiment-");if(r==0){var A=z.substring("kameleoonExperiment-".length);if(a[A]==null){g.push(z)}}}var s=window.location.hostname.split(".");for(var y=0,v=g.length;y<v;++y){var B=g[y];var q="";for(var w=0,u=s.length;w<u;w++){if(w>0){q="."+q}q=s[u-w-1]+q;Kameleoon.Utils.eraseLocalData(B,q,"COOKIE")}}},setupAfterLocalDataRetrieval:function(){if(Kameleoon.Internals.configuration.analyst){if(Kameleoon.Gatherer){Kameleoon.Gatherer.run(Kameleoon.Internals.developmentEnvironment)}else{Kameleoon.Utils.saveStoredData()}if(Kameleoon.Internals.configuration.geolocation){Kameleoon.Utils.performBeaconServerCall(Kameleoon.Internals.GEOLOCATION_URL,function(){Kameleoon.Analyst.trackGeolocationCallback(this)},null)}if(Kameleoon.API.experiments&&Kameleoon.API.experiments.length>0){this.performExperiments()}}if(Kameleoon.API.personalizations&&Kameleoon.API.personalizations.length>0){this.performPersonalizations()}Kameleoon.Utils.domReady(function(){Kameleoon.Internals.domReady=true;if(!(true===Kameleoon.Internals.configuration.disableEditorLaunchViaKeys)){Kameleoon.Loader.enableKameleoonEditorListener()}if(Kameleoon.Internals.editorMode&&!Kameleoon.Internals.editorEnabled){Kameleoon.Analyst.loadKameleoonFull(function(){Kameleoon.Loader.enableKameleoonEditor.apply(Kameleoon.Loader)})}Kameleoon.Analyst.processTrackingScript.apply(Kameleoon.Analyst)})},trackGeolocationCallback:function(a){if((a.readyState==4)&&(a.status==204)){Kameleoon.Internals.geolocation={country:a.getResponseHeader("geoip_country_name")||a.getResponseHeader("geoip_city_country_name"),region:a.getResponseHeader("geoip_region_name"),city:a.getResponseHeader("geoip_city"),latitude:a.getResponseHeader("geoip_latitude"),longitude:a.getResponseHeader("geoip_longitude")};if((undefined!=Kameleoon.Internals.geolocation.latitude)&&(undefined!=Kameleoon.Internals.geolocation.longitude)&&Kameleoon.Gatherer){Kameleoon.Gatherer.trackWeather(Kameleoon.Internals.geolocation.latitude,Kameleoon.Internals.geolocation.longitude,function(){Kameleoon.Analyst.processAllContainers()})}else{this.processAllContainers()}}},performExperiments:function(){for(var d=0,b=Kameleoon.API.experiments.length;d<b;++d){var a=Kameleoon.API.experiments[d];if(a.previousRequestRedirected){a.redirectProcessed=true;if(Kameleoon.Internals.configuration.adobeOmniture){var c=Kameleoon.Internals.configuration.adobeOmniture.object?Kameleoon.Internals.configuration.adobeOmniture.object:"s";if(Kameleoon.Internals.parameters.sc_referrer){window[c].referrer=Kameleoon.Internals.parameters.sc_referrer}}Kameleoon.Utils.eraseLocalData("kameleoonRedirect-"+a.id,null,null)}this.processContainer(a);if(true!==a.targeting&&a.redirectProcessed){this.performVariationAssignment(a,true);this.performTracking(a)}else{if(a.preAssignVariation){this.performVariationAssignment(a,true)}}}if(Kameleoon.Internals.configuration.goals){for(var d=0,b=Kameleoon.Internals.configuration.goals.length;d<b;++d){this.checkGoal(Kameleoon.Internals.configuration.goals[d])}}},performVariationAssignment:function(experiment,onlyRegisteredVariation){if(experiment.variation&&!onlyRegisteredVariation){return}var registeredVariationId=experiment.registeredVariationId,assignmentTime=experiment.assignmentTime;if(registeredVariationId&&assignmentTime){for(var i=0,l=experiment.variations.length;i<l;++i){if(registeredVariationId==experiment.variations[i].id&&experiment.variations[i].respoolTime>assignmentTime||("none"==registeredVariationId&&experiment.untrackedRespoolTime>assignmentTime)){registeredVariationId=null;break}}}if("none"!=registeredVariationId&&!Kameleoon.Internals.simulationMode&&!this.findVariation(registeredVariationId)){registeredVariationId=null}if(!registeredVariationId||"true"==Kameleoon.Internals.parameters.kameleoonEraseCookies){var customVariationSelectionFunction=null;if(experiment.customVariationSelectionScript){try{eval(experiment.customVariationSelectionScript)}catch(exception){}}if(experiment.mentalistDeviation){var deviationRandom=Math.random();if(deviationRandom<=experiment.mentalistDeviation){experiment.mentalistEnabled=true}}if(experiment.mentalistEnabled){var idList=[];for(var i=0,l=experiment.variations.length;i<l;++i){if("reference"!=experiment.variations[i].id){idList.push(experiment.variations[i].id)}}registeredVariationId=Kameleoon.Mentalist.computeBestActionToApply(idList);if(!registeredVariationId){registeredVariationId="reference"}}else{if(customVariationSelectionFunction){registeredVariationId=customVariationSelectionFunction(experiment)}else{var deviationRandom=Math.random();var total=0;for(var i=0,l=experiment.variations.length;i<l;++i){total+=experiment.variations[i].deviation;if(deviationRandom<=total){registeredVariationId=experiment.variations[i].id;break}}registeredVariationId=registeredVariationId?registeredVariationId:"none"}}experiment.registeredVariationId=registeredVariationId+(experiment.mentalistEnabled?"-mentalist":"");experiment.assignmentTime=new Date().getTime();this.writeExperimentLocalData(experiment)}this.associateContainerAndVariation(experiment,registeredVariationId,onlyRegisteredVariation?"REGISTERED_VARIATION":"BOTH")},performPersonalizations:function(){for(var c=0,a=Kameleoon.API.personalizations.length;c<a;++c){var b=Kameleoon.API.personalizations[c];var d=(b.variation&&Kameleoon.API.visitor.personalizationsActive)?b.variation.id:"reference";this.associateContainerAndVariation(b,d,"BOTH")}for(var c=0,a=Kameleoon.API.personalizations.length;c<a;++c){if(false!==Kameleoon.API.personalizations[c].targeting){this.processContainer(Kameleoon.API.personalizations[c])}}},processAllContainers:function(){for(var b=0,a=Kameleoon.API.experiments.length;b<a;++b){this.processContainer(Kameleoon.API.experiments[b])}for(var b=0,a=Kameleoon.API.personalizations.length;b<a;++b){this.processContainer(Kameleoon.API.personalizations[b])}},processContainer:function(a){this.processContainerStep(a);if(!Kameleoon.Internals.domReady&&!a.domReadyCallback){a.domReadyCallback=true;Kameleoon.Utils.domReady(function(){Kameleoon.Internals.domReady=true;Kameleoon.Analyst.processContainerStep(a)})}},processContainerStep:function(a){this.checkTargeting(a);if(true===a.targeting){if(a.experimentContainer){this.performVariationAssignment(a,false)}if(a.variation&&a.variation.elementSets){this.processVariationCommands(a.variation);this.performTracking(a)}}},loadVariationData:function(b,a){var f=b.variation.id;if(a){sessionStorage.removeItem("kameleoonVariation"+f)}var d=sessionStorage.getItem("kameleoonVariation"+f);if(d){Kameleoon.Internals.configuration.variations.push(Kameleoon.Utils.JSONParse(d));Kameleoon.Analyst.associateContainerAndVariation(b,f,"BOTH");return}if(!Kameleoon.Internals.requestedVariations[f]){Kameleoon.Internals.requestedVariations[f]={containers:[]};if("reference"!=f){var c="//static."+Kameleoon.Internals.DOMAIN+"/css/customers/"+Kameleoon.Internals.siteCode+"/"+Kameleoon.Internals.memberCode+"/";if(b.simulationMode&&b.multiVariateTest){c+="simulation/"+f+"-data.js"}else{c+=f+"/data.js"}if(Kameleoon.Internals.disableCache){c+="?cache="+Kameleoon.Utils.obtainRandomString(16)}var e=document.createElement("script");e.setAttribute("type","text/javascript");e.setAttribute("charset","utf-8");e.setAttribute("src",c);Kameleoon.Internals.headNode.appendChild(e)}}if(a){Kameleoon.Internals.requestedVariations[f].simulation=true}else{Kameleoon.Internals.requestedVariations[f].containers.push(b)}},checkGoal:function(b){if("URL"==b.type){var a=new RegExp(b.url);if(a.test(window.location.href)){Kameleoon.API.processConversion(b.id)}}if("ENGAGEMENT"==b.type){if(document.addEventListener){document.addEventListener("mousedown",function(c){Kameleoon.API.processConversion(b.id)},true)}}if("PAGE_VIEWS"==b.type){if(Kameleoon.Gatherer){if(Kameleoon.Internals.Visitor.currentVisit.wholeVisitHistory.timesStartedPages.length>=b.pageViews){Kameleoon.API.processConversion(b.id)}}}if("TIME_SPENT"==b.type){if(Kameleoon.Gatherer){if(Kameleoon.Internals.Visitor.currentVisit.timeLastActivity-Kameleoon.Internals.Visitor.currentVisit.timeStarted>=b.timeSpent*1000){Kameleoon.API.processConversion(b.id)}}}},checkTargeting:function(container){if(undefined!==container.targeting){return}var targetingConditions=container.currentTargetingSegment;if(!targetingConditions){targetingConditions=[]}var rescheduleTargeting=false;for(var i=0,l=targetingConditions.length;i<l;++i){var currentCondition=targetingConditions[i];var includeResult=null;var excludeResult=false;for(var j=0,m=currentCondition.subconditions.length;j<m;++j){var currentSubcondition=currentCondition.subconditions[j];var currentSubconditionResult=true;switch(currentCondition.type){case"EVENT":currentSubconditionResult=undefined;for(var k=0,n=Kameleoon.API.events.length;k<n;++k){if(currentSubcondition.value==Kameleoon.API.events[k]){currentSubconditionResult=true;break}}break;case"MEAN_PAGE_DURATION":if(Kameleoon.Gatherer){var meanPageDuration=Kameleoon.Internals.Visitor.currentVisit.obtainMeanPageDuration();switch(currentSubcondition.operator){case"EXACT":if(meanPageDuration==currentSubcondition.value){currentSubconditionResult=true}else{currentSubconditionResult=undefined;rescheduleTargeting=true}break;case"LOWER":if(meanPageDuration<currentSubcondition.value){currentSubconditionResult=true}else{currentSubconditionResult=undefined;rescheduleTargeting=true}break;case"GREATER":if(meanPageDuration>currentSubcondition.value){currentSubconditionResult=true}else{currentSubconditionResult=undefined;rescheduleTargeting=true}break}}break;case"GEOLOCATION":if(!Kameleoon.Internals.geolocation){currentSubconditionResult=undefined}else{if((currentSubcondition.country&&(currentSubcondition.country!=Kameleoon.Internals.geolocation.country))||(currentSubcondition.region&&(currentSubcondition.region!=Kameleoon.Internals.geolocation.region))||(currentSubcondition.city&&(currentSubcondition.city!=Kameleoon.Internals.geolocation.city))){currentSubconditionResult=false}else{currentSubconditionResult=true}}break;case"WEATHER":if(Kameleoon.Gatherer){currentSubconditionResult=new RegExp(currentSubcondition.value,"i").test(Kameleoon.Internals.Visitor.currentVisit.weatherCode)}break;case"TIME_SINCE_PAGE_LOAD":if(Kameleoon.Gatherer){var timeStartedPage=Kameleoon.Gatherer.obtainFieldFromTabData("timeStartedPage");if(new Date().getTime()-timeStartedPage>currentSubcondition.value){currentSubconditionResult=true}else{currentSubconditionResult=undefined;rescheduleTargeting=true}}break;case"TIME_SINCE_PREVIOUS_VISIT":if(Kameleoon.Gatherer){switch(currentSubcondition.operator){case"EXACT":currentSubconditionResult=(Kameleoon.Internals.Visitor.currentVisit.timeSincePreviousVisit==currentSubcondition.value);break;case"LOWER":currentSubconditionResult=(Kameleoon.Internals.Visitor.currentVisit.timeSincePreviousVisit<currentSubcondition.value);break;case"GREATER":currentSubconditionResult=(Kameleoon.Internals.Visitor.currentVisit.timeSincePreviousVisit>currentSubcondition.value);break}}break;case"TABS_ON_SITE":if(Kameleoon.Gatherer){switch(currentSubcondition.operator){case"EXACT":if(Kameleoon.Internals.Visitor.currentVisit.maxNumberTabs==currentSubcondition.value){currentSubconditionResult=true}else{currentSubconditionResult=undefined;rescheduleTargeting=true}break;case"LOWER":if(Kameleoon.Internals.Visitor.currentVisit.maxNumberTabs<currentSubcondition.value){currentSubconditionResult=true}else{currentSubconditionResult=undefined;rescheduleTargeting=true}break;case"GREATER":if(Kameleoon.Internals.Visitor.currentVisit.maxNumberTabs>currentSubcondition.value){currentSubconditionResult=true}else{currentSubconditionResult=undefined;rescheduleTargeting=true}break}}break;case"DAY_OF_WEEK":if(Kameleoon.Gatherer){currentSubconditionResult=(currentSubcondition.value==new Date(Kameleoon.Internals.Visitor.currentVisit.timeStarted).getDay())}break;case"TIME_RANGE":if(Kameleoon.Gatherer){currentSubconditionResult=(Kameleoon.Internals.Visitor.currentVisit.timeStarted>=currentSubcondition.gte)&&(Kameleoon.Internals.Visitor.currentVisit.timeStarted<currentSubcondition.lt)}break;case"HOUR_MINUTE_RANGE":if(Kameleoon.Gatherer){var hoursGTE=currentSubcondition.hoursGTE;var minutesGTE=currentSubcondition.minutesGTE;var hoursLT=currentSubcondition.hoursLT;var minutesLT=currentSubcondition.minutesLT;var hoursStartedVisit=new Date(Kameleoon.Internals.Visitor.currentVisit.timeStarted).getHours();var minutesStartedVisit=new Date(Kameleoon.Internals.Visitor.currentVisit.timeStarted).getMinutes();if(minutesLT==0){hoursLT--;if(hoursLT==-1){hoursLT=23}minutesLT=60}if((hoursLT<hoursGTE)||((hoursLT==hoursGTE)&&(minutesLT<minutesGTE))){hoursLT+=24;if((hoursStartedVisit<hoursGTE)||((hoursStartedVisit==hoursGTE)&&(minutesStartedVisit<minutesGTE))){hoursStartedVisit+=24}}currentSubconditionResult=(hoursStartedVisit>=hoursGTE)&&(hoursStartedVisit<=hoursLT)&&(minutesStartedVisit>=minutesGTE)&&(minutesStartedVisit<minutesLT)}break;case"REFERRERS":if(Kameleoon.Gatherer){if(currentSubcondition.value<0){currentSubconditionResult=false;for(var k=0,n=Kameleoon.Internals.configuration.Gatherer.referrers.length;k<n;++k){if(Kameleoon.Internals.Visitor.currentVisit.obtainReferrerIsPresent(k)){currentSubconditionResult=true;break}}}else{currentSubconditionResult=Kameleoon.Internals.Visitor.currentVisit.obtainReferrerIsPresent(currentSubcondition.value)}}break;case"INTERESTS":if(Kameleoon.Gatherer){currentSubconditionResult=undefined;if(currentSubcondition.value<0){for(var k=0,n=Kameleoon.Internals.configuration.Gatherer.interests.length;k<n;++k){if(Kameleoon.Internals.Visitor.currentVisit.obtainInterestIsActive(k)){currentSubconditionResult=true;break}}}else{if(Kameleoon.Internals.Visitor.currentVisit.obtainInterestIsActive(currentSubcondition.value)){currentSubconditionResult=true}}}break;case"KEY_PAGES":if(Kameleoon.Gatherer){currentSubconditionResult=false;if(currentSubcondition.value<0){for(var k=0,n=Kameleoon.Internals.configuration.Gatherer.keyPages.length;k<n;++k){if(Kameleoon.Internals.Visitor.currentVisit.obtainKeyPageIsVisited(k)){currentSubconditionResult=true;break}}}else{if(Kameleoon.Internals.Visitor.currentVisit.obtainKeyPageIsVisited(currentSubcondition.value)){currentSubconditionResult=true}}}break;case"INTERNAL_SEARCH_KEYWORDS":if(Kameleoon.Gatherer){currentSubconditionResult=undefined;if(currentSubcondition.value<0){for(var k=0,n=Kameleoon.Internals.configuration.Gatherer.keyWords.length;k<n;++k){if(Kameleoon.Internals.Visitor.currentVisit.obtainKeyWordIsSearched(k)){currentSubconditionResult=true;break}}}else{if(Kameleoon.Internals.Visitor.currentVisit.obtainKeyWordIsSearched(currentSubcondition.value)){currentSubconditionResult=true}}}break;case"CONVERSIONS":if(Kameleoon.Gatherer){currentSubconditionResult=undefined;if(currentSubcondition.value<0){for(var k=0,n=Kameleoon.Internals.configuration.goals.length;k<n;++k){if(Kameleoon.Internals.Visitor.currentVisit.obtainNumberConversions(Kameleoon.Internals.configuration.goals[k].id)>0){currentSubconditionResult=true;break}}}else{if(Kameleoon.Internals.Visitor.currentVisit.obtainNumberConversions(currentSubcondition.value)>0){currentSubconditionResult=true}}}break;case"CUSTOM_DATUM":if(Kameleoon.Gatherer){currentSubconditionResult=undefined;var customDatumIndex=currentSubcondition.index;var customDatumValue=Kameleoon.Internals.Visitor.currentVisit.valueByCustomDatum[customDatumIndex];if(customDatumValue!=null){var customDatumType=Kameleoon.Internals.configuration.Gatherer.customData[customDatumIndex].type;var customDatumIsCollection=(customDatumType=="LIST")||(customDatumType=="COUNT_LIST");switch(currentSubcondition.operator){case"CONTAINS":if(customDatumIsCollection){for(var k=0,n=customDatumValue.length;k<n;++k){if((customDatumValue[k]!=null)&&(customDatumValue[k].value!=null)&&customDatumValue[k].value.toString().indexOf(currentSubcondition.value)>=0){currentSubconditionResult=true;break}}}else{if((customDatumValue!=null)&&customDatumValue.toString().indexOf(currentSubcondition.value)>=0){currentSubconditionResult=true}}break;case"EXACT":if(customDatumIsCollection){for(var k=0,n=customDatumValue.length;k<n;++k){if((customDatumValue[k]!=null)&&(customDatumValue[k].value!=null)&&customDatumValue[k].value.toString()===currentSubcondition.value){currentSubconditionResult=true;break}}}else{if((customDatumValue!=null)&&customDatumValue.toString()===currentSubcondition.value){currentSubconditionResult=true}}break;case"REGULAR_EXPRESSION":var regularExpression=new RegExp(currentSubcondition.value);if(customDatumIsCollection){for(var k=0,n=customDatumValue.length;k<n;++k){if(regularExpression.test(customDatumValue[k].value)){currentSubconditionResult=true;break}}}else{if(regularExpression.test(customDatumValue)){currentSubconditionResult=true}}break;case"LOWER":var number=parseFloat(currentSubcondition.value);if(!isNaN(number)){if(customDatumIsCollection){for(var k=0,n=customDatumValue.length;k<n;++k){var valueNumber=parseFloat(customDatumValue[k].value);if(!isNaN(valueNumber)){if(valueNumber<number){currentSubconditionResult=true;break}}}}else{var valueNumber=parseFloat(customDatumValue);if(!isNaN(valueNumber)){if(valueNumber<number){currentSubconditionResult=true}}}}break;case"EQUAL":var number=parseFloat(currentSubcondition.value);if(!isNaN(number)){if(customDatumIsCollection){for(var k=0,n=customDatumValue.length;k<n;++k){var valueNumber=parseFloat(customDatumValue[k].value);if(!isNaN(valueNumber)){if(valueNumber===number){currentSubconditionResult=true;break}}}}else{var valueNumber=parseFloat(customDatumValue);if(!isNaN(valueNumber)){if(valueNumber===number){currentSubconditionResult=true}}}}break;case"GREATER":var number=parseFloat(currentSubcondition.value);if(!isNaN(number)){if(customDatumIsCollection){for(var k=0,n=customDatumValue.length;k<n;++k){var valueNumber=parseFloat(customDatumValue[k].value);if(!isNaN(valueNumber)){if(valueNumber>number){currentSubconditionResult=true;break}}}}else{var valueNumber=parseFloat(customDatumValue);if(!isNaN(valueNumber)){if(valueNumber>number){currentSubconditionResult=true}}}}break;case"TRUE":if(customDatumIsCollection){for(var k=0,n=customDatumValue.length;k<n;++k){if((customDatumValue[k].value===true)||(customDatumValue[k].value==="true")){currentSubconditionResult=true;break}}}else{if((customDatumValue===true)||(customDatumValue==="true")){currentSubconditionResult=true}}break;case"FALSE":if(customDatumIsCollection){for(var k=0,n=customDatumValue.length;k<n;++k){if((customDatumValue[k].value===false)||(customDatumValue[k].value==="false")){currentSubconditionResult=true;break}}}else{if((customDatumValue===false)||(customDatumValue==="false")){currentSubconditionResult=true}}break}}if(currentSubconditionResult==undefined){rescheduleTargeting=true}}break;case"DOM_ELEMENT":if(currentSubcondition.value){currentSubconditionResult=Kameleoon.Utils.querySelectorAll(currentSubcondition.value).length>0}else{if(currentSubcondition.elementSets){currentSubconditionResult=this.obtainElements(currentSubcondition.elementSets,false,false,null).length>0}}if(!Kameleoon.Internals.domReady&&!currentSubconditionResult){if(!Kameleoon.Internals["enginePollerForContainer"+container.id]){Kameleoon.Internals["enginePollerForContainer"+container.id]=window.setInterval(function(){Kameleoon.Analyst.processContainer.apply(Kameleoon.Analyst,[container])},Kameleoon.Internals.PAGE_LOADING_POLL_DELAY)}currentSubconditionResult=undefined}else{window.clearInterval(Kameleoon.Internals["enginePollerForContainer"+container.id]);Kameleoon.Internals["enginePollerForContainer"+container.id]=null}break;case"PAGE_URL":var regularExpression;try{regularExpression=new RegExp(currentSubcondition.value,currentSubcondition.flags)}catch(exception){console.log("Invalid regular expression in Kameleoon Targeting: "+currentSubcondition.value);currentSubconditionResult=false;break}currentSubconditionResult=regularExpression.test(window.location.href);break;case"PAGE_TITLE":var regularExpression=new RegExp(currentSubcondition.value,currentSubcondition.flags);currentSubconditionResult=regularExpression.test(document.title);break;case"JS_CODE":if(currentSubcondition.domReady&&!Kameleoon.Internals.domReady){currentSubconditionResult=undefined;break}try{currentSubconditionResult=eval("(function() {"+currentSubcondition.value+"})();")}catch(exception){currentSubconditionResult=false}if(undefined===currentSubconditionResult){rescheduleTargeting=true}break;case"COOKIE":var cookieValue=Kameleoon.Utils.readLocalData(currentSubcondition.name,"COOKIE",false);if(currentSubcondition.value){var regularExpression=new RegExp(currentSubcondition.value,currentSubcondition.flags);currentSubconditionResult=regularExpression.test(cookieValue)}else{currentSubconditionResult=(cookieValue!=null)}break;case"BROWSER_LANGUAGE":var browserLanguage=(navigator.language)?navigator.language:navigator.userLanguage;currentSubconditionResult=(browserLanguage.substring(0,2)==currentSubcondition.value);break;case"BROWSER":var information=Kameleoon.Utils.parseBrowserVersion();currentSubconditionResult=(information.name==currentSubcondition.value);if(currentSubconditionResult&&currentSubcondition.version){switch(currentSubcondition.operator){case"EXACT":currentSubconditionResult=(information.version==currentSubcondition.version);break;case"LOWER":currentSubconditionResult=(information.version<currentSubcondition.version);break;case"GREATER":currentSubconditionResult=(information.version>currentSubcondition.version);break}}break;case"DEVICE_TYPE":break;case"NEW_VISITORS":if(Kameleoon.Gatherer){var newVisitor=(1==Kameleoon.Internals.Visitor.visits.length);currentSubconditionResult=("NEW"==currentSubcondition.value)?newVisitor:!newVisitor}break;case"VISITS":if(Kameleoon.Gatherer){switch(currentSubcondition.operator){case"GREATER":currentSubconditionResult=(Kameleoon.Internals.Visitor.visits.length>currentSubcondition.value);break;case"LOWER":currentSubconditionResult=(Kameleoon.Internals.Visitor.visits.length<currentSubcondition.value);break;case"EQUAL":currentSubconditionResult=(Kameleoon.Internals.Visitor.visits.length==currentSubcondition.value);break}}break;case"SAME_DAY_VISITS":if(Kameleoon.Gatherer){var date=new Date();var currentYear=date.getFullYear();var currentMonth=date.getMonth();var currentDay=date.getDay();var sameDayVisits=0;for(var k=0,n=Kameleoon.Internals.Visitor.visits.length;k<n;++k){var dateStartedVisit=new Date(Kameleoon.Internals.Visitor.visits[k].timeStarted);if((currentYear==dateStartedVisit.getFullYear())&&(currentMonth==dateStartedVisit.getMonth())&&(currentDay==dateStartedVisit.getDay())){++sameDayVisits}}switch(currentSubcondition.operator){case"GREATER":currentSubconditionResult=(sameDayVisits>currentSubcondition.value);break;case"LOWER":currentSubconditionResult=(sameDayVisits<currentSubcondition.value);break;case"EQUAL":currentSubconditionResult=(sameDayVisits==currentSubcondition.value);break}}break;case"FIRST_VISIT":if(Kameleoon.Gatherer){switch(currentSubcondition.operator){case"GREATER":currentSubconditionResult=((Kameleoon.Internals.Visitor.visits.length>1)&&(Kameleoon.Internals.currentTime-currentSubcondition.value*24*60*60*1000>Kameleoon.Internals.Visitor.visits[0].timeStarted));break;case"LOWER":currentSubconditionResult=((Kameleoon.Internals.Visitor.visits.length>1)&&(Kameleoon.Internals.currentTime-currentSubcondition.value*24*60*60*1000<Kameleoon.Internals.Visitor.visits[0].timeStarted));break;case"EQUAL":currentSubconditionResult=((Kameleoon.Internals.Visitor.visits.length>1)&&(Kameleoon.Internals.currentTime-currentSubcondition.value*24*60*60*1000==Kameleoon.Internals.Visitor.visits[0].timeStarted));break}}break;case"LAST_VISIT":if(Kameleoon.Gatherer){switch(currentSubcondition.operator){case"GREATER":currentSubconditionResult=((Kameleoon.Internals.Visitor.visits.length>1)&&(Kameleoon.Internals.currentTime-currentSubcondition.value*24*60*60*1000>Kameleoon.Internals.Visitor.visits[Kameleoon.Internals.Visitor.visits.length-2].timeStarted));break;case"LOWER":currentSubconditionResult=((Kameleoon.Internals.Visitor.visits.length>1)&&(Kameleoon.Internals.currentTime-currentSubcondition.value*24*60*60*1000<Kameleoon.Internals.Visitor.visits[Kameleoon.Internals.Visitor.visits.length-2].timeStarted));break;case"EQUAL":currentSubconditionResult=((Kameleoon.Internals.Visitor.visits.length>1)&&(Kameleoon.Internals.currentTime-currentSubcondition.value*24*60*60*1000==Kameleoon.Internals.Visitor.visits[Kameleoon.Internals.Visitor.visits.length-2].timeStarted));break}}break;case"PAGE_VIEWS":if(Kameleoon.Gatherer){switch(currentSubcondition.operator){case"GREATER":currentSubconditionResult=(Kameleoon.Internals.Visitor.currentVisit.wholeVisitHistory.timesStartedPages.length>currentSubcondition.value);break;case"LOWER":currentSubconditionResult=(Kameleoon.Internals.Visitor.currentVisit.wholeVisitHistory.timesStartedPages.length<currentSubcondition.value);break;case"EQUAL":currentSubconditionResult=(Kameleoon.Internals.Visitor.currentVisit.wholeVisitHistory.timesStartedPages.length==currentSubcondition.value);break}}break;case"PREVIOUS_PAGE":var regularExpression=new RegExp(currentSubcondition.value,currentSubcondition.flags);currentSubconditionResult=regularExpression.test(document.referrer);break;case"LANDING_PAGE":if(Kameleoon.Gatherer){var originalLandingPage=Kameleoon.Internals.Visitor.currentVisit.originalLandingPage;var regularExpression=new RegExp(currentSubcondition.value,currentSubcondition.flags);currentSubconditionResult=regularExpression.test(originalLandingPage)}break;case"ORIGIN_TYPE":if(Kameleoon.Gatherer){var originalReferrer=Kameleoon.Internals.Visitor.currentVisit.originalReferrer;var originalLandingPage=Kameleoon.Internals.Visitor.currentVisit.originalLandingPage;switch(currentSubcondition.value){case"SEO":var regularExpression=new RegExp("https?://([^/]*)(google|bing|yahoo|yandex|baidu)([^/]*)/");currentSubconditionResult=regularExpression.test(originalReferrer);currentSubconditionResult=currentSubconditionResult&&(-1==originalLandingPage.indexOf("utm_source")&&-1==originalLandingPage.indexOf("gclid"));break;case"SEM":currentSubconditionResult=(-1!=originalLandingPage.indexOf("utm_medium=cpc")||-1!=originalLandingPage.indexOf("gclid"));break;case"AFFILIATION":var regularExpression=new RegExp("https?://([^/]*)(google|bing|yahoo|yandex|baidu)(.*)/");currentSubconditionResult=regularExpression.test(originalReferrer);currentSubconditionResult=!currentSubconditionResult&&originalReferrer!="";case"EMAIL":currentSubconditionResult=(-1!=originalLandingPage.indexOf("utm_medium=email")||-1!=originalLandingPage.indexOf("utm_medium=newsletter"));break;case"DIRECT":currentSubconditionResult=(originalReferrer=="");break}}break;case"ORIGIN":if(Kameleoon.Gatherer){var originalReferrer=Kameleoon.Internals.Visitor.currentVisit.originalReferrer;var regularExpression=new RegExp(currentSubcondition.value,currentSubcondition.flags);currentSubconditionResult=regularExpression.test(originalReferrer)}break;case"SEARCH_KEYWORDS":if(Kameleoon.Gatherer){var originalReferrer=Kameleoon.Internals.Visitor.currentVisit.originalReferrer;if(-1!=originalReferrer.indexOf("google")&&-1!=originalReferrer.indexOf("q=")){var searchQuery=originalReferrer.substring(originalReferrer.indexOf("q="));searchQuery=searchQuery.substring(0,"&").replaceAll("+"," ");var regularExpression=new RegExp(currentSubcondition.value,currentSubcondition.flags);currentSubconditionResult=regularExpression.test(searchQuery)}}break;case"EXPERIMENTS":if(0==Kameleoon.API.currentVisit.activeExperiments.length||(1==Kameleoon.API.currentVisit.activeExperiments.length&&Kameleoon.API.currentVisit.activeExperiments[0].id==container.id)){return true}return false;break;case"MOUSE_OUT":currentSubconditionResult=undefined;if(Kameleoon.Internals.mouseOutEvent){currentSubconditionResult=true}else{if(!Kameleoon.Internals.mouseOutListener){Kameleoon.Internals.mouseOutListener=true;document.body.addEventListener("mouseleave",function(event){if(event.clientY<0){Kameleoon.Internals.mouseOutEvent=true;Kameleoon.Analyst.processAllContainers()}})}}break}var temporaryResult=currentSubcondition.include?includeResult:excludeResult;switch(currentSubconditionResult){case undefined:temporaryResult=(null===temporaryResult)?undefined:(currentSubcondition.include?temporaryResult:((temporaryResult===true)?true:undefined));break;case true:temporaryResult=true;break;case false:temporaryResult=(null===temporaryResult)?false:temporaryResult;break}if(currentSubcondition.include){includeResult=temporaryResult}else{excludeResult=temporaryResult}}switch(includeResult){case undefined:currentCondition.result=excludeResult?false:undefined;break;case true:case null:currentCondition.result=(undefined===excludeResult)?undefined:(!excludeResult);break;case false:currentCondition.result=false;break}}var i=0,result=true;while(targetingConditions&&i<targetingConditions.length){if(undefined!==targetingConditions[i].result){result=(result===undefined)?(targetingConditions[i].result?undefined:false):(result&&targetingConditions[i].result);targetingConditions.splice(i,1);i=0}else{++i;result=(result===false)?false:undefined}}container.targeting=result;if(false===container.targeting){this.associateContainerAndVariation(container,"reference","VARIATION");this.removeCSSStyleSheet(container)}if(undefined===container.targeting&&rescheduleTargeting){window.setTimeout(function(){Kameleoon.Analyst.processContainer.apply(Kameleoon.Analyst,[container])},Kameleoon.Internals.PAGE_LOADING_POLL_DELAY)}if(Kameleoon.Internals.simulationMode&&Kameleoon.Loader.refreshTargetingPanel){Kameleoon.Loader.refreshTargetingPanel()}},processVariationCommands:function(a){if(!a.immediateCommandsProcessed&&!Kameleoon.Internals.editorMode){this.processVariationImmediateCommands(a)}if(Kameleoon.Internals.domReady&&!a.domReadyCommandsProcessed){this.processVariationDomReadyCommands(a)}},processVariationImmediateCommands:function(d){Kameleoon.API.currentContainer=d.container;d.immediateCommandsProcessed=true;if(d.redirections){for(var c=0,a=d.redirections.length;c<a;++c){if(!d.redirections[c].scope||new RegExp(d.redirections[c].scope).test(window.location.href)){if(d.redirections[c].additionalParameters){if(-1==window.location.search.indexOf(d.redirections[c].string)){if("#"!=d.redirections[c].string[0]){Kameleoon.API.processRedirect(window.location.protocol+"//"+window.location.hostname+((!window.location.port)?"":":"+window.location.port)+window.location.pathname+(window.location.search+((-1==window.location.search.indexOf("?"))?"?":"&")+d.redirections[c].string)+window.location.hash)}else{window.location.replace(window.location.protocol+"//"+window.location.hostname+((!window.location.port)?"":":"+window.location.port)+window.location.pathname+window.location.search+d.redirections[c].string)}}}else{var e=d.redirections[c].string;if(d.redirections[c].keepParameters){e+=(-1!=e.indexOf("?"))?window.location.search.replace("?","&"):window.location.search}Kameleoon.API.processRedirect(e)}}}}if(d.forceNoFlicker){var b="";for(var c=0,a=d.elementSets.length;c<a;++c){b+=((0!=c)?", ":"")+d.elementSets[c].selector}Kameleoon.API.forceNoFlicker(b)}this.addCSSStyleSheet(d,null);if(d.javaScriptCode&&!d.javaScriptCode.afterDOMReady){Kameleoon.Utils.callJavaScriptCode(d.javaScriptCode.code)}if(!Kameleoon.Internals.domReady){Kameleoon.Internals["enginePollerForVariation"+d.id]=window.setInterval(function(){Kameleoon.Analyst.setupDOMStructure.apply(Kameleoon.Analyst,[d,true,false,false])},Kameleoon.Internals.PAGE_LOADING_POLL_DELAY)}},processVariationDomReadyCommands:function(b){var a=b.container;Kameleoon.API.currentContainer=a;b.domReadyCommandsProcessed=true;if(b.javaScriptCode&&b.javaScriptCode.afterDOMReady&&!b.permanentRefreshActive){Kameleoon.Utils.callJavaScriptCode(b.javaScriptCode.code)}if(b.elementSets&&(!a||a.targeting)){this.setupDOMStructure(b,false,b.permanentRefreshActive,b.editionMode)}if(b.forceNoFlicker&&!b.permanentRefreshActive){Kameleoon.Utils.removeBlockingStyleSheet()}if(Kameleoon.Internals["enginePollerForVariation"+b.id]&&!b.permanentRefreshActive){window.clearInterval(Kameleoon.Internals["enginePollerForVariation"+b.id]);Kameleoon.Internals["enginePollerForVariation"+b.id]=null}if(b.permanentRefresh&&!Kameleoon.Internals["enginePollerForVariation"+b.id]){delete (b.permanentRefresh);b.permanentRefreshActive=true;Kameleoon.Internals["enginePollerForVariation"+b.id]=window.setInterval(function(){Kameleoon.Analyst.processVariationDomReadyCommands.apply(Kameleoon.Analyst,[b])},Kameleoon.Internals.PAGE_LOADED_POLL_DELAY)}},processTrackingScript:function(){if(Kameleoon.Internals.configuration.trackingScript&&!Kameleoon.Internals.trackingScriptProcessed&&!Kameleoon.Internals.editorMode){Kameleoon.Internals.trackingScriptProcessed=true;eval(Kameleoon.Internals.configuration.trackingScript)}},performTracking:function(container){if(container.trackingPerformed||container.simulationMode||!container.registeredVariation||!container.registeredVariation.elementSets){return}if(!container.experimentContainer){if(container.api){Kameleoon.API.activePersonalizations.push(container.name)}}var variation=container.registeredVariation;if(container.mentalistEnabled){variation.name+=" (Predicteo)"}if(!Kameleoon.Internals.configuration.checkTestedTrafficActive&&!container.counterActive){container.counterActive=true;var url="//server1.counter."+Kameleoon.Internals.DOMAIN+"/_.gif?siteCode="+Kameleoon.Internals.siteCode+"&anniversaryDay="+Kameleoon.Internals.configuration.anniversaryDay;Kameleoon.Utils.performBeaconServerCall(url);this.writeExperimentLocalData(container)}if(container.googleAnalyticsTracking){this.processGoogleAnalyticsTracking(container)}if(container.kissMetricsTracking){this.processKissMetricsTracking(container)}if(container.piwikTracking){this.processPiwikTracking(container)}if(container.comScoreTracking){this.processComScoreTracking(container)}if(container.crazyEggTracking){this.processCrazyEggTracking(container)}if(container.universalAnalyticsTracking){this.processUniversalAnalyticsTracking(container)}if(container.atInternetTracking){this.processATInternetTracking(container)}if(container.adobeOmnitureTracking){this.processAdobeOmnitureTracking(container)}if(container.webtrendsTracking){this.processWebtrendsTracking(container)}if(container.eulerianTracking){this.processEulerianTracking(container)}if(container.kameleoonTracking){this.processKameleoonTracking(container)}if(Kameleoon.Gatherer&&("reference"!=variation.id)){Kameleoon.Gatherer.trackAction(variation.id,container.mentalistEnabled?true:false)}if(container.heatMapTracking){if(document.addEventListener){document.addEventListener("mousedown",function(event){Kameleoon.Analyst.processHeatMapClick.apply(Kameleoon.Analyst,[container,event])},true)}}if(container.javaScriptTracking){try{eval(container.javaScriptTracking)}catch(exception){}}container.trackingPerformed=true},processHeatMapClick:function(b,d){if(Kameleoon.Internals.editorMode||d.kameleoonCreated||!d.preventDefault||!document.createEvent){return}var a=d.clientX,e=d.clientY;a=a-(document.documentElement.clientWidth-b.heatMapTracking.pageWidth)*0.5;a=Math.round(a);e+=document.body.scrollTop;var c="//server1.heatmap."+Kameleoon.Internals.DOMAIN+"/_.gif?x="+a+"&y="+e+"&siteCode="+Kameleoon.Internals.siteCode+"&experimentId="+b.id+"&variationId="+b.registeredVariation.id;Kameleoon.Utils.performBeaconServerCall(c)},addCSSStyleSheet:function(d,f){var a=d.builtCssCodeLevel2;var c=f?f:document;var e="kameleoonStyleSheet"+(d.container?("-"+d.container.id):"");if(!a||(f&&f.getElementById(e))){return}var b=c.createElement("style");b.className="KameleoonStyleSheet";b.setAttribute("id",e);b.setAttribute("rel","stylesheet");b.setAttribute("type","text/css");b.setAttribute("media","screen");if(b.styleSheet){b.styleSheet.cssText=a}else{b.appendChild(document.createTextNode(a))}if(f){c.getElementsByTagName("head")[0].appendChild(b,c.getElementsByTagName("head")[0].firstChild)}else{Kameleoon.Internals.headNode.insertBefore(b,Kameleoon.Internals.headNode.firstChild)}if(d.container){d.container.loadedCSSStyleSheet=b}},removeCSSStyleSheet:function(a){if(a.loadedCSSStyleSheet){var b=a.loadedCSSStyleSheet.id.replace("kameleoonStyleSheet-","");if(-1==b.indexOf(",")){Kameleoon.Internals.headNode.removeChild(a.loadedCSSStyleSheet);a.loadedCSSStyleSheet=null}else{a.loadedCSSStyleSheet.id="kameleoonStyleSheet-"+b.replace(new RegExp(a.id+",?"),"")}}},findVariation:function(b){for(var a=0;a<Kameleoon.Internals.configuration.variations.length;++a){if(b==Kameleoon.Internals.configuration.variations[a].id){return Kameleoon.Internals.configuration.variations[a]}}return null},associateContainerAndVariation:function(a,g,f){var d=true;var e=true;if("REGISTERED_VARIATION"==f){e=false}if("VARIATION"==f){d=false}if("none"==g){a.trackingPerformed=true;g="reference";d=false}var c=this.findVariation(g);if(a&&d){a.registeredVariation={id:g}}if(c){var b=Kameleoon.Utils.clone(c);if(a){if(d){a.registeredVariation=b}if(e){a.variation=b}b.container=a;if(a.experimentContainer){b.experiment=a}else{b.personalization=a}}}else{a.variation={id:g}}if(a.variation&&!a.variation.elementSets){this.loadVariationData(a)}},writeExperimentLocalData:function(a){var b=a.registeredVariationId+"/"+a.assignmentTime+"/"+a.counterActive;Kameleoon.Utils.createLocalData("kameleoonExperiment-"+a.id,b,a.cookieDuration?a.cookieDuration:30,a.cookieDomain,null,false)},setupDOMStructure:function(e,h,d,c){var b=null;var g=[];Kameleoon.Internals.pageElementSets=Kameleoon.Internals.pageElementSets.concat(e.elementSets);b=this.performHTMLReplacements(e.elementSets,h,d,e);if(c){editor.services.EngineService.getInstance().refreshCustomizableElements()}for(var f=0,a=b.length;f<a;++f){if(h&&(b[f].options.userPosition&&"RELATIVE"!=b[f].options.userPosition.positionMode)){continue}g.push(b[f])}this.powerElements(g);return g?g.length>0:false},performHTMLReplacements:function(c,e,d,g){var h=null;var f=true;while(f){h=this.obtainElements(c,e,d,g);if(0==h.length){break}h=h.sort(function(k,i){var m=Kameleoon.Utils.obtainDepth(k.element),l=Kameleoon.Utils.obtainDepth(i.element);return m<l?-1:m>l?1:0});h=this.removeDuplicates(h);f=false;for(var b=0,a=h.length;b<a;++b){var j=h[b].options;if(j.htmlContent){f=this.changeHTMLContent(h[b],c,j.htmlContent,false,true)||f}if(j.replaceHtmlContent){f=this.changeHTMLContent(h[b],c,j.replaceHtmlContent,true,true)||f}}}for(var b=0,a=c.length;b<a;++b){if(c[b]&&c[b].removeSelector){c[b]=null}}return h},obtainElements:function(h,u,w,f){var k,v,t=[];if(this.timeOutCallback){window.clearTimeout(this.timeOutCallback)}for(var s=0,p=h.length;s<p;++s){if(null===h[s]){continue}var e=h[s].selector;var d=h[s].options;var c=null,a=document;if(d.context){c=Kameleoon.Utils.querySelectorAll(d.context);if(!c[0]){continue}c=c[0].contentWindow.document;a=c;this.addCSSStyleSheet(f,c)}if(d.scopeURL&&!new RegExp(d.scopeURL).test(window.location.href)){k=[]}else{if(d.customSelector||d.autoGeneratedSelector||d.contentSelector){k=Kameleoon.Utils.querySelectorAll(e,c);if(d.kameleoonClass){for(var q=0,o=k.length;q<o;++q){if(-1==(" "+k[q].className+" ").indexOf(" KameleoonClass"+d.kameleoonClass+" ")){this.saveElementOriginalData(k[q]);k[q].className+=(k[q].className?" ":"")+"KameleoonClass"+d.kameleoonClass}}}if(0==k.length){if(d.kameleoonId){var b=document.getElementById("kameleoonId"+d.kameleoonId);k=b?[b]:[]}if(d.kameleoonClass){k=Kameleoon.Utils.querySelectorAll(".KameleoonClass"+d.kameleoonClass,null)}}if(0==k.length){k=Kameleoon.Utils.querySelectorAll(e,Kameleoon.Internals.virtualRootElement)}}else{switch(e.charAt(0)){case"#":var n=e.substr(1);k=[a.getElementById(e.substr(1))];if(!k[0]){var b=null;if(h[s].element){b=h[s].element}else{if(0==n.indexOf("kameleoonElement")&&a.body){if(d.domOperation){var g=Kameleoon.Utils.querySelectorAll(d.domReference,c)[0];if(g){b=a.createElement("div");Kameleoon.Internals.virtualRootElement.appendChild(b);h[s].element=b}}else{b=a.createElement("div");a.body.appendChild(b)}}}if(b){b.id=n;k=[b]}else{k=[]}}break;default:k=Kameleoon.Utils.querySelectorAll(e,c);break}}}var r=false;v=[];for(var q=0,o=k.length;q<o;++q){if(!k[q].getAttribute("kameleoon")){if(!u||undefined===d.htmlContent||Kameleoon.Utils.checkElementLoaded(k[q])){if(d.userPosition&&d.userPosition.referenceElement&&!Kameleoon.Utils.querySelectorAll(d.userPosition.referenceElement)[0]){continue}if(d.domOperation){var g=Kameleoon.Utils.querySelectorAll(d.domReference,c)[0];this.saveElementOriginalData(k[q]);k[q].kameleoonData.domTargetElement=g;if(u||w){if((!Kameleoon.Utils.checkElementLoaded(k[q])&&0!=d.selector.indexOf("#kameleoonElement"))||!Kameleoon.Utils.checkElementLoaded(k[q].kameleoonData.domTargetElement)){continue}r=true}}v.push({element:k[q],options:Kameleoon.Utils.clone(d)})}}}h[s].removeSelector=r||(w&&0<k.length&&d.autoGeneratedSelector);t=t.concat(v)}return t},powerElements:function(c){for(var b=0,a=c.length;b<a;++b){this.powerElement(c[b].element,c[b].options)}},powerElement:function(d,b){if(Kameleoon.Internals.configuration.specifyElements&&(-1==d.className.indexOf("Kameleoon"))){return}this.saveElementOriginalData(d);d.kameleoonData.powered=true;d.setAttribute("kameleoon","active");if(b.kameleoonId&&!d.id){d.id="kameleoonId"+b.kameleoonId}if(b.kameleoonClass){if(-1==(" "+d.className+" ").indexOf(" KameleoonClass"+b.kameleoonClass+" ")){d.className+=(d.className?" ":"")+"KameleoonClass"+b.kameleoonClass}}if(b.keepSpace){this.reserveSpaceForElement(d)}if(b.domOperation){var a=d.kameleoonData.domTargetElement;if(!a){var c=null;if(b.context){c=Kameleoon.Utils.querySelectorAll(b.context);c=c[0]?c[0].contentWindow.document:null}a=Kameleoon.Utils.querySelectorAll(b.domReference,c)[0]}this.processDomOperation(d,a,b.domOperation)}this.processUserPosition(d,d,b.userPosition,"inline"!=Kameleoon.Utils.obtainComputedStyle(d).display);this.setupNoLinkPropagation(b,d);this.processSpecialCases(d);this.processLinks(d,b.href)},saveElementOriginalData:function(a){if(a.kameleoonData&&a.kameleoonData.originalData){return}if(!a.kameleoonData){a.kameleoonData={}}a.kameleoonData.originalData={};if(a.style.cssText){a.kameleoonData.originalData.style=a.style.cssText}if(a.id){a.kameleoonData.originalData.id=a.id}if(a.className){a.kameleoonData.originalData.className=a.className}if(a.parentNode){a.kameleoonData.originalData.parentNode=a.parentNode}if(a.nextSibling){a.kameleoonData.originalData.nextSibling=a.nextSibling}if(a.href){a.kameleoonData.originalData.href=a.getAttribute("href")}},reserveSpaceForElement:function(a){if(!a.kameleoonData||!a.kameleoonData.originalData){this.saveElementOriginalData(a)}if(!a.kameleoonData.originalData.originalNode){var h=true;for(var e=0,b=a.childNodes.length;e<b;++e){var d=a.childNodes[e];if(d.nodeType==1){h=false}}var g=a.cloneNode(h);var f;if(Kameleoon.Internals.internetExplorer&&!Kameleoon.Internals.modernInternetExplorer){f=a.offsetWidth-1}else{f=a.getBoundingClientRect().width}Kameleoon.Utils.setStyle(g,"width",f+"px",false);if(!h){Kameleoon.Utils.setStyle(g,"height",a.clientHeight+"px",false)}var c=Kameleoon.Utils.obtainComputedStyle(a);Kameleoon.Utils.setStyle(g,"float",c.cssFloat,false);Kameleoon.Utils.setStyle(g,"margin-top",c.marginTop,false);Kameleoon.Utils.setStyle(g,"margin-bottom",c.marginBottom,false);Kameleoon.Utils.setStyle(g,"margin-left",c.marginLeft,false);Kameleoon.Utils.setStyle(g,"margin-right",c.marginRight,false);Kameleoon.Utils.setStyle(g,"overflow",c.overflow,false);Kameleoon.Utils.setStyle(g,"visibility","hidden",false);g.removeAttribute("id");g.removeAttribute("class");a.parentNode.insertBefore(g,a);a.kameleoonData.originalData.originalNode=g;Kameleoon.Utils.setStyle(a,"position","absolute",false)}},removeDuplicates:function(f){var a=[];for(var e=0,b=f.length;e<b;++e){if(undefined==f[e].element.kameleoonUnique){f[e].element.kameleoonUnique=a.length;if(f[e].options.kameleoonClass){f[e].options.kameleoonClass=[f[e].options.kameleoonClass]}a.push(f[e])}else{var c=f[e].element.kameleoonUnique;for(var d in f[e].options){if("kameleoonClass"==d){if(!a[c].options[d]){a[c].options[d]=[]}a[c].options[d].push(f[e].options[d])}else{a[c].options[d]=f[e].options[d]}}}}for(var e=0,b=a.length;e<b;++e){if(undefined!==a[e].element.kameleoonUnique){a[e].element.kameleoonUnique=undefined;a[e].element.removeAttribute("kameleoonUnique")}}return a},setupNoLinkPropagation:function(a,b){if(a.noLinkPropagation){b.setAttribute("kData","nlp")}},changeHTMLContent:function(b,f,c,a,e){var d=b.element;var i=false;var h=("input"==d.nodeName.toLowerCase()&&("button"==d.getAttribute("type")||"submit"==d.getAttribute("type")||"text"==d.getAttribute("type")));var g=h?d.value:d.innerHTML;this.saveElementOriginalData(d);if(undefined===d.kameleoonData.originalData.htmlContent){d.kameleoonData.originalData.htmlContent=g;i=true}if((!e||i)&&g!=c){if(a){b.element=this.replaceHTMLContent(d,f,c,b.options)}else{if(h){d.value=c}else{d.innerHTML=c}}}return i},replaceHTMLContent:function(j,g,e,m){var b=Kameleoon.Utils.checkElementIsInDocument(j,m);if(0==e.indexOf("kameleoonInputImage:")){this.saveElementOriginalData(j);j.kameleoonData.originalData.imgSrc=j.src;j.src=e.replace("kameleoonInputImage:","");return j}var a=document.createElement(b?j.parentNode.nodeName.toLowerCase():"div");a.innerHTML=e;var h=false;while(a.childNodes.length>0){var f=a.childNodes[0];f.kameleoonData=j.kameleoonData;f.kameleoonData.originalData.replacedElement=j;if(!h){h=f;f.id=j.id;if("copyAttributes"==h.getAttribute("kameleoon")){for(var d=0,c=j.attributes.length;d<c;++d){if("src"!=j.attributes[d].name){h.setAttribute(j.attributes[d].name,j.attributes[d].value)}}h.removeAttribute("kameleoon")}var k=j.className.match(/(KameleoonClass[^\s]*)/);if(k){f.className+=(f.className?" ":"")+k[1]}if(m.kameleoonId){f.id="kameleoonId"+m.kameleoonId}if(m.kameleoonClass&&-1==(" "+f.className+" ").indexOf(" KameleoonClass"+m.kameleoonClass+" ")){f.className+=(f.className?" ":"")+"KameleoonClass"+m.kameleoonClass}if((f.id||f.className)&&3==f.nodeType){return false}}if(b){j.parentNode.insertBefore(f,j)}if(b!==true){for(var d=0,c=g.length;d<c;++d){if(j==g[d].element){g[d].element=f}}}if(b===false){j=f;f.parentNode.removeChild(f)}}if(b){j.parentNode.removeChild(j)}return h},processUserPosition:function(b,e,a,d){if(a){switch(a.positionMode){case"ABSOLUTE_KEEP_SPACE":case"ABSOLUTE":if(d){var h=("ABSOLUTE_KEEP_SPACE"==a.positionMode)?b.kameleoonData.originalData.originalNode.offsetWidth:b.offsetWidth;if(h){Kameleoon.Utils.setStyle(e,"width",h+"px",("th"!=e.nodeName.toLowerCase()&&"td"!=e.nodeName.toLowerCase()))}}var g=null;var c=false;if(a.referenceElement){g=Kameleoon.Utils.querySelectorAll(a.referenceElement)[0];c=true}if(!g){g=document.body}if(g&&e.parentNode!=g){e.parentNode.removeChild(e);g.appendChild(e);if(!e.kameleoonData){e.kameleoonData={}}e.kameleoonData.moved=true}Kameleoon.Utils.setStyle(e,"position","absolute",false);var f=Kameleoon.Utils.obtainComputedStyle(e).left.replace("px","")/a.referenceWidth;Kameleoon.Utils.setStyle(e,"left",Math.round(f*g.offsetWidth)+"px",true);if(c){this.addRelativePositionToReferenceElement(g)}break;case"RELATIVE":Kameleoon.Utils.setStyle(e,"position","",false)}Kameleoon.Utils.setStyle(e,"top","",false);Kameleoon.Utils.setStyle(e,"left","",false);Kameleoon.Utils.setStyle(e,"right","",false);Kameleoon.Utils.setStyle(e,"bottom","",false);if(!d){Kameleoon.Utils.setStyle(e,"width","",false)}Kameleoon.Utils.setStyle(e,"height","",false)}},processDomOperation:function(d,c,a){if(!c){return}var g=d.parentNode;var b=c.parentNode;var f=d.nextSibling;while(b){if(b==d){return}b=b.parentNode}b=c.parentNode;try{if(g){g.removeChild(d)}switch(a){case"SWAP":this.saveElementOriginalData(c);b.insertBefore(d,c);b.removeChild(c);if(f){try{g.insertBefore(c,f)}catch(e){g=d.parentNode;f=d.nextSibling;g.insertBefore(c,f)}}else{g.appendChild(c)}if("left"==Kameleoon.Utils.obtainComputedStyle(d)["float"]&&"right"==Kameleoon.Utils.obtainComputedStyle(c)["float"]){d.style["float"]="right";c.style["float"]="left"}else{if("right"==Kameleoon.Utils.obtainComputedStyle(d)["float"]&&"left"==Kameleoon.Utils.obtainComputedStyle(c)["float"]){d.style["float"]="left";c.style["float"]="right"}}d.kameleoonData.swapTargetElement=c;break;case"INSERT_BEFORE":b.insertBefore(d,c);break;case"INSERT_AFTER":if(c.nextSibling){b.insertBefore(d,c.nextSibling)}else{b.appendChild(d)}break;case"INSERT_AS_CHILD":if(0==c.childNodes.length){c.appendChild(d)}else{c.insertBefore(d,c.firstChild)}break}}catch(e){}},addRelativePositionToReferenceElement:function(a){if("absolute"!=Kameleoon.Utils.obtainComputedStyle(a).position&&document.body!=a){Kameleoon.Utils.setStyle(a,"position","relative",false)}},processSpecialCases:function(a){if("body"==a.nodeName.toLowerCase()&&-1!=Kameleoon.Utils.obtainComputedStyle(a).background.indexOf("linear-gradient")){a.style.backgroundRepeat="no-repeat";if(window.innerHeight-document.documentElement.scrollHeight>0){a.style.backgroundAttachment="fixed"}}},processLinks:function(b,a){if("a"==b.nodeName.toLowerCase()&&a){b.href=a}},processLinkPropagation:function(e,d){var b=e.childNodes;for(var a=0;a<b.length;++a){if(b[a].getAttribute&&"nlp"!=b[a].getAttribute("kData")){if("a"==b[a].nodeName.toLowerCase()){var c=b[a].style.cssText;b[a].style.cssText=(c?(c+";"):"")+d}this.processLinkPropagation(b[a],d)}}},refreshForScreenResize:function(){for(var a=Kameleoon.poweredNodes.length,b=a-1;b>=0;--b){this.processUserPosition(Kameleoon.poweredNodes[b].originalElement,Kameleoon.poweredNodes[b].baseElement,data?data.userPosition:null,true)}}};Kameleoon.Utils={JSONParse:function(string){return(((typeof JSON!="undefined")&&JSON.parse)?JSON.parse(string):eval("("+string+")"))},JSONStringify:function(a){var b=null;if((typeof JSON!="undefined"&&JSON.stringify)&&("[]"===JSON.stringify([])||!a.toJSON)){if("[]"!==JSON.stringify([])){delete (Array.prototype.toJSON)}b=JSON.stringify(a)}else{if(a.toJSON&&"[]"===[].toJSON()){b=a.toJSON()}else{if((typeof JSON!="undefined"&&JSON.encode)&&"[]"===JSON.encode([])){b=JSON.encode(a)}}}return b},performBeaconServerCall:function(c,b,a){var d=new XMLHttpRequest();if(d.withCredentials!==undefined||!XDomainRequest){d.open("GET",c,true);if(b){d.onreadystatechange=b}if(a){d.onerror=a}d.send()}else{d=new XDomainRequest();d.open("get",c);d.send()}},runProtectedFunction:function(b){try{b()}catch(a){if(typeof console!=="undefined"&&console.log){console.log("An error occurred in one of your Kameleoon custom JavaScript functions, please check your code.");console.log(a,a.message)}Kameleoon.API.processPageLoaded()}},parseBrowserVersion:function(){var d=navigator.userAgent;var e=navigator.appName;var f=""+parseFloat(navigator.appVersion);var a=parseInt(navigator.appVersion,10);var c,b;if((c=d.indexOf("Opera"))!=-1){e="Opera";f=d.substring(c+6);if((c=d.indexOf("Version"))!=-1){f=d.substring(c+8)}}else{if((c=d.indexOf("MSIE"))!=-1){e="IE";f=d.substring(c+5)}else{if((c=d.indexOf("Chrome"))!=-1){e="CHROME";f=d.substring(c+7)}else{if((c=d.indexOf("Safari"))!=-1){e="SAFARI";f=d.substring(c+7);if((c=d.indexOf("Version"))!=-1){f=d.substring(c+8)}}else{if((c=d.indexOf("Firefox"))!=-1){e="FIREFOX";f=d.substring(c+8)}else{e="OTHER"}}}}}if((b=f.indexOf(";"))!=-1){f=f.substring(0,b)}if((b=f.indexOf(" "))!=-1){f=f.substring(0,b)}a=parseInt(""+f,10);if(isNaN(a)){f=""+parseFloat(navigator.appVersion);a=parseInt(navigator.appVersion,10)}return{name:e,version:a}},obtainComputedStyle:function(a){if(window.getComputedStyle){var b=getComputedStyle(a,"");return b?b:{backgroundImage:"none"}}else{return a.currentStyle}},setStyle:function(c,f,e,b){Kameleoon.Analyst.saveElementOriginalData(c);var g=c.style.cssText;if(g){g=g.replace(/^\s+|\s+$/g,"");var a=new RegExp("(^|;)(\\s*"+f+"(.*?);)");g=g.replace(a,"$1");if(g){if(g.lastIndexOf(";")<(g.length-2)){g=g+";"}if(g.lastIndexOf(" ")!=(g.length-1)&&e){g=g+" "}}}else{g=""}var d=g+(e?(f+": "+e+(b?" !important;":";")):"");c.style.cssText=d},processMessageEvent:function(d){if(typeof d.data!=="string"){return}if("obtainTagCommanderVariableNames"==d.data){var b=[];if(window.tc_vars){for(var a in window.tc_vars){b.push(a)}}d.source.postMessage("tagCommanderVariableNames"+Kameleoon.Utils.JSONStringify(b),d.origin);return}if("checkKameleoonScriptPresent"==d.data){d.source.postMessage("kameleoonScriptPresent"+Kameleoon.Internals.siteCode,d.origin);return}if(d.data.indexOf("addKameleoonInterest")!=-1||d.data.indexOf("finishKameleoonInterestCheck")!=-1){var c=Kameleoon.Utils.JSONParse(d.data);if("addKameleoonInterest"==c.command){Kameleoon.Internals.activeInterests.push(c.index)}--Kameleoon.Internals.currentInterestCheck;if(0==Kameleoon.Internals.currentInterestCheck){if(Kameleoon.Gatherer){window.setTimeout(Kameleoon.Gatherer.finishInterestProcessing,300)}}return}if(Kameleoon.Internals.configuration.useWideDomainSupport&&(Kameleoon.Internals.postMessageOrigin==d.origin||Kameleoon.Internals.postMessageOriginIFrameIntegration==d.origin)){var c=Kameleoon.Utils.JSONParse(d.data);if(c.callbackId){var e=Kameleoon.Internals.postMessageCallbacks[c.callbackId];delete (Kameleoon.Internals.postMessageCallbacks[c.callbackId]);if(e){e(c.data)}}}},addPostMessageCallback:function(b){var a=Math.random().toString();Kameleoon.Internals.postMessageCallbacks[a]=b;return a},encodeString:function(d){var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var a="";var l,j,g,k,h,f,e;var c=0;d=this.encodeUTF8(d);while(c<d.length){l=d.charCodeAt(c++);j=d.charCodeAt(c++);g=d.charCodeAt(c++);k=l>>2;h=((l&3)<<4)|(j>>4);f=((j&15)<<2)|(g>>6);e=g&63;if(isNaN(j)){f=e=64}else{if(isNaN(g)){e=64}}a=a+b.charAt(k)+b.charAt(h)+b.charAt(f)+b.charAt(e)}return a},decodeString:function(d){var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var a="";var l,j,g;var k,h,f,e;var c=0;d=d.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(c<d.length){k=b.indexOf(d.charAt(c++));h=b.indexOf(d.charAt(c++));f=b.indexOf(d.charAt(c++));e=b.indexOf(d.charAt(c++));l=(k<<2)|(h>>4);j=((h&15)<<4)|(f>>2);g=((f&3)<<6)|e;a=a+String.fromCharCode(l);if(f!=64){a=a+String.fromCharCode(j)}if(e!=64){a=a+String.fromCharCode(g)}}a=this.decodeUTF8(a);return a},encodeUTF8:function(b){b=b.replace(/\r\n/g,"\n");var a="";for(var e=0;e<b.length;e++){var d=b.charCodeAt(e);if(d<128){a+=String.fromCharCode(d)}else{if((d>127)&&(d<2048)){a+=String.fromCharCode((d>>6)|192);a+=String.fromCharCode((d&63)|128)}else{a+=String.fromCharCode((d>>12)|224);a+=String.fromCharCode(((d>>6)&63)|128);a+=String.fromCharCode((d&63)|128)}}}return a},decodeUTF8:function(a){var b="";var d=0;var e=c1=c2=0;while(d<a.length){e=a.charCodeAt(d);if(e<128){b+=String.fromCharCode(e);d++}else{if((e>191)&&(e<224)){c2=a.charCodeAt(d+1);b+=String.fromCharCode(((e&31)<<6)|(c2&63));d+=2}else{c2=a.charCodeAt(d+1);c3=a.charCodeAt(d+2);b+=String.fromCharCode(((e&15)<<12)|((c2&63)<<6)|(c3&63));d+=3}}}return b},restoreStoredData:function(e){if(Kameleoon.Internals.configuration.useWideDomainSupport){var b=function(f){var h=f?Kameleoon.Utils.decodeString(f):"{}";var g=h?Kameleoon.Utils.JSONParse(h):{};Kameleoon.Internals.storedData=g;e()};Kameleoon.Internals.externalIframe.contentWindow.postMessage(Kameleoon.Utils.JSONStringify({type:"get",key:"kameleoonData",callbackId:Kameleoon.Utils.addPostMessageCallback(b)}),"*")}else{var a=this.readLocalData("kameleoonData","LS",true);var d=a?Kameleoon.Utils.decodeString(a):"{}";var c=d?Kameleoon.Utils.JSONParse(d):{};Kameleoon.Internals.storedData=c;e()}},saveStoredData:function(d){var b=Kameleoon.Internals.storedData;var c=b?this.JSONStringify(b):this.JSONStringify({});var a=c?this.encodeString(c):this.encodeString("{}");this.createLocalData("kameleoonData",a,1000,null,"LS",true,d)},createLocalData:function(a,g,h,e,c,b,i){var j=("LS"==c)?true:(("COOKIE"==c)?false:Kameleoon.Internals.configuration.useLocalStorage);if(j){var f={value:g,date:Kameleoon.Internals.currentTime+(h*24*60*60*1000)};if(Kameleoon.Internals.configuration.useWideDomainSupport){Kameleoon.Internals.externalIframe.contentWindow.postMessage(Kameleoon.Utils.JSONStringify({type:"set",key:a,data:f,callbackId:Kameleoon.Utils.addPostMessageCallback(i)}),"*")}else{localStorage.setItem(a,this.JSONStringify(f));if(i){i()}}return}var k;if(h){var d=new Date();d.setTime(d.getTime()+(h*24*60*60*1000));k="; expires="+d.toGMTString()}else{k=""}if("CURRENT_HOST"!=e){if(!e){e=this.obtainCurrentRootDomain()}k+="; domain="+e}document.cookie=a+"="+(b?this.JSONStringify(g):g)+k+"; path=/"},readLocalData:function(a,d,b){var m=("LS"==d)?true:(("COOKIE"==d)?false:Kameleoon.Internals.configuration.useLocalStorage);if(m){var h=localStorage?localStorage.getItem(a):null;if(!h){return null}try{h=this.JSONParse(h)}catch(e){var j=h;h={};h.value=j;h.date=Kameleoon.Internals.currentTime+1000000}if(Kameleoon.Internals.currentTime>h.date){localStorage.removeItem(a);return null}return h.value}var l=a+"=";var f=document.cookie.split(";");for(var g=0;g<f.length;++g){var k=f[g];while(" "==k.charAt(0)){k=k.substring(1,k.length)}if(0==k.indexOf(l)){var n=k.substring(l.length,k.length);if(b){n=this.JSONParse(n)}return n}}return null},eraseLocalData:function(a,b,d){var c=("LS"==d)?true:(("COOKIE"==d)?false:Kameleoon.Internals.configuration.useLocalStorage);if(c){if(Kameleoon.Internals.configuration.useWideDomainSupport){Kameleoon.Internals.externalIframe.contentWindow.postMessage(Kameleoon.Utils.JSONStringify({type:"remove",key:a,callbackId:Kameleoon.Utils.addPostMessageCallback(null)}),"*")}else{localStorage.removeItem(a)}}else{this.createLocalData(a,"",-1,b,d,false)}},obtainCurrentRootDomain:function(){if(Kameleoon.Internals.currentRootDomain==null){var d=window.location.hostname.split(".");var c="";for(var b=0,a=d.length;b<a;b++){if(b>0){c="."+c}c=d[a-b-1]+c;this.createLocalData("kameleoonTestCookie","test",1,c,"COOKIE",false,undefined);if(this.readLocalData("kameleoonTestCookie","COOKIE",false)){this.eraseLocalData("kameleoonTestCookie",c,"COOKIE");Kameleoon.Internals.currentRootDomain=c;break}}}return Kameleoon.Internals.currentRootDomain},obtainRandomString:function(e){var b="0123456789abcdefghijklmnopqrstuvwxyz";var a="";for(var c=0;c<e;++c){var d=Math.floor(Math.random()*b.length);a+=b.substring(d,d+1)}return a},parseParameters:function(){var e={};var a=window.location.search.substring(1);if(a){a=a.split("&");for(var d=0,b=a.length;d<b;++d){var f=a[d].split("=");try{e[decodeURIComponent(f[0])]=f[1]?decodeURIComponent(f[1]):null}catch(c){e[unescape(f[0])]=f[1]?unescape(f[1]):null}}}a=window.location.hash.substring(1);if(Kameleoon.Internals.firefox){a=window.location.toString().substring(window.location.toString().indexOf("#")+1)}if(a){a=a.split("&");for(var d=0,b=a.length;d<b;++d){var f=a[d].split("=");try{e[decodeURIComponent(f[0])]=f[1]?decodeURIComponent(f[1]):null}catch(c){e[unescape(f[0])]=f[1]?unescape(f[1]):null}}}return e},addParameterToURL:function(a,d,c){if(c){return(a+((-1==a.indexOf("#"))?"#":"&")+d)}var b="";if(-1!=a.indexOf("#")){b=a.substr(a.indexOf("#"));a=a.substr(0,a.indexOf("#"))}a+=((-1==a.indexOf("?"))?"?":"&")+d+b;return a},removeBlockingStyleSheet:function(){var a=document.getElementById("kameleoonPageLoading");if(a&&a.parentNode){a.parentNode.removeChild(a)}},domReady:function(b){if("complete"==document.readyState||"loaded"==document.readyState||("interactive"==document.readyState&&!Kameleoon.Internals.internetExplorer)){return b()}if(!Kameleoon.Internals.internetExplorer&&document.addEventListener){return document.addEventListener("DOMContentLoaded",b,false)}var a=false;var c=function(){if(!a){a=true;b()}};(function(){try{document.documentElement.doScroll("left");c()}catch(d){setTimeout(arguments.callee,50)}})()},obtainDepth:function(b){var a=0;while(!(b.parentNode===null)){++a;b=b.parentNode}return a},collectionToArray:function(d){var a=[];for(var c=0,b=d.length;c<b;++c){a.push(d[c])}return a},getLocale:function(b){var a=null;if(navigator){if(navigator.language){a=navigator.language}else{if(navigator.browserLanguage){a=navigator.browserLanguage}else{if(navigator.systemLanguage){a=navigator.systemLanguage}else{if(navigator.userLanguage){a=navigator.userLanguage}}}}}if("fr-FR"==a){a="fr"}if("en-US"==a){a="en"}if(b&&(!a||"fr"!=a)){a="en"}return a},callJavaScriptCode:function(b){var a=document.createElement("script");a.type="text/javascript";if(Kameleoon.Internals.oldInternetExplorer){var c=document.createElement("div");c.appendChild(a);a.text=b}else{Kameleoon.Internals.headNode.appendChild(a);if(Kameleoon.Internals.internetExplorer){a.text=b}else{a.appendChild(document.createTextNode(b))}}},checkElementLoaded:function(a){if(!a||!a.parentNode){return false}return((a.nextSibling)?true:this.checkElementLoaded(a.parentNode))},checkElementIsInDocument:function(c,a){var b=null,d=document;if(a.context){b=Kameleoon.Utils.querySelectorAll(a.context);if(b[0]){d=b[0].contentWindow.document}}while(c&&c!=d.documentElement&&c!=Kameleoon.Internals.virtualRootElement){if(c.parentNode){c=c.parentNode}else{return false}}return(c==d.documentElement)?true:"VIRTUAL"},clone:function(a){return this.JSONParse(this.JSONStringify(a))},querySelectorAll:function(b,a){if(a==null){a=document}if(Kameleoon.Internals.configuration.sizzle){return Sizzle(b,a)}var f=a.querySelectorAll(b);var d=[];for(var e=0,c=f.length;e<c;++e){d.push(f[e])}return d}};Kameleoon.Loader={enableKameleoonEditorListener:function(){if(!this.editorListenerEnabled){this.editorListenerEnabled=true;var a=function(b){Kameleoon.Loader.listenKeys.call(Kameleoon.Loader,b)};if(document.addEventListener){document.addEventListener("keyup",a,false)}else{document.attachEvent("onkeyup",a)}}},listenKeys:function(a){if(a.shiftKey){if(113==a.keyCode){Kameleoon.Internals.editorMode=true;Kameleoon.Analyst.loadKameleoonFull(function(){Kameleoon.Loader.enableKameleoonEditor.apply(Kameleoon.Loader)})}if(115==a.keyCode&&(Kameleoon.Internals.simulationMode||Kameleoon.Internals.parameters.kameleoonVariationSelection)){Kameleoon.Analyst.loadKameleoonFull(function(){Kameleoon.Loader.displayVariationSelectionPopup.apply(Kameleoon.Loader)})}}}};Kameleoon.Analyst.processGoogleAnalyticsTracking=function(b){window._gaq=window._gaq||[];var c=(undefined!=window._gaq._createAsyncTracker);if(!c&&b.googleAnalyticsTracking.eventCallDelayed){window.setTimeout(function(){Kameleoon.Analyst.processGoogleAnalyticsTracking.apply(Kameleoon.Analyst,[b])},150);return}var a=this.obtainGoogleAnalyticsTracker(b,c);if(!c){window._gaq.push=this.gaqPush}if(b.googleAnalyticsTracking.customVariable&&b.googleAnalyticsTracking.customVariable<51){var e=[a+"_setCustomVar",b.googleAnalyticsTracking.customVariable,b.name,this.obtainTruncatedVariationName(b.registeredVariation.name,80,b.multiVariateTest),2];window._gaq.push(e,true)}if(b.googleAnalyticsTracking.pageViewTracking){var d=b.name.replace(/\//gi,"-");window._gaq.push([a+"_trackPageview","/Kameleoon/"+d+"/"+encodeURIComponent(b.registeredVariation.name)],true)}else{if(c||b.googleAnalyticsTracking.eventTracking){var e=[a+"_trackEvent","Kameleoon",b.name,b.registeredVariation.name,undefined,true];window._gaq.push(e,true)}}};Kameleoon.Analyst.obtainTruncatedVariationName=function(c,b,a){if(c.length<=b){return c}return a?(c.substring(c.length-b,c.length)+"..."):"..."+(c.substring(0,b))};Kameleoon.Analyst.obtainGoogleAnalyticsTracker=function(b,c){var a=b?(b.googleAnalyticsTracking.tracker?(b.googleAnalyticsTracking.tracker+"."):""):(Kameleoon.Internals.configuration.googleAnalyticsTracker?(Kameleoon.Internals.configuration.googleAnalyticsTracker+"."):"");if(window.google_tag_manager&&(a=="")){if(c&&window._gat&&window._gat._getTrackers().length>0){a=window._gat._getTrackers()[0]._getName()+"."}else{for(var d=0;d<window._gaq.length;++d){if(window._gaq[d][0]&&0==window._gaq[d][0].indexOf("gtm")){a=window._gaq[d][0].substring(0,window._gaq[d][0].indexOf(".")+1);break}}}}return a};Kameleoon.Analyst.gaqPush=function(e,b){Kameleoon.Internals.gaFreezingCommandIndex=window._gaq.length;for(var c=0,a=window._gaq.length;c<a;++c){var d=window._gaq[c];if(d[0]&&(-1!=d[0].indexOf("_trackPageview")||-1!=d[0].indexOf("_trackEvent")||-1!=d[0].indexOf("_setCustomVar"))){Kameleoon.Internals.gaFreezingCommandIndex=c;break}}if(!e[0]||(-1!=e[0].indexOf("_trackPageview")||-1!=e[0].indexOf("_trackEvent")||(-1!=e[0].indexOf("_setCustomVar")&&!b)||Kameleoon.Internals.firstExternalFreezingCommand)){window._gaq.splice(window._gaq.length,0,e);if(!b&&e[0]){Kameleoon.Internals.firstExternalFreezingCommand=true}}else{window._gaq.splice(Kameleoon.Internals.gaFreezingCommandIndex,0,e)}};Kameleoon.Analyst.processKameleoonTracking=function(a){if(Kameleoon.Gatherer){if("reference"==a.registeredVariation.id){Kameleoon.Gatherer.trackData([a.experimentContainer?"experimentId":"personalizationId","mentalistDecision"],[a.id,a.mentalistEnabled?true:false])}else{Kameleoon.Gatherer.trackData([a.experimentContainer?"experimentId":"personalizationId","variationId","mentalistDecision"],[a.id,a.experimentContainer?a.registeredVariation.id:1,a.mentalistEnabled?true:false])}}};!function(a,b){this[a]=b()}("bowser",function(){var b=true;function a(e){function i(p){var o=e.match(p);return(o&&o.length>1&&o[1])||""}var m=i(/(ipod|iphone|ipad)/i).toLowerCase(),l=/like android/i.test(e),g=!l&&/android/i.test(e),d=i(/version\/(\d+(\.\d+)?)/i),k=/tablet/i.test(e),f=!k&&/[^-]mobi/i.test(e),n;if(/opera|opr/i.test(e)){n={name:"Opera",opera:b,version:d||i(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}}else{if(/windows phone/i.test(e)){n={name:"Windows Phone",windowsphone:b,msie:b,version:i(/iemobile\/(\d+(\.\d+)?)/i)}}else{if(/msie|trident/i.test(e)){n={name:"Internet Explorer",msie:b,version:i(/(?:msie |rv:)(\d+(\.\d+)?)/i)}}else{if(/chrome|crios|crmo/i.test(e)){n={name:"Chrome",chrome:b,version:i(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}}else{if(/sailfish/i.test(e)){n={name:"Sailfish",sailfish:b,version:i(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}}else{if(/seamonkey\//i.test(e)){n={name:"SeaMonkey",seamonkey:b,version:i(/seamonkey\/(\d+(\.\d+)?)/i)}}else{if(/firefox|iceweasel/i.test(e)){n={name:"Firefox",firefox:b,version:i(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)};if(/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)){n.firefoxos=b}}else{if(/silk/i.test(e)){n={name:"Amazon Silk",silk:b,version:i(/silk\/(\d+(\.\d+)?)/i)}}else{if(g){n={name:"Android",version:d}}else{if(/phantom/i.test(e)){n={name:"PhantomJS",phantom:b,version:i(/phantomjs\/(\d+(\.\d+)?)/i)}}else{if(/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)){n={name:"BlackBerry",blackberry:b,version:d||i(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}}else{if(/(web|hpw)os/i.test(e)){n={name:"WebOS",webos:b,version:d||i(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)};/touchpad\//i.test(e)&&(n.touchpad=b)}else{if(/bada/i.test(e)){n={name:"Bada",bada:b,version:i(/dolfin\/(\d+(\.\d+)?)/i)}}else{if(/tizen/i.test(e)){n={name:"Tizen",tizen:b,version:i(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||d}}else{if(/safari/i.test(e)){n={name:"Safari",safari:b,version:d}}else{n={}}}}}}}}}}}}}}}}if(/(apple)?webkit/i.test(e)){n.name=n.name||"Webkit";n.webkit=b;if(!n.version&&d){n.version=d}}else{if(!n.opera&&/gecko\//i.test(e)){n.name=n.name||"Gecko";n.gecko=b;n.version=n.version||i(/gecko\/(\d+(\.\d+)?)/i)}}if(g||n.silk){n.android=b}else{if(m){n[m]=b;n.ios=b}}var h="";if(m){h=i(/os (\d+([_\s]\d+)*) like mac os x/i);h=h.replace(/[_\s]/g,".")}else{if(g){h=i(/android[ \/-](\d+(\.\d+)*)/i)}else{if(n.windowsphone){h=i(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i)}else{if(n.webos){h=i(/(?:web|hpw)os\/(\d+(\.\d+)*)/i)}else{if(n.blackberry){h=i(/rim\stablet\sos\s(\d+(\.\d+)*)/i)}else{if(n.bada){h=i(/bada\/(\d+(\.\d+)*)/i)}else{if(n.tizen){h=i(/tizen[\/\s](\d+(\.\d+)*)/i)}}}}}}}if(h){n.osversion=h}var j=h.split(".")[0];if(k||m=="ipad"||(g&&(j==3||(j==4&&!f)))||n.silk){n.tablet=b}else{if(f||m=="iphone"||m=="ipod"||g||n.blackberry||n.webos||n.bada){n.mobile=b}}if((n.msie&&n.version>=10)||(n.chrome&&n.version>=20)||(n.firefox&&n.version>=20)||(n.safari&&n.version>=6)||(n.opera&&n.version>=10)||(n.ios&&n.osversion&&n.osversion.split(".")[0]>=6)){n.a=b}else{if((n.msie&&n.version<10)||(n.chrome&&n.version<20)||(n.firefox&&n.version<20)||(n.safari&&n.version<6)||(n.opera&&n.version<10)||(n.ios&&n.osversion&&n.osversion.split(".")[0]<6)){n.c=b}else{n.x=b}}if(e.indexOf("Win")!=-1){n.windows=true}if(e.indexOf("Mac")!=-1){n.mac=true}if(e.indexOf("Linux")!=-1){n.linux=true}return n}var c=a(typeof navigator!=="undefined"?navigator.userAgent:"");c._detect=a;return c});/* jstz.min.js Version: 1.0.5 Build date: 2014-10-28 */
!function(e){var a=function(){"use strict";var e="s",s={DAY:864e5,HOUR:36e5,MINUTE:6e4,SECOND:1e3,BASELINE_YEAR:2014,MAX_SCORE:864e6,AMBIGUITIES:{"America/Denver":["America/Mazatlan"],"America/Chicago":["America/Mexico_City"],"America/Santiago":["America/Asuncion","America/Campo_Grande"],"America/Montevideo":["America/Sao_Paulo"],"Asia/Beirut":["Asia/Amman","Asia/Jerusalem","Europe/Helsinki","Asia/Damascus","Africa/Cairo","Asia/Gaza","Europe/Minsk"],"Pacific/Auckland":["Pacific/Fiji"],"America/Los_Angeles":["America/Santa_Isabel"],"America/New_York":["America/Havana"],"America/Halifax":["America/Goose_Bay"],"America/Godthab":["America/Miquelon"],"Asia/Dubai":["Asia/Yerevan"],"Asia/Jakarta":["Asia/Krasnoyarsk"],"Asia/Shanghai":["Asia/Irkutsk","Australia/Perth"],"Australia/Sydney":["Australia/Lord_Howe"],"Asia/Tokyo":["Asia/Yakutsk"],"Asia/Dhaka":["Asia/Omsk"],"Asia/Baku":["Asia/Yerevan"],"Australia/Brisbane":["Asia/Vladivostok"],"Pacific/Noumea":["Asia/Vladivostok"],"Pacific/Majuro":["Asia/Kamchatka","Pacific/Fiji"],"Pacific/Tongatapu":["Pacific/Apia"],"Asia/Baghdad":["Europe/Minsk","Europe/Moscow"],"Asia/Karachi":["Asia/Yekaterinburg"],"Africa/Johannesburg":["Asia/Gaza","Africa/Cairo"]}},i=function(e){var a=-e.getTimezoneOffset();return null!==a?a:0},r=function(){var a=i(new Date(s.BASELINE_YEAR,0,2)),r=i(new Date(s.BASELINE_YEAR,5,2)),n=a-r;return 0>n?a+",1":n>0?r+",1,"+e:a+",0"},n=function(){if("undefined"!=typeof Intl&&"undefined"!=typeof Intl.DateTimeFormat){var e=Intl.DateTimeFormat();if("undefined"!=typeof e&&"undefined"!=typeof e.resolvedOptions)return e.resolvedOptions().timeZone}},o=function(e){for(var a=new Date(e,0,1,0,0,1,0).getTime(),s=new Date(e,12,31,23,59,59).getTime(),i=a,r=new Date(i).getTimezoneOffset(),n=null,o=null;s-864e5>i;){var A=new Date(i),u=A.getTimezoneOffset();u!==r&&(r>u&&(n=A),u>r&&(o=A),r=u),i+=864e5}return n&&o?{s:t(n).getTime(),e:t(o).getTime()}:!1},t=function l(e,a,i){"undefined"==typeof a&&(a=s.DAY,i=s.HOUR);for(var r=new Date(e.getTime()-a).getTime(),n=e.getTime()+a,o=new Date(r).getTimezoneOffset(),t=r,A=null;n-i>t;){var u=new Date(t),c=u.getTimezoneOffset();if(c!==o){A=u;break}t+=i}return a===s.DAY?l(A,s.HOUR,s.MINUTE):a===s.HOUR?l(A,s.MINUTE,s.SECOND):A},A=function(e,a,s,i){if("N/A"!==s)return s;if("Asia/Beirut"===a){if("Africa/Cairo"===i.name&&13983768e5===e[6].s&&14116788e5===e[6].e)return 0;if("Asia/Jerusalem"===i.name&&13959648e5===e[6].s&&14118588e5===e[6].e)return 0}else if("America/Santiago"===a){if("America/Asuncion"===i.name&&14124816e5===e[6].s&&1397358e6===e[6].e)return 0;if("America/Campo_Grande"===i.name&&14136912e5===e[6].s&&13925196e5===e[6].e)return 0}else if("America/Montevideo"===a){if("America/Sao_Paulo"===i.name&&14136876e5===e[6].s&&1392516e6===e[6].e)return 0}else if("Pacific/Auckland"===a&&"Pacific/Fiji"===i.name&&14142456e5===e[6].s&&13961016e5===e[6].e)return 0;return s},u=function(e,i){for(var r=function(a){for(var r=0,n=0;n<e.length;n++)if(a.rules[n]&&e[n]){if(!(e[n].s>=a.rules[n].s&&e[n].e<=a.rules[n].e)){r="N/A";break}if(r=0,r+=Math.abs(e[n].s-a.rules[n].s),r+=Math.abs(a.rules[n].e-e[n].e),r>s.MAX_SCORE){r="N/A";break}}return r=A(e,i,r,a)},n={},o=a.olson.dst_rules.zones,t=o.length,u=s.AMBIGUITIES[i],c=0;t>c;c++){var m=o[c],l=r(o[c]);"N/A"!==l&&(n[m.name]=l)}for(var f in n)if(n.hasOwnProperty(f)&&-1!=u.indexOf(f))return f;return i},c=function(e){var s=function(){for(var e=[],s=0;s<a.olson.dst_rules.years.length;s++){var i=o(a.olson.dst_rules.years[s]);e.push(i)}return e},i=function(e){for(var a=0;a<e.length;a++)if(e[a]!==!1)return!0;return!1},r=s(),n=i(r);return n?u(r,e):e},m=function(){var e=n();return e||(e=a.olson.timezones[r()],"undefined"!=typeof s.AMBIGUITIES[e]&&(e=c(e))),{name:function(){return e}}};return{determine:m}}();a.olson=a.olson||{},a.olson.timezones={"-720,0":"Etc/GMT+12","-660,0":"Pacific/Pago_Pago","-660,1,s":"Pacific/Apia","-600,1":"America/Adak","-600,0":"Pacific/Honolulu","-570,0":"Pacific/Marquesas","-540,0":"Pacific/Gambier","-540,1":"America/Anchorage","-480,1":"America/Los_Angeles","-480,0":"Pacific/Pitcairn","-420,0":"America/Phoenix","-420,1":"America/Denver","-360,0":"America/Guatemala","-360,1":"America/Chicago","-360,1,s":"Pacific/Easter","-300,0":"America/Bogota","-300,1":"America/New_York","-270,0":"America/Caracas","-240,1":"America/Halifax","-240,0":"America/Santo_Domingo","-240,1,s":"America/Santiago","-210,1":"America/St_Johns","-180,1":"America/Godthab","-180,0":"America/Argentina/Buenos_Aires","-180,1,s":"America/Montevideo","-120,0":"America/Noronha","-120,1":"America/Noronha","-60,1":"Atlantic/Azores","-60,0":"Atlantic/Cape_Verde","0,0":"UTC","0,1":"Europe/London","60,1":"Europe/Berlin","60,0":"Africa/Lagos","60,1,s":"Africa/Windhoek","120,1":"Asia/Beirut","120,0":"Africa/Johannesburg","180,0":"Asia/Baghdad","180,1":"Europe/Moscow","210,1":"Asia/Tehran","240,0":"Asia/Dubai","240,1":"Asia/Baku","270,0":"Asia/Kabul","300,1":"Asia/Yekaterinburg","300,0":"Asia/Karachi","330,0":"Asia/Kolkata","345,0":"Asia/Kathmandu","360,0":"Asia/Dhaka","360,1":"Asia/Omsk","390,0":"Asia/Rangoon","420,1":"Asia/Krasnoyarsk","420,0":"Asia/Jakarta","480,0":"Asia/Shanghai","480,1":"Asia/Irkutsk","525,0":"Australia/Eucla","525,1,s":"Australia/Eucla","540,1":"Asia/Yakutsk","540,0":"Asia/Tokyo","570,0":"Australia/Darwin","570,1,s":"Australia/Adelaide","600,0":"Australia/Brisbane","600,1":"Asia/Vladivostok","600,1,s":"Australia/Sydney","630,1,s":"Australia/Lord_Howe","660,1":"Asia/Kamchatka","660,0":"Pacific/Noumea","690,0":"Pacific/Norfolk","720,1,s":"Pacific/Auckland","720,0":"Pacific/Majuro","765,1,s":"Pacific/Chatham","780,0":"Pacific/Tongatapu","780,1,s":"Pacific/Apia","840,0":"Pacific/Kiritimati"},a.olson.dst_rules={years:[2008,2009,2010,2011,2012,2013,2014],zones:[{name:"Africa/Cairo",rules:[{e:12199572e5,s:12090744e5},{e:1250802e6,s:1240524e6},{e:12858804e5,s:12840696e5},!1,!1,!1,{e:14116788e5,s:1406844e6}]},{name:"America/Asuncion",rules:[{e:12050316e5,s:12243888e5},{e:12364812e5,s:12558384e5},{e:12709548e5,s:12860784e5},{e:13024044e5,s:1317528e6},{e:1333854e6,s:13495824e5},{e:1364094e6,s:1381032e6},{e:13955436e5,s:14124816e5}]},{name:"America/Campo_Grande",rules:[{e:12032172e5,s:12243888e5},{e:12346668e5,s:12558384e5},{e:12667212e5,s:1287288e6},{e:12981708e5,s:13187376e5},{e:13302252e5,s:1350792e6},{e:136107e7,s:13822416e5},{e:13925196e5,s:14136912e5}]},{name:"America/Goose_Bay",rules:[{e:122559486e4,s:120503526e4},{e:125704446e4,s:123648486e4},{e:128909886e4,s:126853926e4},{e:13205556e5,s:129998886e4},{e:13520052e5,s:13314456e5},{e:13834548e5,s:13628952e5},{e:14149044e5,s:13943448e5}]},{name:"America/Havana",rules:[{e:12249972e5,s:12056436e5},{e:12564468e5,s:12364884e5},{e:12885012e5,s:12685428e5},{e:13211604e5,s:13005972e5},{e:13520052e5,s:13332564e5},{e:13834548e5,s:13628916e5},{e:14149044e5,s:13943412e5}]},{name:"America/Mazatlan",rules:[{e:1225008e6,s:12074724e5},{e:12564576e5,s:1238922e6},{e:1288512e6,s:12703716e5},{e:13199616e5,s:13018212e5},{e:13514112e5,s:13332708e5},{e:13828608e5,s:13653252e5},{e:14143104e5,s:13967748e5}]},{name:"America/Mexico_City",rules:[{e:12250044e5,s:12074688e5},{e:1256454e6,s:12389184e5},{e:12885084e5,s:1270368e6},{e:1319958e6,s:13018176e5},{e:13514076e5,s:13332672e5},{e:13828572e5,s:13653216e5},{e:14143068e5,s:13967712e5}]},{name:"America/Miquelon",rules:[{e:12255984e5,s:12050388e5},{e:1257048e6,s:12364884e5},{e:12891024e5,s:12685428e5},{e:1320552e6,s:12999924e5},{e:13520016e5,s:1331442e6},{e:13834512e5,s:13628916e5},{e:14149008e5,s:13943412e5}]},{name:"America/Santa_Isabel",rules:[{e:12250116e5,s:1207476e6},{e:12564612e5,s:12389256e5},{e:12885156e5,s:12703752e5},{e:13199652e5,s:13018248e5},{e:13514148e5,s:13332744e5},{e:13828644e5,s:13653288e5},{e:1414314e6,s:13967784e5}]},{name:"America/Sao_Paulo",rules:[{e:12032136e5,s:12243852e5},{e:12346632e5,s:12558348e5},{e:12667176e5,s:12872844e5},{e:12981672e5,s:1318734e6},{e:13302216e5,s:13507884e5},{e:13610664e5,s:1382238e6},{e:1392516e6,s:14136876e5}]},{name:"Asia/Amman",rules:[{e:1225404e6,s:12066552e5},{e:12568536e5,s:12381048e5},{e:12883032e5,s:12695544e5},{e:13197528e5,s:13016088e5},!1,!1,{e:14147064e5,s:13959576e5}]},{name:"Asia/Damascus",rules:[{e:12254868e5,s:120726e7},{e:125685e7,s:12381048e5},{e:12882996e5,s:12701592e5},{e:13197492e5,s:13016088e5},{e:13511988e5,s:13330584e5},{e:13826484e5,s:1364508e6},{e:14147028e5,s:13959576e5}]},{name:"Asia/Dubai",rules:[!1,!1,!1,!1,!1,!1,!1]},{name:"Asia/Gaza",rules:[{e:12199572e5,s:12066552e5},{e:12520152e5,s:12381048e5},{e:1281474e6,s:126964086e4},{e:1312146e6,s:130160886e4},{e:13481784e5,s:13330584e5},{e:13802292e5,s:1364508e6},{e:14116788e5,s:13959576e5}]},{name:"Asia/Irkutsk",rules:[{e:12249576e5,s:12068136e5},{e:12564072e5,s:12382632e5},{e:12884616e5,s:12697128e5},!1,!1,!1,!1]},{name:"Asia/Jerusalem",rules:[{e:12231612e5,s:12066624e5},{e:1254006e6,s:1238112e6},{e:1284246e6,s:12695616e5},{e:131751e7,s:1301616e6},{e:13483548e5,s:13330656e5},{e:13828284e5,s:13645152e5},{e:1414278e6,s:13959648e5}]},{name:"Asia/Kamchatka",rules:[{e:12249432e5,s:12067992e5},{e:12563928e5,s:12382488e5},{e:12884508e5,s:12696984e5},!1,!1,!1,!1]},{name:"Asia/Krasnoyarsk",rules:[{e:12249612e5,s:12068172e5},{e:12564108e5,s:12382668e5},{e:12884652e5,s:12697164e5},!1,!1,!1,!1]},{name:"Asia/Omsk",rules:[{e:12249648e5,s:12068208e5},{e:12564144e5,s:12382704e5},{e:12884688e5,s:126972e7},!1,!1,!1,!1]},{name:"Asia/Vladivostok",rules:[{e:12249504e5,s:12068064e5},{e:12564e8,s:1238256e6},{e:12884544e5,s:12697056e5},!1,!1,!1,!1]},{name:"Asia/Yakutsk",rules:[{e:1224954e6,s:120681e7},{e:12564036e5,s:12382596e5},{e:1288458e6,s:12697092e5},!1,!1,!1,!1]},{name:"Asia/Yekaterinburg",rules:[{e:12249684e5,s:12068244e5},{e:1256418e6,s:1238274e6},{e:12884724e5,s:12697236e5},!1,!1,!1,!1]},{name:"Asia/Yerevan",rules:[{e:1224972e6,s:1206828e6},{e:12564216e5,s:12382776e5},{e:1288476e6,s:12697272e5},{e:13199256e5,s:13011768e5},!1,!1,!1]},{name:"Australia/Lord_Howe",rules:[{e:12074076e5,s:12231342e5},{e:12388572e5,s:12545838e5},{e:12703068e5,s:12860334e5},{e:13017564e5,s:1317483e6},{e:1333206e6,s:13495374e5},{e:13652604e5,s:1380987e6},{e:139671e7,s:14124366e5}]},{name:"Australia/Perth",rules:[{e:12068136e5,s:12249576e5},!1,!1,!1,!1,!1,!1]},{name:"Europe/Helsinki",rules:[{e:12249828e5,s:12068388e5},{e:12564324e5,s:12382884e5},{e:12884868e5,s:1269738e6},{e:13199364e5,s:13011876e5},{e:1351386e6,s:13326372e5},{e:13828356e5,s:13646916e5},{e:14142852e5,s:13961412e5}]},{name:"Europe/Minsk",rules:[{e:12249792e5,s:12068352e5},{e:12564288e5,s:12382848e5},{e:12884832e5,s:12697344e5},!1,!1,!1,!1]},{name:"Europe/Moscow",rules:[{e:12249756e5,s:12068316e5},{e:12564252e5,s:12382812e5},{e:12884796e5,s:12697308e5},!1,!1,!1,!1]},{name:"Pacific/Apia",rules:[!1,!1,!1,{e:13017528e5,s:13168728e5},{e:13332024e5,s:13489272e5},{e:13652568e5,s:13803768e5},{e:13967064e5,s:14118264e5}]},{name:"Pacific/Fiji",rules:[!1,!1,{e:12696984e5,s:12878424e5},{e:13271544e5,s:1319292e6},{e:1358604e6,s:13507416e5},{e:139005e7,s:1382796e6},{e:14215032e5,s:14148504e5}]}]},"undefined"!=typeof exports?exports.jstz=a:e.jstz=a}(this);Kameleoon.Gatherer={SCRIPT_VERSION:20150610,MIN_STORED_DATA_VERSION:20150427,STORED_DATA_NAME_PREFIX:"Kameleoon.Gatherer.",DROPPED_VISITOR_CODE:"droppedvisitor",VISITOR_CODE_LENGTH:16,MAX_VISIT_IDLE_DURATION:30*60*1000,ACTIVITY_TRACKING_INTERVAL:30*1000,INTERESTS_TRACKING_TIMEOUT_AFTER_WINDOW_LOAD:2*1000,INTERESTS_TRACKING_INTERVAL:5*60*1000,CUSTOM_DATA_TRACKING_INTERVAL:30*1000,TAB_COUNT_TRACKING_INTERVAL:15*1000,MAX_SUM_CUSTOM_DATA_VALUES_LENGTHES_IN_ONE_REQUEST:2048,DEFAULT_LOCALE_LANGUAGE_TAG:"en",ENABLE_TAB_COUNT:false,ENABLE_HISTORY:false,DEBUG_LEVELS:{TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,FATAL:5},run:function(developmentMode){if(!Function.prototype.bind){Function.prototype.bind=function(oThis){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var aArgs=Array.prototype.slice.call(arguments,1),fToBind=this,fNOP=function(){},fBound=function(){return fToBind.apply(this instanceof fNOP&&oThis?this:oThis,aArgs.concat(Array.prototype.slice.call(arguments)))};fNOP.prototype=this.prototype;fBound.prototype=new fNOP();return fBound}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(searchElement,fromIndex){var k;if(this==null){throw new TypeError('"this" is null or not defined')}var O=Object(this);var len=O.length>>>0;if(len===0){return -1}var n=+fromIndex||0;if(Math.abs(n)===Infinity){n=0}if(n>=len){return -1}k=Math.max(n>=0?n:len-Math.abs(n),0);while(k<len){if(k in O&&O[k]===searchElement){return k}k++}return -1}}var trackPage=function(callback){var date=new Date();this.updateIfStartOfVisit(date,true,function(startOfVisit){this.LocalDataHandler.registerAction(function(){this.saveFieldToVisitCookieOrStoredData("timeLastActivity",date.getTime());Kameleoon.Visitor.setupFromStoredData(true);Kameleoon.Visitor.addPage(date,this.obtainKeyPagesIndexes(),this.obtainReferrersIndexes(startOfVisit));Kameleoon.Visitor.saveToStoredData();if(Kameleoon.Internals.configuration.Gatherer.track&&((["medium","full"].indexOf(Kameleoon.Internals.configuration.Gatherer.trackingMode)>=0)||(startOfVisit&&(["light","medium","full"].indexOf(Kameleoon.Internals.configuration.Gatherer.trackingMode)>=0)))){this.sendTrackingRequest(date,"event=page&keyPages="+this.joinAll(this.obtainKeyPagesIndexes(),"-")+"&referrers="+this.joinAll(this.obtainReferrersIndexes(startOfVisit),"-"),startOfVisit)}if(this.customTrackPage){this.customTrackPage(date,this.obtainKeyPagesIndexes(),this.obtainReferrersIndexes(startOfVisit))}callback()}.bind(this),false,true,{urgent:true})}.bind(this))}.bind(this);var scheduleActivityTracking=function(){Kameleoon.Internals.Gatherer.active=false;var setActivity=function(){Kameleoon.Internals.Gatherer.active=true}.bind(this);if(document.addEventListener){document.addEventListener("mousemove",setActivity,false);document.addEventListener("scroll",setActivity,false)}else{document.attachEvent("onmousemove",setActivity);document.attachEvent("onscroll",setActivity)}this.LocalDataHandler.registerAction(function(){this.trackActivity(Kameleoon.Internals.Gatherer.active);Kameleoon.Internals.Gatherer.active=false}.bind(this),true,false,{repeatInterval:this.ACTIVITY_TRACKING_INTERVAL})}.bind(this);var scheduleInterestsTracking=function(){var launchInterestsTrackingScheduler=function(){window.setTimeout(function(){this.LocalDataHandler.registerAction(function(){if(!bowser.gecko&&!bowser.webkit){return}var currentTime=new Date().getTime();Kameleoon.Internals.currentInterestCheck=0;Kameleoon.Internals.activeInterests=[];for(var i=0;i<Kameleoon.Internals.configuration.Gatherer.interests.length;++i){if((!Kameleoon.Internals.configuration.Gatherer.interests[i].disabled)&&(!Kameleoon.Visitor.obtainInterestIsActive(i))){var hashes=this.obtainFieldFromStoredData("interestHashes-"+i);if((!hashes)||Kameleoon.Internals.configuration.Gatherer.interests[i].constantCheck){var lastCheckTime=this.obtainFieldFromStoredData("interestLastCheckTime-"+i);if((!lastCheckTime)||(currentTime-lastCheckTime>=this.INTERESTS_TRACKING_INTERVAL)){this.saveFieldToStoredData("interestLastCheckTime-"+i,currentTime);var cachedHashesArray=hashes?hashes.split("|"):[];for(var j=0;j<Kameleoon.Internals.configuration.Gatherer.interestsImagesLists[i].length;++j){var currentArrayHash=this.computeListHash(Kameleoon.Internals.configuration.Gatherer.interestsImagesLists[i][j]);if(cachedHashesArray.indexOf(currentArrayHash)==-1){hashes=(hashes?hashes+"|":"")+currentArrayHash;this.saveFieldToStoredData("interestHashes-"+i,hashes);++Kameleoon.Internals.currentInterestCheck;var iframeNode=document.createElement("iframe");iframeNode.style.display="none";iframeNode.className="KameleoonInterestDetection";var frameCode="var cacheTimeout = 10;";frameCode+="var currentInterestIndex = "+i+";";frameCode+="var urls = "+JSON.stringify(Kameleoon.Internals.configuration.Gatherer.interestsImagesLists[i][j])+";";frameCode+='/* WARNING: NEVER PUT // COMMENTS IN THIS FILE ! */var CoreAlgorithm ={webkit: function(url){var start;var alreadyFound = false;var runCheck = function(){window.removeEventListener("message", runCheck, false);start = new Date().getTime();var img = new Image();img.style.display = "none";img.style.position = "absolute";img.style.left = "-9999px";img.style.top = "-9999px";img.src = url;var processMessage = function(event){if (alreadyFound){--window.currentChecks;return;}var now = new Date().getTime();var duration = now - start;/*console.log("Checking after: " + duration + "ms.");*/if (img.complete || img.width > 0){--window.currentChecks;/*console.log(img.complete ? ("Image completed, " + img.width + "px.") : "Image not completed");*/var currentResult = true;if (/(\.css|\.js|\.swf)/.test(img.src)){currentResult = true;}else if (img.width == 0){currentResult = false;}if (currentResult){alreadyFound = true;/*console.log("Interest found.");*/window.parent.postMessage(JSON.stringify({"command": "addKameleoonInterest", "index": currentInterestIndex}), "*");}window.stop();window.stop();delete img;window.removeEventListener("message", processMessage, false);/*console.log("(1) Result is: " + currentResult, img.src);*/}else if (now - start > cacheTimeout){--window.currentChecks;if (window.stop !== undefined){window.stop();}else if (document.execCommand !== undefined){document.execCommand("Stop", false);}delete img;window.removeEventListener("message", processMessage, false);/*console.log("(2) Result is: " + false, img.src);*/}else{window.postMessage("toNextMessageInterval", "*");}if (! alreadyFound && 0 == window.currentChecks){window.parent.postMessage(JSON.stringify({"command": "finishKameleoonInterestCheck", "index": currentInterestIndex}), "*");}};window.addEventListener("message", processMessage, false);window.postMessage("", "*");};window.addEventListener("message", runCheck, false);window.postMessage("", "*");}};mainCheck = CoreAlgorithm.webkit;window.currentChecks = 0;for (var i = 0; i < urls.length; ++i){++window.currentChecks;mainCheck(urls[i]);}';iframeNode.src='javascript:\'<!doctype html><html><head><meta charset="utf-8"><style>*{margin:0;padding:0;border:0;}</style></head><body><script>'+frameCode+"<\/script></body></html>'";Kameleoon.Internals.headNode.appendChild(iframeNode);break}}}}}}}.bind(this),true,false,{repeatInterval:this.INTERESTS_TRACKING_INTERVAL})}.bind(this),this.INTERESTS_TRACKING_TIMEOUT_AFTER_WINDOW_LOAD)}.bind(this);if("complete"==document.readyState){launchInterestsTrackingScheduler()}else{if(window.addEventListener){window.addEventListener("load",launchInterestsTrackingScheduler,false)}else{window.attachEvent("onload",launchInterestsTrackingScheduler)}}}.bind(this);var scheduleCustomDataTracking=function(){this.LocalDataHandler.registerAction(function(){var performStuff=function(virtual){var customDataIndexesToTrack=[];var customDataValuesToTrack=[];var customDataOverwritesIfCollection=[];var customDataTreatedNames=[];for(var i=0,l=Kameleoon.Internals.configuration.Gatherer.customData.length;i<l;++i){var customDatum=Kameleoon.Internals.configuration.Gatherer.customData[i];if(!customDatum.disabled){var customDatumVirtual=customDatum.virtual;if(customDatumVirtual==null){customDatumVirtual=false}if(customDatumVirtual==virtual){var customDatumCurrentValue=Kameleoon.Internals.Visitor.currentVisit.valueByCustomDatum[i];if((!customDatum.constant)||(customDatumCurrentValue==null)){var valueMap=this.obtainCustomDatumValueMap(i);if(valueMap!=null){customDataTreatedNames.push(customDatum.name);var customDatumDetectedValue=valueMap.value;if(customDatumDetectedValue!=null){var customDatumType=customDatum.type;var customDatumIsCollection=(customDatumType=="LIST")||(customDatumType=="COUNT_LIST");if((!customDatumIsCollection)||(customDatumCurrentValue!=customDatumDetectedValue)){customDataIndexesToTrack.push(i);customDataValuesToTrack.push(customDatumDetectedValue);customDataOverwritesIfCollection.push(valueMap.overwrite)}}}}}}}this.trackCustomData(customDataIndexesToTrack,customDataValuesToTrack,customDataOverwritesIfCollection);for(var i=0,l=customDataTreatedNames.length;i<l;++i){Kameleoon.API.state.customDataTreated[customDataTreatedNames[i]]=true}}.bind(this);performStuff(false);performStuff(true)}.bind(this),true,false,{repeatInterval:this.CUSTOM_DATA_TRACKING_INTERVAL})}.bind(this);var scheduleTabCountTracking=function(){if(!Kameleoon.Internals.externalIframe){Kameleoon.Analyst.loadExternalIframe()}Kameleoon.Internals.Gatherer.tabCode=Kameleoon.Utils.obtainRandomString(16);this.LocalDataHandler.registerAction(function(){Kameleoon.Internals.externalIframe.contentWindow.postMessage(Kameleoon.Utils.JSONStringify({type:"tabcount",tabCode:Kameleoon.Internals.Gatherer.tabCode,deadTime:new Date().getTime()+this.TAB_COUNT_TRACKING_INTERVAL,callbackId:Kameleoon.Utils.addPostMessageCallback(this.trackTabCount)}),"*")}.bind(this),true,false,{repeatInterval:this.TAB_COUNT_TRACKING_INTERVAL})}.bind(this);if(Kameleoon.API.visitor==null){Kameleoon.API.visitor={}}if(Kameleoon.API.state==null){Kameleoon.API.state={}}Kameleoon.API.state.customDataTreated={};if(!developmentMode){Kameleoon.Internals.configuration.Gatherer=Kameleoon.Utils.JSONParse(Kameleoon.Utils.decodeString(Kameleoon.Internals.configuration.Gatherer))}if(Kameleoon.Internals.Gatherer==null){Kameleoon.Internals.Gatherer={}}Kameleoon.Internals.Gatherer.developmentMode=developmentMode;Kameleoon.Internals.Gatherer.useVisitCookie=!Kameleoon.Internals.configuration.useWideDomainSupport;this.initializeTabDataIfNecessary();this.initializeStoredDataIfNecessary();if(Kameleoon.Internals.Gatherer.useVisitCookie){this.initializeVisitCookieIfNecessary()}this.LocalDataHandler.init();if("https:"==window.location.protocol){var interestsImagesListsHTTPS=[];for(var i=0,l=Kameleoon.Internals.configuration.Gatherer.interestsImagesLists.length;i<l;++i){var interestsImagesListsHTTPS_i=[];for(var j=0,m=Kameleoon.Internals.configuration.Gatherer.interestsImagesLists[i].length;j<m;++j){var interestsImagesListsHTTPS_i_j=[];for(var k=0,n=Kameleoon.Internals.configuration.Gatherer.interestsImagesLists[i][j].length;k<n;++k){if(0==Kameleoon.Internals.configuration.Gatherer.interestsImagesLists[i][j][k].indexOf("https:")){interestsImagesListsHTTPS_i_j.push(Kameleoon.Internals.configuration.Gatherer.interestsImagesLists[i][j][k])}}interestsImagesListsHTTPS_i.push(interestsImagesListsHTTPS_i_j)}interestsImagesListsHTTPS.push(interestsImagesListsHTTPS_i)}Kameleoon.Internals.configuration.Gatherer.interestsImagesLists=interestsImagesListsHTTPS}this.LocalDataHandler.registerAction(function(){var storedDataVersion=this.obtainFieldFromVisitCookieOrStoredData("storedDataVersion");if((storedDataVersion==null)||(storedDataVersion<this.MIN_STORED_DATA_VERSION)){this.saveFieldToVisitCookieOrStoredData("storedDataVersion",this.SCRIPT_VERSION);this.saveFieldToVisitCookieOrStoredData("visitorCode",undefined);this.saveFieldToVisitCookieOrStoredData("visitNumber",undefined);this.saveFieldToVisitCookieOrStoredData("timeLastActivity",undefined);this.saveFieldToVisitCookieOrStoredData("timeSincePreviousVisit",undefined);this.saveFieldToVisitCookieOrStoredData("visitStaticDataSent",undefined);this.saveFieldToStoredData("weatherTracked",false)}if(Kameleoon.Internals.configuration.localDataLegalControl){Kameleoon.Internals.Gatherer.saveLocalDataAllowed=(this.obtainFieldFromVisitCookieOrStoredData("visitorCode")!=null);if(!Kameleoon.Internals.Gatherer.saveLocalDataAllowed){Kameleoon.Internals.Gatherer.allowSaveLocalData=function(){if(document.removeEventListener){document.removeEventListener("mousedown",Kameleoon.Internals.Gatherer.allowSaveLocalData,false)}else{document.detachEvent("onmousedown",Kameleoon.Internals.Gatherer.allowSaveLocalData)}Kameleoon.Internals.Gatherer.saveLocalDataAllowed=true;this.LocalDataHandler.saveLocalData()}.bind(this);if(document.addEventListener){document.addEventListener("mousedown",Kameleoon.Internals.Gatherer.allowSaveLocalData,false)}else{document.attachEvent("onmousedown",Kameleoon.Internals.Gatherer.allowSaveLocalData)}}}else{Kameleoon.Internals.Gatherer.saveLocalDataAllowed=true}this.saveFieldToTabData("timeStartedPage",new Date().getTime());this.saveFieldToStoredData("startsOfVisitForCurrentPage",0);try{eval(Kameleoon.Internals.configuration.Gatherer.customScriptBefore)}catch(e){}trackPage(function(){scheduleActivityTracking();scheduleInterestsTracking();scheduleCustomDataTracking();if(this.ENABLE_TAB_COUNT){scheduleTabCountTracking()}}.bind(this))}.bind(this),false,true,{urgent:true})},finishInterestProcessing:function(){var d=document.getElementsByClassName("KameleoonInterestDetection");for(var b=0,a=d.length;b<a;++b){var c=d.item();c.parentNode.removeChild(c)}Kameleoon.Gatherer.trackInterests(Kameleoon.Internals.activeInterests)},trackActivity:function(b){var a=new Date();var c=function(d){this.LocalDataHandler.registerAction(function(){if(b||(!this.obtainVisitIsFinished(a))){Kameleoon.Visitor.setupFromStoredData(true);Kameleoon.Visitor.addActivity(a,b);Kameleoon.Visitor.saveToStoredData();if(Kameleoon.Internals.configuration.Gatherer.track&&(["full"].indexOf(Kameleoon.Internals.configuration.Gatherer.trackingMode)>=0)){this.sendTrackingRequest(a,"event=activity&active="+b,d)}if(this.customTrackActivity){this.customTrackActivity(a,b)}}}.bind(this),false,true,{urgent:true})}.bind(this);if(b){this.updateIfStartOfVisit(a,false,function(d){this.LocalDataHandler.registerAction(function(){this.saveFieldToVisitCookieOrStoredData("timeLastActivity",a.getTime());c(d)}.bind(this),false,true,{urgent:true})}.bind(this))}else{c(false)}},trackInterests:function(a){if(a.length>0){this.LocalDataHandler.registerAction(function(){var c=new Date();if(!this.obtainVisitIsFinished(c)){Kameleoon.Visitor.setupFromStoredData(true);var b=false;for(var d=0;d<a.length;d++){if(!Kameleoon.Visitor.obtainInterestIsActive(a[d])){b=true;break}}Kameleoon.Visitor.addInterests(c,a);Kameleoon.Visitor.saveToStoredData();if(Kameleoon.Internals.configuration.Gatherer.track&&(["full"].indexOf(Kameleoon.Internals.configuration.Gatherer.trackingMode)>=0)){this.sendTrackingRequest(c,"event=interests&activeInterests="+this.joinAll(a,"-"),false)}if(this.customTrackInterests){this.customTrackInterests(c,a)}if(b){Kameleoon.Analyst.processAllContainers()}}}.bind(this),false,true,{urgent:false})}},trackSearch:function(d,c,a){var b=new Date();this.updateIfStartOfVisit(b,false,function(e){this.LocalDataHandler.registerAction(function(){this.saveFieldToVisitCookieOrStoredData("timeLastActivity",b.getTime());Kameleoon.Visitor.setupFromStoredData(true);Kameleoon.Visitor.addSearch(b,this.obtainKeyWordsIndexes(d),c,a);Kameleoon.Visitor.saveToStoredData();if(Kameleoon.Internals.configuration.Gatherer.track&&(["full"].indexOf(Kameleoon.Internals.configuration.Gatherer.trackingMode)>=0)){this.sendTrackingRequest(b,"event=search&keyWords="+this.joinAll(this.obtainKeyWordsIndexes(d),"-")+"&numberResults="+c+"&followed="+a,e)}if(this.customTrackSearch){this.customTrackSearch(b,this.obtainKeyWordsIndexes(d),c,a)}}.bind(this),false,true,{urgent:true})}.bind(this))},trackConversion:function(b,a){this.LocalDataHandler.registerAction(function(){var c=new Date();if(isNaN(parseFloat(a))){this.logDebugMessage("Revenue given = "+a+"; revenue set to 0.0",this.DEBUG_LEVELS.ERROR,"CustomerError");a=0}else{a=parseFloat(a)}if(!this.obtainVisitIsFinished(c)){Kameleoon.Visitor.setupFromStoredData(true);Kameleoon.Visitor.addConversion(b,a);Kameleoon.Visitor.saveToStoredData();if(Kameleoon.Internals.configuration.Gatherer.track&&(["light","medium","full"].indexOf(Kameleoon.Internals.configuration.Gatherer.trackingMode)>=0)){this.sendTrackingRequest(c,"event=conversion&goalId="+b+"&revenue="+a,false)}if(this.customTrackConversion){this.customTrackConversion(c,b,a)}}}.bind(this),false,true,{urgent:true})},trackAction:function(b,a){this.LocalDataHandler.registerAction(function(){var c=new Date();if(!this.obtainVisitIsFinished(c)){Kameleoon.Visitor.setupFromStoredData(true);Kameleoon.Visitor.addAction(b,a);Kameleoon.Visitor.saveToStoredData();if(Kameleoon.Internals.configuration.Gatherer.track&&(["full"].indexOf(Kameleoon.Internals.configuration.Gatherer.trackingMode)>=0)){this.sendTrackingRequest(c,"event=action&actionId="+b+"&mentalistDecision="+a,false)}if(this.customTrackAction){this.customTrackAction(c,b,a)}}}.bind(this),false,true,{urgent:true})},trackData:function(b,a){if(b.length>0){this.LocalDataHandler.registerAction(function(){var c=new Date();if(!this.obtainVisitIsFinished(c)){var g=b.indexOf("experimentId");if(g>=0){var j=null;var e=b.indexOf("variationId");if(e>=0){j=a[e];if(isNaN(j)){j=null}}Kameleoon.Visitor.setupFromStoredData(true);Kameleoon.Visitor.addExperiment(a[g],j,a[b.indexOf("mentalistDecision")]);Kameleoon.Visitor.saveToStoredData()}else{var h=b.indexOf("personalizationId");if(h>=0){var j=null;var e=b.indexOf("variationId");if(e>=0){j=a[e];if(isNaN(j)){j=null}}Kameleoon.Visitor.setupFromStoredData(true);Kameleoon.Visitor.addPersonalization(a[h],j,a[b.indexOf("mentalistDecision")]);Kameleoon.Visitor.saveToStoredData()}}if(Kameleoon.Internals.configuration.Gatherer.track&&(["light","medium","full"].indexOf(Kameleoon.Internals.configuration.Gatherer.trackingMode)>=0)){var f="";for(var d=0;d<b.length;d++){if((b[d]!=null)&&(a[d]!=null)){f+=("&"+b[d]+"="+a[d])}}this.sendTrackingRequest(c,"event=data"+f,false)}if(this.customTrackData){this.customTrackData(c,b,a)}}}.bind(this),false,true,{urgent:true})}},trackWeather:function(c,a,b){if(window.location.protocol==="http:"){this.LocalDataHandler.registerAction(function(){if(!this.obtainFieldFromStoredData("weatherTracked")){var d=new Date();if(!this.obtainVisitIsFinished(d)){var e=function(f){this.LocalDataHandler.registerAction(function(){if(!this.obtainVisitIsFinished(d)){Kameleoon.Visitor.setupFromStoredData(true);Kameleoon.Visitor.addWeather(f.main.temp,f.main.humidity,f.main.pressure,f.wind.speed,f.clouds.all,f.weather&&f.weather[0]?f.weather[0].description:null);Kameleoon.Visitor.saveToStoredData();if(Kameleoon.Internals.configuration.Gatherer.track&&(["full"].indexOf(Kameleoon.Internals.configuration.Gatherer.trackingMode)>=0)){this.sendTrackingRequest(d,"event=weather&temperature="+f.main.temp+"&humidity="+f.main.humidity+"&pressure="+f.main.pressure+"&windSpeed="+f.wind.speed+"&cloudiness="+f.clouds.all+(f.weather&&f.weather[0]?("&weatherCode="+f.weather[0].description):""),false)}if(this.customTrackWeather){this.customTrackWeather(d,f.main.temp,f.main.humidity,f.main.pressure,f.wind.speed,f.clouds.all,f.weather&&f.weather[0]?f.weather[0].description:null)}this.saveFieldToStoredData("weatherTracked",true)}}.bind(this),false,true,{urgent:false})}.bind(this);Kameleoon.Utils.performBeaconServerCall("//api.openweathermap.org/data/2.5/weather?lat="+c+"&lon="+a,function(){if(this.readyState==4){if(this.status==200){e(Kameleoon.Utils.JSONParse(this.responseText))}b()}},null)}else{b()}}else{b()}}.bind(this),false,true,{urgent:false})}else{b()}},trackCustomData:function(b,a,c){if(b.length>0){this.LocalDataHandler.registerAction(function(){var d=new Date();if(!this.obtainVisitIsFinished(d)){var o=function(i){if(i==null){i=false}return i}.bind(this);var n=[];var m=0;var p=function(){var r="event=customData&indexes="+this.joinAll(n,"-");for(var q=0,i=n.length;q<i;++q){var l=n[q];var s=o(c[q]);r+="&value"+l+"="+encodeURIComponent(a[q])+"&overwriteIfCollection"+l+"="+s}this.sendTrackingRequest(d,r,false)}.bind(this);for(var g=0,e=b.length;g<e;g++){var h=b[g];var j=a[g];if((h!=null)&&(j!=null)){var f=o(c[g]);Kameleoon.Visitor.setupFromStoredData(true);Kameleoon.Visitor.addCustomData(h,j,f);Kameleoon.Visitor.saveToStoredData();if(!Kameleoon.Internals.configuration.Gatherer.customData[h].localOnly){if(Kameleoon.Internals.configuration.Gatherer.track&&(["full"].indexOf(Kameleoon.Internals.configuration.Gatherer.trackingMode)>=0)){var k=j.length;if(k<=this.MAX_SUM_CUSTOM_DATA_VALUES_LENGTHES_IN_ONE_REQUEST){if(m+k<=this.MAX_SUM_CUSTOM_DATA_VALUES_LENGTHES_IN_ONE_REQUEST){n.push(h);m+=k}else{p();n=[];m=0}}}}if(this.customTrackCustomData){this.customTrackCustomData(d,h,j,f)}}}if(n.length>0){p()}}}.bind(this),false,true,{urgent:true})}},trackTabCount:function(a){this.LocalDataHandler.registerAction(function(){var b=new Date();if(!this.obtainVisitIsFinished(b)){Kameleoon.Visitor.setupFromStoredData(true);Kameleoon.Visitor.addTabCount(b,a);Kameleoon.Visitor.saveToStoredData();if(Kameleoon.Internals.configuration.Gatherer.track&&(["full"].indexOf(Kameleoon.Internals.configuration.Gatherer.trackingMode)>=0)){this.sendTrackingRequest(b,"event=tabCount&tabCount="+a,false)}if(this.customTrackTabCount){this.customTrackTabCount(b,a)}}}.bind(this),false,true,{urgent:false})},trackProductPage:function(a){this.LocalDataHandler.registerAction(function(){var b=new Date();if(!this.obtainVisitIsFinished(b)){Kameleoon.Visitor.setupFromStoredData(true);Kameleoon.Visitor.addProductPage(a);Kameleoon.Visitor.saveToStoredData();if(Kameleoon.Internals.configuration.Gatherer.track&&([].indexOf(Kameleoon.Internals.configuration.Gatherer.trackingMode)>=0)){this.sendTrackingRequest(b,"event=productPage&productCode="+a,false)}if(this.customTrackProductPage){this.customTrackProductPage(b,a)}}}.bind(this),false,true,{urgent:false})},sendTrackingRequest:function(c,f,e){if(Kameleoon.Internals.configuration.Gatherer.track){var a=this.obtainFieldFromVisitCookieOrStoredData("visitStaticDataSent");var d="&siteCode="+Kameleoon.Internals.configuration.Gatherer.siteCode+"&visitorCode="+this.obtainFieldFromVisitCookieOrStoredData("visitorCode")+"&visitNumber="+this.obtainFieldFromVisitCookieOrStoredData("visitNumber")+"&startOfVisit="+e+"&keyPages="+this.joinAll(this.obtainKeyPagesIndexes(),"-")+"&referrers="+this.joinAll(this.obtainReferrersIndexes(e),"-")+"&useVisitCookie="+Kameleoon.Internals.Gatherer.useVisitCookie+"&scriptVersion="+this.SCRIPT_VERSION+"&storedDataVersion="+this.obtainFieldFromVisitCookieOrStoredData("storedDataVersion")+"&time="+c.getTime()+"&timeLastActivity="+this.obtainFieldFromVisitCookieOrStoredData("timeLastActivity");if(!a){d+="&trackingMode="+Kameleoon.Internals.configuration.Gatherer.trackingMode+"&timeSincePreviousVisit="+this.obtainFieldFromVisitCookieOrStoredData("timeSincePreviousVisit")+"&timeZoneGroups="+this.joinAll(this.obtainTimeZoneGroupsIndexes(),"-")+"&language="+this.obtainLanguageIndex()+"&browser="+this.obtainBrowserIndex()+"&browserVersion="+this.obtainBrowserVersion()+"&mobileBrowser="+this.obtainBrowserIsMobile()+"&os="+this.obtainOSIndex()+"&windowWidth="+this.obtainWindowWidth()+"&windowHeight="+this.obtainWindowHeight()+"&screenWidth="+this.obtainScreenWidth()+"&screenHeight="+this.obtainScreenHeight()+"&javaEnabled="+this.obtainJavaEnabled()+"&timeZoneId="+this.obtainTimeZoneId()+"&localeLanguageTag="+this.obtainLocaleLanguageTag()}var b=null;if(!a){b=function(){if((this.readyState==4)&&((this.status==200)||(this.status==204))){Kameleoon.Gatherer.saveFieldToVisitCookieOrStoredData("visitStaticDataSent",true)}}}Kameleoon.Utils.performBeaconServerCall(this.obtainTrackingRequestPrefix()+"publisher-adserver="+encodeURIComponent(Kameleoon.Utils.encodeString(f+d)),b,null)}},updateIfStartOfVisit:function(d,c,h){var a=this.obtainFieldFromVisitCookieOrStoredData("visitNumber");if((a==null)||this.obtainVisitIsFinished(d)){this.saveFieldToStoredData("startsOfVisitForCurrentPage",this.obtainFieldFromStoredData("startsOfVisitForCurrentPage")+1);var f;if(a==null){f=0;a=0}else{f=d.getTime()-this.obtainFieldFromVisitCookieOrStoredData("timeLastActivity");a++}this.saveFieldToVisitCookieOrStoredData("timeSincePreviousVisit",f);this.saveFieldToVisitCookieOrStoredData("visitNumber",a);this.saveFieldToStoredData("weatherTracked",false);var g=function(){Kameleoon.Visitor.saveToStoredData();if(this.customTrackStartOfVisit){this.customTrackStartOfVisit(d)}h(true)}.bind(this);if(a==0){var b=(Math.random()<Kameleoon.Internals.configuration.Gatherer.dropRate)?this.DROPPED_VISITOR_CODE:Kameleoon.Utils.obtainRandomString(this.VISITOR_CODE_LENGTH);this.saveFieldToVisitCookieOrStoredData("visitorCode",b);Kameleoon.Visitor.init()}else{Kameleoon.Visitor.setupFromStoredData(false)}var e=Kameleoon.Visit.create(Kameleoon.Internals.configuration.Gatherer.trackingMode,Kameleoon.Internals.configuration.Gatherer.siteCode,this.obtainFieldFromVisitCookieOrStoredData("visitorCode"),d,this.obtainFieldFromVisitCookieOrStoredData("timeSincePreviousVisit"),this.obtainFieldFromVisitCookieOrStoredData("visitNumber"),this.obtainKeyPagesIndexes(),this.obtainReferrersIndexes(true),this.obtainTimeZoneGroupsIndexes(),this.obtainLanguageIndex(),this.obtainBrowserIndex(),this.obtainBrowserVersion(),this.obtainBrowserIsMobile(),this.obtainOSIndex(),this.obtainWindowWidth(),this.obtainWindowHeight(),this.obtainScreenWidth(),this.obtainScreenHeight(),this.obtainJavaEnabled(),this.obtainTimeZoneId(),this.obtainLocaleLanguageTag());Kameleoon.Visitor.addVisit(e);if(!c){Kameleoon.Visitor.addPage(d,this.obtainKeyPagesIndexes(),this.obtainReferrersIndexes(true))}if(a==0){this.obtainPreviousVisitsFromServer(function(j){if((j==null)||(j.length==0)){if(this.customTrackStartOfVisitor){this.customTrackStartOfVisitor(d)}}else{Kameleoon.Visitor.changePreviousVisits(j);var l=j[j.length-1];var k=l.visitorCode;var i=l.visitNumber+1;Kameleoon.Internals.Visitor.currentVisit.visitorCode=k;Kameleoon.Internals.Visitor.currentVisit.visitNumber=i;this.saveFieldToVisitCookieOrStoredData("visitorCode",k);this.saveFieldToVisitCookieOrStoredData("visitNumber",i);Kameleoon.Internals.configuration.Gatherer.track=Kameleoon.Internals.configuration.Gatherer.track&&(this.DROPPED_VISITOR_CODE!=k)}g()}.bind(this))}else{g()}}else{h(false)}},obtainPreviousVisitsFromServer:function(b){if(this.ENABLE_HISTORY){if(Kameleoon.Internals.configuration.Gatherer.mappingIdentifier!=null){var a=this.obtainCustomDatumValueMap(Kameleoon.Internals.configuration.Gatherer.mappingIdentifier);if((a!=null)&&(a.value!=null)){Kameleoon.Utils.performBeaconServerCall(this.obtainVisitsRequestPrefix()+"siteCode="+Kameleoon.Internals.configuration.Gatherer.siteCode+"&mappingIdentifier="+mappingIdentifier+"&mappingValueMap="+encodeURIComponent(a.value),function(){if(this.readyState==4){if(this.status==200){var d=Kameleoon.Utils.JSONParse(this.responseText);for(var e=0,c=d.length;e<c;++e){Kameleoon.Visit.convertVisitFromServer(d[e])}b(d)}else{b(null)}}},function(){b(null)})}else{b(null)}}else{b(null)}}else{b(null)}},initializeTabDataIfNecessary:function(){if(Kameleoon.Internals.Gatherer.tabData==null){Kameleoon.Internals.Gatherer.tabData={}}},obtainFieldFromTabData:function(a){return Kameleoon.Internals.Gatherer.tabData[a]},saveFieldToTabData:function(a,b){Kameleoon.Internals.Gatherer.tabData[a]=b},initializeStoredDataIfNecessary:function(){},obtainFieldFromStoredData:function(a){return Kameleoon.Internals.storedData[this.obtainStoredDataName(a)]},saveFieldToStoredData:function(a,b){Kameleoon.Internals.storedData[this.obtainStoredDataName(a)]=b},obtainStoredDataName:function(a){return this.STORED_DATA_NAME_PREFIX+a},initializeVisitCookieIfNecessary:function(){this.restoreVisitCookie()},obtainFieldFromVisitCookie:function(a){return Kameleoon.Internals.Gatherer.visitCookie[a]},saveFieldToVisitCookie:function(a,b){Kameleoon.Internals.Gatherer.visitCookie[a]=b},restoreVisitCookie:function(){var e=Kameleoon.Utils.readLocalData("kameleoonVisit","COOKIE",false);if(e==null){Kameleoon.Internals.Gatherer.visitCookie={}}else{var a=e.indexOf("/");if(a<0){Kameleoon.Internals.Gatherer.visitCookie=Kameleoon.Utils.JSONParse(e)}else{var b=e.split("/");var d=b.length;Kameleoon.Internals.Gatherer.visitCookie={};var c=0;Kameleoon.Internals.Gatherer.visitCookie.visitorCode=((d>c)&&(b[c].length>0)?b[c]:null);++c;Kameleoon.Internals.Gatherer.visitCookie.visitNumber=((d>c)&&(b[c].length>0)?parseInt(b[c]):null);++c;Kameleoon.Internals.Gatherer.visitCookie.timeLastActivity=((d>c)&&(b[c].length>0)?parseInt(b[c]):null);++c;Kameleoon.Internals.Gatherer.visitCookie.storedDataVersion=((d>c)&&(b[c].length>0)?parseInt(b[c]):null);++c;Kameleoon.Internals.Gatherer.visitCookie.timeSincePreviousVisit=((d>c)&&(b[c].length>0)?parseInt(b[c]):null);++c;Kameleoon.Internals.Gatherer.visitCookie.visitStaticDataSent=((d>c)&&(b[c].length>0)?(b[c]=="true"):null)}}},saveVisitCookie:function(){var a="";if(Kameleoon.Internals.Gatherer.visitCookie.visitorCode!=null){a+=Kameleoon.Internals.Gatherer.visitCookie.visitorCode}a+="/";if(Kameleoon.Internals.Gatherer.visitCookie.visitNumber!=null){a+=Kameleoon.Internals.Gatherer.visitCookie.visitNumber}a+="/";if(Kameleoon.Internals.Gatherer.visitCookie.timeLastActivity!=null){a+=Kameleoon.Internals.Gatherer.visitCookie.timeLastActivity}a+="/";if(Kameleoon.Internals.Gatherer.visitCookie.storedDataVersion!=null){a+=Kameleoon.Internals.Gatherer.visitCookie.storedDataVersion}a+="/";if(Kameleoon.Internals.Gatherer.visitCookie.timeSincePreviousVisit!=null){a+=Kameleoon.Internals.Gatherer.visitCookie.timeSincePreviousVisit}a+="/";if(Kameleoon.Internals.Gatherer.visitCookie.visitStaticDataSent!=null){a+=Kameleoon.Internals.Gatherer.visitCookie.visitStaticDataSent}Kameleoon.Utils.createLocalData("kameleoonVisit",a,365,null,"COOKIE",false,null)},obtainFieldFromVisitCookieOrStoredData:function(a){return Kameleoon.Internals.Gatherer.useVisitCookie?this.obtainFieldFromVisitCookie(a):this.obtainFieldFromStoredData(a)},saveFieldToVisitCookieOrStoredData:function(a,b){if(Kameleoon.Internals.Gatherer.useVisitCookie){this.saveFieldToVisitCookie(a,b)}else{this.saveFieldToStoredData(a,b)}},obtainVisitIsFinished:function(a){var b=a.getTime()-this.MAX_VISIT_IDLE_DURATION;return this.obtainFieldFromVisitCookieOrStoredData("timeLastActivity")<b},obtainTrackingRequestPrefix:function(){var c=Kameleoon.Internals.configuration.Gatherer.trackingNodes;var b="//"+((c&&c.length)>0?c[0]:Kameleoon.Internals.configuration.Gatherer.siteCode)+"."+(Kameleoon.Internals.Gatherer.developmentMode?"mentalist.kameleoon-dev.net":"mentalist.kameleoon.com");var a=this.obtainIsHttps()?(Kameleoon.Internals.Gatherer.developmentMode?8090:443):(Kameleoon.Internals.Gatherer.developmentMode?8089:80);return b+":"+a+"/_.gif?"},obtainVisitsRequestPrefix:function(){var b="//"+(Kameleoon.Internals.Gatherer.developmentMode?"history.analyst.kameleoon-dev.net":"history.analyst.kameleoon.com");var a;if(this.obtainIsHttps()){a=Kameleoon.Internals.Gatherer.developmentMode?8086:8443}else{a=Kameleoon.Internals.Gatherer.developmentMode?8085:8080}return b+":"+a+"/tracker/visit/obtainVisits?"},obtainTimeZoneId:function(){return jstz.determine().name()},obtainTimeZoneGroupsIndexes:function(){var b=this.obtainTimeZoneId();var a=[];for(var c=0;c<Kameleoon.Internals.configuration.Gatherer.timeZoneGroups.length;c++){if((!Kameleoon.Internals.configuration.Gatherer.timeZoneGroups[c].disabled)&&this.obtainTimeZoneGroupMatches(Kameleoon.Internals.configuration.Gatherer.timeZoneGroups[c].timeZones,b)){a.push(c)}}if(a.length==0){a.push(null)}return a},obtainTimeZoneGroupMatches:function(d,b){var a=b.toUpperCase();for(var c=0;c<d.length;c++){if(d[c].toUpperCase()==a){return true}}return false},obtainLocaleLanguageTag:function(){var a=null;if(navigator){if(navigator.language){a=navigator.language}else{if(navigator.browserLanguage){a=navigator.browserLanguage}else{if(navigator.systemLanguage){a=navigator.systemLanguage}else{if(navigator.userLanguage){a=navigator.userLanguage}}}}}return a?a:this.DEFAULT_LOCALE_LANGUAGE_TAG},obtainLanguage:function(){var b=this.obtainLocaleLanguageTag();var a=b.indexOf("-");if(a>=0){return b.substring(0,a)}return b},obtainLanguageIndex:function(){var a=this.obtainLanguage().toUpperCase();for(var b=0;b<Kameleoon.Internals.configuration.Gatherer.languages.length;b++){if((!Kameleoon.Internals.configuration.Gatherer.languages[b].disabled)&&(Kameleoon.Internals.configuration.Gatherer.languages[b].code.toUpperCase()==a)){return b}}return null},obtainBrowser:function(){var a=bowser.name;if(a==""){return null}if(a=="Internet Explorer"){return"Explorer"}return a},obtainBrowserIndex:function(){var a=this.obtainBrowser();if(!a){return null}var c=a.toUpperCase();for(var b=0;b<Kameleoon.Internals.configuration.Gatherer.browsers.length;b++){if((!Kameleoon.Internals.configuration.Gatherer.browsers[b].disabled)&&(Kameleoon.Internals.configuration.Gatherer.browsers[b].name.toUpperCase()==c)){return b}}return null},obtainBrowserVersion:function(){var a=bowser.version;if(a==""){return null}return a},obtainBrowserIsMobile:function(){return bowser.mobile||bowser.tablet},obtainOS:function(){if(bowser.android){return"Android"}if(bowser.ios){return"iOS"}if(bowser.windows){return"Windows"}if(bowser.mac){return"Mac"}if(bowser.linux){return"Linux"}return null},obtainOSIndex:function(){var c=this.obtainOS();if(!c){return null}var a=c.toUpperCase();for(var b=0;b<Kameleoon.Internals.configuration.Gatherer.oss.length;b++){if((!Kameleoon.Internals.configuration.Gatherer.oss[b].disabled)&&(Kameleoon.Internals.configuration.Gatherer.oss[b].name.toUpperCase()==a)){return b}}return null},obtainReferrer:function(){return document.referrer},obtainReferrerIsIgnored:function(d){var c=this.obtainReferrer();if(Kameleoon.Internals.configuration.Gatherer.directNoneReferrerOnlyFirst){if((c=="")&&(!d)){return true}}var e=window.location.pathname;var a=Kameleoon.Internals.configuration.Gatherer.noReferrerPages.length;for(var b=0;b<a;b++){if(e==Kameleoon.Internals.configuration.Gatherer.noReferrerPages[b]){return true}}return false},obtainInternalReferrerIndex:function(f){var d=this.obtainReferrer();if(d==""){return -1}var e=this.parseHostName(d);var b=Kameleoon.Utils.obtainCurrentRootDomain();if((b!=null)&&this.computeIfSuffix(e,b)){return Kameleoon.Internals.configuration.Gatherer.aliasSites.length}if(f){var a=Kameleoon.Internals.configuration.Gatherer.aliasSites.length;for(var c=0;c<a;c++){if(this.computeIfSuffix(e,Kameleoon.Internals.configuration.Gatherer.aliasSites[c])){return c}}}return -1},obtainReferrersIndexes:function(g,b){if(this.obtainReferrerIsIgnored(g)){return[-1]}var h=this.obtainInternalReferrerIndex(true);var c=this.obtainFieldFromStoredData("startsOfVisitForCurrentPage");if((c>1)||((c==1)&&(h>=0))){return[0]}if(h>=0){return[-1]}var f=[];var e=Number.NEGATIVE_INFINITY;for(var d=0;d<Kameleoon.Internals.configuration.Gatherer.referrers.length;d++){if((!Kameleoon.Internals.configuration.Gatherer.referrers[d].disabled)&&this.obtainReferrerMatches(Kameleoon.Internals.configuration.Gatherer.referrers[d])){var a=Kameleoon.Internals.configuration.Gatherer.referrers[d].priority;if(a==null){a=Number.NEGATIVE_INFINITY}if(a>=e){if(a>e){f=[];e=a}f.push(d+1)}}}if(f.length==0){f.push(null)}return f},obtainReferrerMatches:function(c){var a=c.detections;for(var b=0;b<a.length;b++){if(this.obtainReferrerDetectionMatches(a[b])){return true}}return false},obtainReferrerDetectionMatches:function(b){var a=this.obtainReferrerDetectionPartMatches(b.method,b.parameters);if(b.and){a=a&&this.obtainReferrerDetectionPartMatches(b.andMethod,b.andParameters)}return a},obtainReferrerDetectionPartMatches:function(method,parameters){switch(method.toUpperCase()){case"REFERRER_REGEX":return new RegExp(parameters).test(this.obtainReferrer());case"URL_REGEX":return new RegExp(parameters).test(this.obtainRelativeURL());default:try{return eval(parameters)===true}catch(e){return false}}},obtainRelativeURL:function(){return window.location.pathname+window.location.search+window.location.hash},obtainKeyPagesIndexes:function(){var a=this.obtainRelativeURL();var c=[];for(var b=0;b<Kameleoon.Internals.configuration.Gatherer.keyPages.length;b++){if((!Kameleoon.Internals.configuration.Gatherer.keyPages[b].disabled)&&new RegExp(Kameleoon.Internals.configuration.Gatherer.keyPages[b].relativeURLRegExp).test(a)){c.push(b)}}if(c.length==0){c.push(null)}return c},obtainKeyWordsIndexes:function(e){var d=e.split(new RegExp("\\s+"));var a=((d[0]=="")?1:0);var f=((d[d.length-1]=="")?d.length-2:d.length-1);var b=[];for(var c=a;c<=f;c++){b.push(this.obtainKeyWordIndex(d[c]))}return b},obtainKeyWordIndex:function(b){for(var a=0;a<Kameleoon.Internals.configuration.Gatherer.keyWords.length;a++){if((!Kameleoon.Internals.configuration.Gatherer.keyWords[a].disabled)&&(new RegExp(Kameleoon.Internals.configuration.Gatherer.keyWords[a].wordRegExp,"i").test(b))){return a}}return null},obtainWindowWidth:function(){var a=null;if(document.body&&document.body.offsetWidth){a=document.body.offsetWidth}if(document.compatMode=="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth){a=document.documentElement.offsetWidth}if(window.innerWidth){a=window.innerWidth}return a},obtainWindowHeight:function(){var a=null;if(document.body&&document.body.offsetHeight){a=document.body.offsetHeight}if(document.compatMode=="CSS1Compat"&&document.documentElement&&document.documentElement.offsetHeight){a=document.documentElement.offsetHeight}if(window.innerHeight){a=window.innerHeight}return a},obtainScreenWidth:function(){return window.screen.width},obtainScreenHeight:function(){return window.screen.height},obtainJavaEnabled:function(){return navigator.javaEnabled()},obtainCustomDatumValueMap:function(customDataIndex){var customDatumValueMap=null;var customDatum=Kameleoon.Internals.configuration.Gatherer.customData[customDataIndex];switch(customDatum.method.toUpperCase()){case"GTM":if(window.dataLayer&&window.dataLayer[0]&&customDatum.gtmVariableName){customDatumValueMap={value:window.dataLayer[0][customDatum.gtmVariableName],overwrite:false}}break;case"TC":if(window.tc_vars&&customDatum.tcVariableName){customDatumValueMap={value:window.tc_vars[customDatum.tcVariableName],overwrite:false}}break;case"CUSTOM_CODE":try{customDatumValueMap=eval("(function() {"+customDatum.customEvalCode+"})();")}catch(e){}break;default:break}return customDatumValueMap},obtainGADetails:function(){var b=Kameleoon.Utils.readLocalData("__utmz");if(b){var c=(function(){var g=b.split(".").slice(4).join(".").split("|");var h={};for(var f=0;f<g.length;f++){var e=g[f].split("=");h[e[0]]=e[1]}return h})();var a=Kameleoon.Utils.readLocalData("__utmz").split(".")[1];var d=Kameleoon.Utils.readLocalData("__utma").split(".").pop();return[c,a,d]}else{return null}},computeIfSuffix:function(b,c){var a=b.length-c.length;var d=b.indexOf(c,a);return(d>=0)&&(d==a)},computeListHash:function(c){var d=0;for(var b=0;b<c.length;++b){for(var a=0;a<c[b].length;++a){d=((d<<5)-d)+c[b].charCodeAt(a);d=d&d}}return d},joinAll:function(d,c){var a="";if(d.length>0){a+=d[0];for(var b=1;b<d.length;b++){a+=c;a+=d[b]}}return a},parseHostName:function(c){var b=document.createElement("a");b.href=c;return b.hostname},obtainIsHttps:function(){return(window.location.protocol=="https:")},logDebugMessage:function(c,d,a){if(!d){d=this.DEBUG_LEVELS.DEBUG}if(!a){a="CommonLog"}if(d>=Kameleoon.Internals.configuration.Gatherer.debugLevel){if(Kameleoon.Internals.configuration.Gatherer.track){var b="debugMessage="+encodeURIComponent(c)+"&debugLevel="+d+"&debugLog="+a+"&visitNumber="+this.obtainFieldFromVisitCookieOrStoredData("visitNumber")+"&visitorCode="+this.obtainFieldFromVisitCookieOrStoredData("visitorCode")+"&debug=true";Kameleoon.Utils.performBeaconServerCall(this.obtainTrackingRequestPrefix()+b,null,null)}}},LocalDataHandler:{ONE_SHOT_ACTIONS_INTERVAL:1*1000,REPEATED_ACTIONS_INTERVAL:15*1000,init:function(){if(Kameleoon.Internals.Gatherer.LocalDataHandler==null){Kameleoon.Internals.Gatherer.LocalDataHandler={}}Kameleoon.Internals.Gatherer.LocalDataHandler.oneShotActions=[];Kameleoon.Internals.Gatherer.LocalDataHandler.repeatedActions=[];Kameleoon.Internals.Gatherer.LocalDataHandler.oneShotActionsLastLaunchTime=-this.ONE_SHOT_ACTIONS_INTERVAL;Kameleoon.Internals.Gatherer.LocalDataHandler.repeatedActionsLastLaunchTime=-this.REPEATED_ACTIONS_INTERVAL;Kameleoon.Internals.Gatherer.LocalDataHandler.numberWrites=0;var a=function(){var f=new Date().getTime();var h=false;var e=false;var c=[];if(Kameleoon.Internals.Gatherer.LocalDataHandler.oneShotActionsLastLaunchTime+this.ONE_SHOT_ACTIONS_INTERVAL<=f){for(var d=0,b=Kameleoon.Internals.Gatherer.LocalDataHandler.oneShotActions.length;d<b;++d){var g=Kameleoon.Internals.Gatherer.LocalDataHandler.oneShotActions[d];if(g.restoreLocalData==true){h=true}if(g.saveLocalData==true){e=true}c.push(g.actionFunction)}Kameleoon.Internals.Gatherer.LocalDataHandler.oneShotActions=[];Kameleoon.Internals.Gatherer.LocalDataHandler.oneShotActionsLastLaunchTime=f}if(Kameleoon.Internals.Gatherer.LocalDataHandler.repeatedActionsLastLaunchTime+this.REPEATED_ACTIONS_INTERVAL<=f){for(var d=0,b=Kameleoon.Internals.Gatherer.LocalDataHandler.repeatedActions.length;d<b;++d){var g=Kameleoon.Internals.Gatherer.LocalDataHandler.repeatedActions[d];if(g.lastRunTime+g.repeatInterval<=f){if(g.restoreLocalData==true){h=true}if(g.saveLocalData==true){e=true}c.push(g.actionFunction);g.lastRunTime=f}}Kameleoon.Internals.Gatherer.LocalDataHandler.repeatedActionsLastLaunchTime=f;h=true}this.launchAction(function(){for(var k=0,j=c.length;k<j;++k){try{c[k]()}catch(m){}}}.bind(this),h,e)}.bind(this);window.setInterval(a,Math.min(this.ONE_SHOT_ACTIONS_INTERVAL,this.REPEATED_ACTIONS_INTERVAL))},registerAction:function(a,e,b,d){if(d.urgent==true){this.launchAction(a,e,b)}else{var c=parseInt(d.repeatInterval);if(isNaN(c)){Kameleoon.Internals.Gatherer.LocalDataHandler.oneShotActions.push({actionFunction:a,restoreLocalData:e,saveLocalData:b})}else{Kameleoon.Internals.Gatherer.LocalDataHandler.repeatedActions.push({actionFunction:a,restoreLocalData:e,saveLocalData:b,repeatInterval:c,lastRunTime:-c})}}},saveLocalData:function(){if(Kameleoon.Internals.Gatherer.useVisitCookie){Kameleoon.Gatherer.saveVisitCookie()}this.incrementNumberWrites();Kameleoon.Utils.saveStoredData(this.decrementNumberWrites.bind(this));Kameleoon.Internals.Gatherer.LocalDataHandler.saveLocalDataDelay=false},restoreLocalData:function(a){if(Kameleoon.Internals.Gatherer.useVisitCookie){Kameleoon.Gatherer.restoreVisitCookie()}Kameleoon.Utils.restoreStoredData(a)},launchAction:function(a,d,c){var b=function(){a();if(c){if(Kameleoon.Internals.Gatherer.saveLocalDataAllowed){this.saveLocalData()}else{Kameleoon.Internals.Gatherer.LocalDataHandler.saveLocalDataDelay=true}}}.bind(this);if(Kameleoon.Internals.Gatherer.LocalDataHandler.saveLocalDataDelay){this.saveLocalData();b()}else{if(d&&(Kameleoon.Internals.Gatherer.LocalDataHandler.numberWrites==0)&&Kameleoon.Internals.Gatherer.saveLocalDataAllowed){this.restoreLocalData(b)}else{b()}}},incrementNumberWrites:function(){Kameleoon.Internals.Gatherer.LocalDataHandler.numberWrites++},decrementNumberWrites:function(){Kameleoon.Internals.Gatherer.LocalDataHandler.numberWrites=Math.max(Kameleoon.Internals.Gatherer.LocalDataHandler.numberWrites-1,0)}}};Kameleoon.Visitor={STORED_DATA_NAME_PREFIX:"Kameleoon.Visitor.",init:function(){if(Kameleoon.Internals.Visitor==null){Kameleoon.Internals.Visitor={}}Kameleoon.Internals.Visitor.visits=[];Kameleoon.Internals.Visitor.currentVisit=null;Kameleoon.Internals.Visitor.totalVisits=0;Kameleoon.Internals.Visitor.timeStartedEldestVisit=null;Kameleoon.API.visits=[];Kameleoon.API.firstVisit=null;Kameleoon.API.currentVisit=null;Kameleoon.API.previousVisit=null;Kameleoon.API.visitor.totalVisits=Kameleoon.Internals.Visitor.totalVisits;Kameleoon.API.visitor.timeStartedEldestVisit=Kameleoon.Internals.Visitor.timeStartedEldestVisit},addVisit:function(a){Kameleoon.Internals.Visitor.visits.push(a);Kameleoon.Internals.Visitor.currentVisit=a;Kameleoon.Internals.Visitor.totalVisits++;if(Kameleoon.Internals.Visitor.timeStartedEldestVisit==null){Kameleoon.Internals.Visitor.timeStartedEldestVisit=a.timeStarted}this.updateAPIAfterCurrentVisitChange();Kameleoon.API.visitor.totalVisits=Kameleoon.Internals.Visitor.totalVisits;Kameleoon.API.visitor.timeStartedEldestVisit=Kameleoon.Internals.Visitor.timeStartedEldestVisit;var b=Kameleoon.Internals.Visitor.visits.length;var c=Math.max(1,Kameleoon.Internals.configuration.maxNumberLocalVisits);if(b>c){Kameleoon.Internals.Visitor.visits=Kameleoon.Internals.Visitor.visits.slice(b-c);Kameleoon.API.visits=Kameleoon.API.visits.slice(b-c);Kameleoon.API.firstVisit=Kameleoon.API.visits[0];if(c>1){Kameleoon.API.previousVisit=Kameleoon.API.visits[c-2]}else{Kameleoon.API.previousVisit=null}}},changePreviousVisits:function(d){if(Kameleoon.Internals.Visitor.currentVisit!=null){var b=Kameleoon.Internals.Visitor.currentVisit;this.init();for(var c=0,a=d.length;c<a;c++){this.addVisit(d[c])}this.addVisit(b)}},buildPreviousVisitsHistory:function(){var c=Kameleoon.PreviousVisitsHistory.create();for(var b=0,a=Kameleoon.Internals.Visitor.visits.length-1;b<a;++b){c.addVisit(Kameleoon.Internals.Visitor.visits[b])}return c},saveToStoredData:function(){var a=Kameleoon.Internals.Visitor.visits.length;Kameleoon.Internals.storedData[this.STORED_DATA_NAME_PREFIX+"numberVisits"]=a;for(var b=0;b<a;++b){Kameleoon.Internals.Visitor.visits[b].saveToStoredData(this.STORED_DATA_NAME_PREFIX+"visit"+b+".")}Kameleoon.Internals.storedData[this.STORED_DATA_NAME_PREFIX+"totalVisits"]=Kameleoon.Internals.Visitor.totalVisits;Kameleoon.Internals.storedData[this.STORED_DATA_NAME_PREFIX+"timeStartedEldestVisit"]=Kameleoon.Internals.Visitor.timeStartedEldestVisit},setupFromStoredData:function(f){var a=Kameleoon.Internals.storedData[this.STORED_DATA_NAME_PREFIX+"numberVisits"];this.init();if(a==null){if(f){var e=Kameleoon.Gatherer;var d=Kameleoon.Internals.configuration.Gatherer;var c=Kameleoon.Visit.create(d.trackingMode,d.siteCode,e.obtainFieldFromVisitCookieOrStoredData("visitorCode"),new Date(),0,e.obtainFieldFromVisitCookieOrStoredData("visitNumber"),e.obtainKeyPagesIndexes(),e.obtainReferrersIndexes(true),e.obtainTimeZoneGroupsIndexes(),e.obtainLanguageIndex(),e.obtainBrowserIndex(),e.obtainBrowserVersion(),e.obtainBrowserIsMobile(),e.obtainOSIndex(),e.obtainWindowWidth(),e.obtainWindowHeight(),e.obtainScreenWidth(),e.obtainScreenHeight(),e.obtainJavaEnabled(),e.obtainTimeZoneId(),e.obtainLocaleLanguageTag());this.addVisit(c)}}else{for(var b=0;b<a;++b){this.addVisit(Kameleoon.Visit.createFromStoredData(this.STORED_DATA_NAME_PREFIX+"visit"+b+"."))}Kameleoon.Internals.Visitor.totalVisits=Kameleoon.Internals.storedData[this.STORED_DATA_NAME_PREFIX+"totalVisits"];if(Kameleoon.Internals.Visitor.totalVisits==null){Kameleoon.Internals.Visitor.totalVisits=a;Kameleoon.Internals.Visitor.timeStartedEldestVisit=a>0?Kameleoon.Internals.Visitor.visits[0].timeStarted:null}else{Kameleoon.Internals.Visitor.timeStartedEldestVisit=Kameleoon.Internals.storedData[this.STORED_DATA_NAME_PREFIX+"timeStartedEldestVisit"]}Kameleoon.API.visitor.totalVisits=Kameleoon.Internals.Visitor.totalVisits;Kameleoon.API.visitor.timeStartedEldestVisit=Kameleoon.Internals.Visitor.timeStartedEldestVisit}},setupCurrentVisitFromStoredData:function(){if(Kameleoon.Internals.Visitor.currentVisit!=null){Kameleoon.Internals.Visitor.currentVisit=Kameleoon.Visit.createFromStoredData(this.STORED_DATA_NAME_PREFIX+"visit"+(Kameleoon.Internals.Visitor.visits.length-1)+".");this.updateAPIAfterCurrentVisitChange()}},addPage:function(c,a,b){if(Kameleoon.Internals.Visitor.currentVisit!=null){Kameleoon.Internals.Visitor.currentVisit.addPage(c,a,b);this.updateAPIAfterCurrentVisitChange()}},addActivity:function(a,b){if(Kameleoon.Internals.Visitor.currentVisit!=null){Kameleoon.Internals.Visitor.currentVisit.addActivity(a,b);this.updateAPIAfterCurrentVisitChange()}},addInterests:function(a,b){if(Kameleoon.Internals.Visitor.currentVisit!=null){Kameleoon.Internals.Visitor.currentVisit.addInterests(a,b);this.updateAPIAfterCurrentVisitChange()}},addSearch:function(c,d,b,a){if(Kameleoon.Internals.Visitor.currentVisit!=null){Kameleoon.Internals.Visitor.currentVisit.addSearch(c,d,b,a);this.updateAPIAfterCurrentVisitChange()}},addConversion:function(b,a){if(Kameleoon.Internals.Visitor.currentVisit!=null){Kameleoon.Internals.Visitor.currentVisit.addConversion(b,a);this.updateAPIAfterCurrentVisitChange()}},addAction:function(b,a){if(Kameleoon.Internals.Visitor.currentVisit!=null){Kameleoon.Internals.Visitor.currentVisit.addAction(b,a);this.updateAPIAfterCurrentVisitChange()}},addExperiment:function(a,c,b){if(Kameleoon.Internals.Visitor.currentVisit!=null){Kameleoon.Internals.Visitor.currentVisit.addExperiment(a,c,b);this.updateAPIAfterCurrentVisitChange()}},addPersonalization:function(a,c,b){if(Kameleoon.Internals.Visitor.currentVisit!=null){Kameleoon.Internals.Visitor.currentVisit.addPersonalization(a,c,b);this.updateAPIAfterCurrentVisitChange()}},addWeather:function(a,c,e,b,f,d){if(Kameleoon.Internals.Visitor.currentVisit!=null){Kameleoon.Internals.Visitor.currentVisit.addWeather(a,c,e,b,f,d);this.updateAPIAfterCurrentVisitChange()}},addCustomData:function(a,c,b){if(Kameleoon.Internals.Visitor.currentVisit!=null){Kameleoon.Internals.Visitor.currentVisit.addCustomData(a,c,b);this.updateAPIAfterCurrentVisitChange()}},addTabCount:function(b,a){if(Kameleoon.Internals.Visitor.currentVisit!=null){Kameleoon.Internals.Visitor.currentVisit.addTabCount(b,a);this.updateAPIAfterCurrentVisitChange()}},addProductPage:function(a){if(Kameleoon.Internals.Visitor.currentVisit!=null){Kameleoon.Internals.Visitor.currentVisit.addProductPage(a);this.updateAPIAfterCurrentVisitChange()}},updateAPIAfterCurrentVisitChange:function(){var a=Kameleoon.Internals.Visitor.visits.length;Kameleoon.API.visits[a-1]=Kameleoon.Internals.Visitor.currentVisit.buildVisitForAPI();Kameleoon.API.firstVisit=Kameleoon.API.visits[0];Kameleoon.API.currentVisit=Kameleoon.API.visits[a-1];if(a>1){Kameleoon.API.previousVisit=Kameleoon.API.visits[a-2]}},obtainKeyPageIsVisited:function(c){for(var b=0,a=Kameleoon.Internals.Visitor.visits.length;b<a;++b){if(Kameleoon.Internals.Visitor.visits[b].obtainKeyPageIsVisited(c)){return true}}return false},obtainKeyWordIsSearched:function(c){for(var b=0,a=Kameleoon.Internals.Visitor.visits.length;b<a;++b){if(Kameleoon.Internals.Visitor.visits[b].obtainKeyWordIsSearched(c)){return true}}return false},obtainInterestIsActive:function(c){for(var b=0,a=Kameleoon.Internals.Visitor.visits.length;b<a;++b){if(Kameleoon.Internals.Visitor.visits[b].obtainInterestIsActive(c)){return true}}return false},obtainReferrerIsPresent:function(c){for(var b=0,a=Kameleoon.Internals.Visitor.visits.length;b<a;++b){if(Kameleoon.Internals.Visitor.visits[b].obtainReferrerIsPresent(c)){return true}}return false}};Kameleoon.Visit={create:function(v,i,b,r,c,q,j,a,h,n,t,k,l,e,u,g,o,s,d,p,m){var f={};f.trackingMode=v;f.siteCode=i;f.visitorCode=b;f.timeStarted=r.getTime();f.timeLastActivity=r.getTime();f.actionsTakenIds=[];f.actionsTakenIdsWithMentalistDecision={};f.wholeVisitHistory=Kameleoon.VisitHistory.create(r);f.actionTakenHistoryByActionId={};f.timeSincePreviousVisit=c;f.visitNumber=q;f.landingPages=j;f.firstReferrers=this.replaceReferrersIfInternal(a);f.timeZoneGroups=h;f.language=n;f.browser=t;f.browserVersion=k;f.mobileBrowser=l;f.os=e;f.windowWidth=u;f.windowHeight=g;f.screenWidth=o;f.screenHeight=s;f.javaEnabled=d;f.temperature=null;f.humidity=null;f.pressure=null;f.windSpeed=null;f.cloudiness=null;f.valueByCustomDatum={};f.conversionCountByGoalId={};f.revenueCountByGoalId={};f.variationIdByExperimentId={};f.mentalistDecisionByExperimentId={};f.variationIdByPersonalizationId={};f.mentalistDecisionByPersonalizationId={};f.weatherCode=null;f.productPageProductCodes={};f.timeZoneId=p;f.localeLanguageTag=m;f.originalReferrer=document.referrer;f.originalLandingPage=window.location.href;this.createBinds(f);return f},createFromStoredData:function(f){var e=function(h,g){b[h]=Kameleoon.Internals.storedData[f+h];b[h]=(b[h]===undefined?g:b[h])}.bind(this);var b={};e("trackingMode",Kameleoon.Internals.configuration.Gatherer.trackingMode);e("siteCode",Kameleoon.Internals.configuration.Gatherer.siteCode);e("visitorCode","");e("timeStarted",0);e("timeLastActivity",0);e("actionsTakenIds",[]);e("actionsTakenIdsWithMentalistDecision",{});b.wholeVisitHistory=Kameleoon.VisitHistory.createFromStoredData(f+"wholeVisitHistory.");b.actionTakenHistoryByActionId={};for(var d=0,a=b.actionsTakenIds.length;d<a;d++){var c=b.actionsTakenIds[d];b.actionTakenHistoryByActionId[c]=Kameleoon.VisitHistory.createFromStoredData(f+"actionTakenId"+c+".")}e("timeSincePreviousVisit",0);e("visitNumber",0);e("landingPages",[null]);e("firstReferrers",[null]);e("timeZoneGroups",[null]);e("language",null);e("browser",null);e("browserVersion",null);e("mobileBrowser",false);e("os",null);e("windowWidth",null);e("windowHeight",null);e("screenWidth",null);e("screenHeight",null);e("javaEnabled",false);e("temperature",null);e("humidity",null);e("pressure",null);e("windSpeed",null);e("cloudiness",null);e("valueByCustomDatum",{});e("conversionCountByGoalId",{});e("revenueCountByGoalId",{});e("variationIdByExperimentId",{});e("mentalistDecisionByExperimentId",{});e("variationIdByPersonalizationId",{});e("mentalistDecisionByPersonalizationId",{});e("weatherCode",null);e("productPageProductCodes",{});e("timeZoneId","UTC");e("localeLanguageTag","en");e("originalReferrer","");e("originalLandingPage","");this.createBinds(b);return b},convertVisitFromServer:function(d){var c=d.actionsTakenIdsWithMentalistDecision;d.actionsTakenIdsWithMentalistDecision={};for(var b=0,a=c.length;b<a;++b){d.actionsTakenIdsWithMentalistDecision[c[b]]=true}Kameleoon.VisitHistory.convertVisitHistoryFromServer(d.wholeVisitHistory);for(var f in d.actionTakenHistoryByActionId){Kameleoon.VisitHistory.convertVisitHistoryFromServer(d.actionTakenHistoryByActionId[f])}var e=d.productPageProductCodes;d.productPageProductCodes={};for(var b=0,a=e.length;b<a;++b){d.productPageProductCodes[e[b]]=true}this.createBinds(d)},computeReferrersIsInternal:function(a){return(a.length==1)&&(a[0]==-1)},replaceReferrersIfInternal:function(a){if(this.computeReferrersIsInternal(a)){return[null]}return a},mergeCustomDataValueForCollection:function(f,e){if(e!=null){if(e instanceof Array){for(var d=0,b=e.length;d<b;++d){this.mergeCustomDataValueForCollection(f,e[d])}}else{var c,a;if(e.value!=null){c=e.value;a=e.count;if(a==null){a=1}}else{c=e;a=1}this.mergeCountCustomDataValueForCollection(f,c,a)}}},mergeCountCustomDataValueForCollection:function(f,d,c){for(var e=0,b=f.length;e<b;++e){var a=f[e];if(a.value===d){a.count+=c;return}}f.push({value:d,count:c})},createBinds:function(a){a.saveToStoredData=function(f){var c=function(g){Kameleoon.Internals.storedData[f+g]=this[g]}.bind(this);c("trackingMode");c("siteCode");c("visitorCode");c("timeStarted");c("timeLastActivity");c("actionsTakenIds");c("actionsTakenIdsWithMentalistDecision");this.wholeVisitHistory.saveToStoredData(f+"wholeVisitHistory.");for(var e=0,b=this.actionsTakenIds.length;e<b;e++){var d=this.actionsTakenIds[e];this.actionTakenHistoryByActionId[d].saveToStoredData(f+"actionTakenId"+d+".")}c("timeSincePreviousVisit");c("visitNumber");c("landingPages");c("firstReferrers");c("timeZoneGroups");c("language");c("browser");c("browserVersion");c("mobileBrowser");c("os");c("windowWidth");c("windowHeight");c("screenWidth");c("screenHeight");c("javaEnabled");c("temperature");c("humidity");c("pressure");c("windSpeed");c("cloudiness");c("valueByCustomDatum");c("conversionCountByGoalId");c("revenueCountByGoalId");c("variationIdByExperimentId");c("mentalistDecisionByExperimentId");c("variationIdByPersonalizationId");c("mentalistDecisionByPersonalizationId");c("weatherCode");c("productPageProductCodes");c("timeZoneId");c("localeLanguageTag");c("originalReferrer");c("originalLandingPage")};a.buildVisitForAPI=function(){var f=Kameleoon.Internals.configuration;var d=Kameleoon.Internals.configuration.Gatherer;var h={};h.visitorCode=this.visitorCode;h.timeStarted=this.timeStarted;h.timeLastActivity=this.timeLastActivity;h.timeSincePreviousVisit=this.timeSincePreviousVisit;h.visitNumber=this.visitNumber;if(d.languages.length>0){h.language=(this.language==null)?"<OTHER / UNKNOWN>":d.languages[this.language].code}h.environment={};h.environment.browser=(this.browser==null)?"<OTHER / UNKNOWN>":d.browsers[this.browser].name;h.environment.browserVersion=this.browserVersion;h.environment.mobileBrowser=this.mobileBrowser;h.environment.os=(this.os==null)?"<OTHER / UNKNOWN>":d.oss[this.os].name;h.environment.windowWidth=this.windowWidth;h.environment.windowHeight=this.windowHeight;h.environment.screenWidth=this.screenWidth;h.environment.screenHeight=this.screenHeight;h.environment.timeZone=this.timeZoneId;h.acquisition={};h.acquisition.landingPages=[];for(var r=0,q=this.landingPages.length;r<q;r++){var m=this.landingPages[r];h.acquisition.landingPages.push((m==null)?"<OTHER / UNKNOWN>":d.keyPages[m].name)}h.acquisition.referrers=[];for(var r=0,q=this.firstReferrers.length;r<q;r++){var b=this.firstReferrers[r];h.acquisition.referrers.push((b==null)?"<OTHER / UNKNOWN>":(b==0?"<RESTART>":d.referrers[b-1].name))}h.weather={};h.weather.temperature=this.temperature;h.weather.humidity=this.humidity;h.weather.pressure=this.pressure;h.weather.windSpeed=this.windSpeed;h.weather.cloudiness=this.cloudiness;h.weather.code=this.weatherCode;h.customData={};for(var o in this.valueByCustomDatum){var k=d.customData[o];var y=this.valueByCustomDatum[o];if(k.type=="LIST"){var t=[];for(var r=0,q=y.length;r<q;++r){t.push(y[r].value)}h.customData[k.name]=t}else{h.customData[k.name]=y}}h.conversions=[];if(f.goals){for(var r=0,q=f.goals.length;r<q;++r){var j=f.goals[r];var c=this.conversionCountByGoalId[j.id];if((c!=null)&&(c>0)){var v=this.revenueCountByGoalId[j.id];if(v==null){v=0}h.conversions.push({goalName:j.name,goalId:j.id,count:c,revenue:v})}}}h.activeExperiments=[];if(f.experiments){for(var r=0,q=f.experiments.length;r<q;++r){var g=f.experiments[r];var s=g.id;var w=g.registeredVariationId;if(w){var n={id:s,name:g.name,variationId:w};var u=Kameleoon.Analyst.findVariation(w);if(u){n.variationName=u.name}if(this.mentalistDecisionByExperimentId[s]){n.mentalistDecision=true}h.activeExperiments.push(n)}}}h.activePersonalizations=[];if(f.personalizations){for(var r=0,q=f.personalizations.length;r<q;++r){var x=f.personalizations[r];var p=x.id;var w=this.variationIdByPersonalizationId[p];if(w!==undefined){var n={id:p,name:x.name,exposed:(w!=null)};if(this.mentalistDecisionByPersonalizationId[p]){n.mentalistDecision=true}h.activePersonalizations.push(n)}}}h.productPageProductCodes={};for(var e in this.productPageProductCodes){h.productPageProductCodes[e]=this.productPageProductCodes[e]}h.interests=[];for(var z in this.wholeVisitHistory.activeInterests){h.interests.push(d.interests[z].name)}h.acquisition.originalReferrer=this.originalReferrer;h.acquisition.originalLandingPage=this.originalLandingPage;h.pageViews=this.wholeVisitHistory.timesStartedPages.length;h.timeSpent=this.timeLastActivity-this.timeStarted;return h};a.addPage=function(d,b,c){this.addActivity(d,true);this.wholeVisitHistory.addPage(d,b,c)};a.addActivity=function(b,c){if(c){this.timeLastActivity=b.getTime()}this.wholeVisitHistory.addActivity(b,c)};a.addInterests=function(b,c){this.wholeVisitHistory.addInterests(c)};a.addSearch=function(d,e,c,b){this.addActivity(d,true);this.wholeVisitHistory.addSearch(d,e,c,b)};a.addConversion=function(e,b){var c=this.conversionCountByGoalId[e];if(c==null){c=0}this.conversionCountByGoalId[e]=c+1;var d=this.revenueCountByGoalId[e];if(d==null){d=0}this.revenueCountByGoalId[e]=d+b};a.addAction=function(c,b){if(this.actionTakenHistoryByActionId[c]==null){this.actionsTakenIds.push(c);if(b){this.actionsTakenIdsWithMentalistDecision[c]=true}this.actionTakenHistoryByActionId[c]=Kameleoon.VisitHistory.createCopy(this.wholeVisitHistory)}};a.addExperiment=function(b,d,c){this.variationIdByExperimentId[b]=d;this.mentalistDecisionByExperimentId[b]=c};a.addPersonalization=function(b,d,c){this.variationIdByPersonalizationId[b]=d;this.mentalistDecisionByPersonalizationId[b]=c};a.addWeather=function(b,d,f,c,g,e){if(this.temperature==null){this.temperature=b}if(this.humidity==null){this.humidity=d}if(this.pressure==null){this.pressure=f}if(this.windSpeed==null){this.windSpeed=c}if(this.cloudiness==null){this.cloudiness=g}if(this.weatherCode==null){this.weatherCode=e}};a.addCustomData=function(b,f,e){if(f!=null){var c=Kameleoon.Internals.configuration.Gatherer.customData[b].type;var d=(c=="LIST")||(c=="COUNT_LIST");if(d){if(e||(this.valueByCustomDatum[b]==null)){this.valueByCustomDatum[b]=[]}Kameleoon.Visit.mergeCustomDataValueForCollection(this.valueByCustomDatum[b],f)}else{this.valueByCustomDatum[b]=f}}};a.addTabCount=function(c,b){this.wholeVisitHistory.addTabCount(b)};a.addProductPage=function(b){this.productPageProductCodes[b]=true};a.obtainKeyPageIsVisited=function(b){return this.wholeVisitHistory.obtainKeyPageIsVisited(b)};a.obtainKeyWordIsSearched=function(b){return this.wholeVisitHistory.obtainKeyWordIsSearched(b)};a.obtainInterestIsActive=function(b){return this.wholeVisitHistory.obtainInterestIsActive(b)};a.obtainReferrerIsPresent=function(b){return this.wholeVisitHistory.obtainReferrerIsPresent(b)};a.obtainNumberConversions=function(c){var b=this.conversionCountByGoalId[c];return(b==null?0:b)};a.obtainMeanPageDuration=function(){var c=new Date();var b=Kameleoon.OnlineMeanAndDeviation.createFromDifferences(this.wholeVisitHistory.timesStartedPages,false,true,true);b.update(c.getTime()-this.wholeVisitHistory.timesStartedPages[this.wholeVisitHistory.timesStartedPages.length-1]);return b.mean}}};Kameleoon.VisitHistory={create:function(b){var a={};a.timesStartedPages=[];a.timesReferrers=[];a.timesSearches=[];a.keyPages=[];a.searchesNumberResults=[];a.searchesFollowed=[];a.timeLastActivity=b.getTime();a.timeLastInactivity=b.getTime();a.referrers=[];a.keyWords=[];a.activeInterests={};a.maxTabCount=null;this.createBinds(a);return a},createCopy:function(c){var a={};a.timesStartedPages=c.timesStartedPages.slice(0);a.timesReferrers=c.timesReferrers.slice(0);a.timesSearches=c.timesSearches.slice(0);a.keyPages=[];for(var b=0;b<c.keyPages.length;b++){a.keyPages.push(c.keyPages[b].slice(0))}a.searchesNumberResults=c.searchesNumberResults.slice(0);a.searchesFollowed=c.searchesFollowed.slice(0);a.timeLastActivity=c.timeLastActivity;a.timeLastInactivity=c.timeLastInactivity;a.referrers=[];for(var b=0;b<c.referrers.length;b++){a.referrers.push(c.referrers[b].slice(0))}a.keyWords=[];for(var b=0;b<c.keyWords.length;b++){a.keyWords.push(c.keyWords[b].slice(0))}a.activeInterests={};for(var b in c.activeInterests){a.activeInterests[b]=c.activeInterests[b]}a.maxTabCount=c.maxTabCount;this.createBinds(a);return a},createFromStoredData:function(f){var e=function(i,h){a[i]=Kameleoon.Internals.storedData[f+i];a[i]=(a[i]===undefined?h:a[i])}.bind(this);var a={};e("timesStartedPages",[]);e("timesReferrers",[]);e("timesSearches",[]);e("keyPages",[]);var b=a.timesSearches.length;var g=[];var d=[];for(var c=0;c<b;c++){g[c]=0;d[c]=false}e("searchesNumberResults",g);e("searchesFollowed",d);e("timeLastActivity",0);e("timeLastInactivity",0);e("referrers",[]);e("keyWords",[]);e("activeInterests",{});e("maxTabCount",null);this.createBinds(a);return a},convertVisitHistoryFromServer:function(c){var d=c.activeInterests;c.activeInterests={};for(var b=0,a=d.length;b<a;++b){c.activeInterests[d[b]]=true}this.createBinds(c)},createBinds:function(a){a.saveToStoredData=function(c){var b=function(d){Kameleoon.Internals.storedData[c+d]=this[d]}.bind(this);b("timesStartedPages");b("timesReferrers");b("timesSearches");b("keyPages");b("searchesNumberResults");b("searchesFollowed");b("timeLastActivity");b("timeLastInactivity");b("referrers");b("keyWords");b("activeInterests");b("maxTabCount")};a.buildVisitHistoryForAPI=function(){var q=Kameleoon.Internals.configuration.Gatherer;var d={};d.timesStartedPages=this.timesStartedPages.slice(0);d.timesReferrers=this.timesReferrers.slice(0);d.timesSearches=this.timesSearches.slice(0);d.keyPages=[];for(var n=0,g=this.keyPages.length;n<g;n++){var u=this.keyPages[n];var c=[];for(var h=0,e=u.length;h<e;h++){var p=u[h];c.push((p==null)?"<OTHER / UNKNOWN>":q.keyPages[p].name)}d.keyPages.push(c)}d.searchesNumberResults=this.searchesNumberResults.slice(0);d.searchesFollowed=this.searchesFollowed.slice(0);d.timeLastActivity=this.timeLastActivity;d.timeLastInactivity=this.timeLastInactivity;d.referrers=[];for(var n=0,g=this.referrers.length;n<g;n++){var b=this.referrers[n];var k=[];for(var h=0,e=b.length;h<e;h++){var r=b[h];k.push((r==null)?"<OTHER / UNKNOWN>":(r==0?"<RESTART>":q.referrers[r-1].name))}d.referrers.push(k)}d.keyWords=[];for(var n=0,g=this.keyWords.length;n<g;n++){var f=this.keyWords[n];var o=[];for(var h=0,e=f.length;h<e;h++){var t=f[h];o.push((t==null)?"<OTHER / UNKNOWN>":q.keyWords[t].name)}d.keyWords.push(o)}d.activeInterests={};for(var s in this.activeInterests){d.activeInterests[q.interests[s].name]=this.activeInterests[s]}d.maxTabCount=this.maxTabCount;return d};a.addPage=function(d,b,c){this.timesStartedPages.push(d.getTime());this.keyPages.push(b);if(this.obtainShouldStoreReferrers(c)){this.timesReferrers.push(d.getTime());this.referrers.push(Kameleoon.Visit.replaceReferrersIfInternal(c));return true}return false};a.obtainShouldStoreReferrers=function(b){return(this.referrers.length==0)||(!Kameleoon.Visit.computeReferrersIsInternal(b))};a.addActivity=function(b,c){if(c){this.timeLastActivity=b.getTime()}else{this.timeLastInactivity=b.getTime()}};a.addInterests=function(d){for(var c=0,b=d.length;c<b;c++){this.activeInterests[d[c]]=true}};a.addSearch=function(d,e,c,b){this.timesSearches.push(d.getTime());this.keyWords.push(e);this.searchesNumberResults.push(c);this.searchesFollowed.push(b)};a.addTabCount=function(b){if((this.maxTabCount==null)||(b>this.maxTabCount)){this.maxTabCount=b}};a.obtainKeyPageIsVisited=function(g){for(var e=0,c=this.keyPages.length;e<c;e++){var f=this.keyPages[e];for(var d=0,b=f.length;d<b;d++){if(g==f[d]){return true}}}return false};a.obtainKeyWordIsSearched=function(g){for(var e=0,c=this.keyWords.length;e<c;e++){var f=this.keyWords[e];for(var d=0,b=f.length;d<b;d++){if(g==f[d]){return true}}}return false};a.obtainInterestIsActive=function(b){return this.activeInterests[b]};a.obtainReferrerIsPresent=function(f){var g=(f==null?null:f+1);for(var e=0,c=this.referrers.length;e<c;e++){var h=this.referrers[e];for(var d=0,b=h.length;d<b;d++){if(h[d]==g){return true}}}return false}}};Kameleoon.PreviousVisitsHistory={create:function(){var a={};a.timesStartedVisits=[];a.timesLastActivityVisits=[];a.timesStartedPages=[];a.timesReferrers=[];a.timesSearches=[];a.keyPages=[];a.searchesNumberResults=[];a.searchesFollowed=[];a.referrers=[];a.keyWords=[];a.activeInterests={};a.conversionCountByGoalId={};a.revenueCountByGoalId={};a.maxTabCountsVisits=[];this.createBinds(a);return a},createBinds:function(a){a.addVisit=function(e){var f=e.wholeVisitHistory;this.timesStartedVisits.push(e.timeStarted);this.timesLastActivityVisits.push(e.timeLastActivity);this.timesStartedPages=this.timesStartedPages.concat(f.timesStartedPages);this.timesReferrers=this.timesReferrers.concat(f.timesReferrers);this.timesSearches=this.timesSearches.concat(f.timesSearches);this.keyPages=this.keyPages.concat(f.keyPages);this.searchesNumberResults=this.searchesNumberResults.concat(f.searchesNumberResults);this.searchesFollowed=this.searchesFollowed.concat(f.searchesFollowed);this.referrers=this.referrers.concat(f.referrers);this.keyWords=this.keyWords.concat(f.keyWords);for(var d in f.activeInterests){this.activeInterests[d]=this.activeInterests[d]||f.activeInterests[d]}for(var g in e.conversionCountByGoalId){var b=this.conversionCountByGoalId[g];if(b==null){b=0}this.conversionCountByGoalId[g]=b+e.conversionCountByGoalId[g]}for(var g in e.revenueCountByGoalId){var c=this.revenueCountByGoalId[g];if(c==null){c=0}this.revenueCountByGoalId[g]=c+e.revenueCountByGoalId[g]}this.maxTabCountsVisits.push(f.maxTabCount)}}};Kameleoon.OnlineMeanAndDeviation={create:function(){var a={};a.mean=0;a.m2=0;a.numberUpdates=0;this.createBinds(a);return a},createFromDifferences:function(h,j,f,g){var a=this.create();var e=h.length;var c=0;if(c<e){var d=h[c];c++;while(c<e){var b=h[c];c++;var k=b-d;if(((k<0)&&j)||((k==0)&&f)||((k>0)&&g)){a.update(k)}d=b}}return a},createFromValues:function(c){var b=this.create();for(var d=0,a=c.length;d<a;d++){b.update(c[d])}return b},createFromBooleanValues:function(c){var b=this.create();for(var d=0,a=c.length;d<a;d++){b.update(c[d]?1:0)}return b},createBinds:function(a){a.update=function(b){this.numberUpdates++;var c=b-this.mean;this.mean=this.mean+(c/this.numberUpdates);this.m2=this.m2+(c*(b-this.mean))};a.obtainDeviation=function(){return this.m2==0?0:Math.sqrt(this.m2/this.numberUpdates)}}};
Kameleoon.Internals = {"requestedVariations":[],"configuration":{"siteCode":"1a2uz45bg1","memberCode":"0","analyst":true,"variations":[{"name":"Variante A","id":81572,"builtCssCodeLevel2":"","elementSets":[]},{"name":"CartWithoutRecommendations","id":94375,"builtCssCodeLevel2":"","elementSets":[],"javaScriptCode":{"code":"/** Kameleoon A-B testing JS snippet, hide cart reco */\n;(function(){\n    /** @var int poolerLimit Block dom pooler after 5s */\n    var poolerLimit   = 50,\n        /** @var int poolerCounter Dom pooler counter */\n        poolerCounter = 0,\n        /** @var HTMLElement cartRecommendation The dom node for cartRecommendation */\n        cartRecommendation = null,\n        /** @var int domPooler Reference to the dom pooler */\n        domPooler = setInterval(function(){\n\n            cartRecommendation = document.getElementById(\"cartRecommendation\");\n            if (cartRecommendation !== null) {\n                if (\"parentNode\" in cartRecommendation && \"removeChild\" in cartRecommendation.parentNode) {\n                    cartRecommendation.parentNode.removeChild(cartRecommendation);\n                    clearInterval(domPooler);\n                    return;\n                }\n            }\n\n            poolerCounter++;\n            if (poolerCounter >= poolerLimit) {\n                clearInterval(domPooler);\n                return;\n            }\n        }, 100);\n})();","afterDOMReady":false}},{"id":"reference","name":"Reference","builtCssCodeLevel2":"","elementSets":[]}],"experiments":[{"id":13451,"name":"Test_Debug","baseURL":"http://www.alittlemarket.com/","variations":[{"name":"Reference","id":"reference","deviation":0.5},{"name":"Variante A","id":81572,"deviation":0.5}],"experimentContainer":true,"multiVariateTest":false,"googleAnalyticsTracking":{"tracker":"","eventCallDelayed":false,"customVariable":4},"kameleoonTracking":{"mainGoalMasterId":null,"mainGoalId":3056,"mainGoalName":"order"},"targetingSegment":[]},{"id":18843,"name":"Cart recommender system","baseURL":"http://www.alittlemarket.com/?kameleoon=true","variations":[{"name":"Reference","id":"reference","deviation":0.5},{"name":"CartWithoutRecommendations","id":94375,"deviation":0.5}],"experimentContainer":true,"multiVariateTest":false,"googleAnalyticsTracking":{"tracker":"","eventCallDelayed":false,"customVariable":5},"kameleoonTracking":{"mainGoalMasterId":156,"mainGoalId":6200,"mainGoalName":"Achat"},"targetingSegment":[{"type":"PAGE_URL","subconditions":[{"value":"/(cart)$","flags":"","include":true,"disabled":false}]}]}],"personalizations":[],"disableWhenTimeout":false,"disableVisitWhenTimeout":false,"personalizationsDeviation":1.0,"pausedExperiments":[5755,7718,9484,11488,11858,17912],"googleAnalytics":true,"googleAnalyticsAllowAnchor":true,"googleAnalyticsTracker":null,"goals":[{"id":3536,"name":"Engagement","type":"ENGAGEMENT","multipleConversions":true,"mentalistWeight":0.0},{"id":3053,"name":"Inscription","type":"CUSTOM","multipleConversions":false,"mentalistWeight":0.0},{"id":3635,"name":"Page Paiement","type":"URL","multipleConversions":false,"url":"(.*)/cart/payment(.*)","mentalistWeight":0.0},{"id":3056,"name":"order","type":"CUSTOM","multipleConversions":true,"mentalistWeight":0.0},{"id":156,"name":"Achat","type":"URL","multipleConversions":false,"url":"(.*)/cart/finished(.*)","mentalistWeight":0.0},{"id":3044,"name":"Conversion Achat","type":"CUSTOM","multipleConversions":false,"mentalistWeight":0.0},{"id":6200,"name":"Achat","type":"URL","multipleConversions":false,"url":"(.*)/cart/finished(.*)","mentalistWeight":0.0,"masterGoalId":156,"masterGoalName":"Achat","linkedExperimentId":18843}],"checkTestedTrafficActive":false,"sizzle":true,"maxNumberLocalVisits":25}};
Kameleoon.Internals.configuration.Gatherer = "eyJzaXRlQ29kZSI6IjFhMnV6NDViZzEiLCJ0cmFja2luZ05vZGVzIjpbXSwidHJhY2tpbmdNb2RlIjoibWVkaXVtIiwiZGVidWdMZXZlbCI6NCwiaW50ZXJlc3RzIjpbXSwiaW50ZXJlc3RzSW1hZ2VzTGlzdHMiOltdLCJ0aW1lWm9uZUdyb3VwcyI6W3sidGltZVpvbmVzIjpbIkVVUk9QRS9CRVJMSU4iXSwiZGlzYWJsZWQiOmZhbHNlfV0sImxhbmd1YWdlcyI6W3siY29kZSI6IkZSIiwiZGlzYWJsZWQiOmZhbHNlfV0sImJyb3dzZXJzIjpbeyJuYW1lIjoiQ0hST01FIiwiZGlzYWJsZWQiOmZhbHNlfSx7Im5hbWUiOiJFWFBMT1JFUiIsImRpc2FibGVkIjpmYWxzZX0seyJuYW1lIjoiRklSRUZPWCIsImRpc2FibGVkIjpmYWxzZX0seyJuYW1lIjoiU0FGQVJJIiwiZGlzYWJsZWQiOmZhbHNlfSx7Im5hbWUiOiJPUEVSQSIsImRpc2FibGVkIjpmYWxzZX1dLCJvc3MiOlt7Im5hbWUiOiJXSU5ET1dTIiwiZGlzYWJsZWQiOmZhbHNlfSx7Im5hbWUiOiJNQUMiLCJkaXNhYmxlZCI6ZmFsc2V9LHsibmFtZSI6IklPUyIsImRpc2FibGVkIjpmYWxzZX0seyJuYW1lIjoiTElOVVgiLCJkaXNhYmxlZCI6ZmFsc2V9XSwiYWxpYXNTaXRlcyI6W10sIm5vUmVmZXJyZXJQYWdlcyI6W10sImRpcmVjdE5vbmVSZWZlcnJlck9ubHlGaXJzdCI6ZmFsc2UsInJlZmVycmVycyI6W3sicHJpb3JpdHkiOjAsInRhZyI6IiIsIm5hbWUiOiJTRU8iLCJkZXRlY3Rpb25zIjpbeyJhbmRQYXJhbWV0ZXJzIjoiIiwibWV0aG9kIjoiUkVGRVJSRVJfUkVHRVgiLCJwYXJhbWV0ZXJzIjoiXi4rXFwuZ29vZ2xlKFxcLmNvbT8pP1xcLlteL1xcLl0rLy4qW1xcPyYjXXE9LiooW1xcPyYjXS4qfCkkIiwiYW5kTWV0aG9kIjoiIiwiYW5kIjpmYWxzZX0seyJhbmRQYXJhbWV0ZXJzIjoiIiwibWV0aG9kIjoiUkVGRVJSRVJfUkVHRVgiLCJwYXJhbWV0ZXJzIjoiXi4rXFwuZ29vZ2xlKFxcLmNvbT8pP1xcLlteL1xcLl0rLz8kIiwiYW5kTWV0aG9kIjoiIiwiYW5kIjpmYWxzZX0seyJhbmRQYXJhbWV0ZXJzIjoiIiwibWV0aG9kIjoiUkVGRVJSRVJfUkVHRVgiLCJwYXJhbWV0ZXJzIjoiXi4rXFwuYmluZ1xcLlteL1xcLl0rLy4qW1xcPyYjXXE9LiooW1xcPyYjXS4qfCkkIiwiYW5kTWV0aG9kIjoiIiwiYW5kIjpmYWxzZX0seyJhbmRQYXJhbWV0ZXJzIjoiIiwibWV0aG9kIjoiUkVGRVJSRVJfUkVHRVgiLCJwYXJhbWV0ZXJzIjoiXi4rXFwueWFob29cXC5bXi9cXC5dKy8uKltcXD8mI11wPS4qKFtcXD8mI10uKnwpJCIsImFuZE1ldGhvZCI6IiIsImFuZCI6ZmFsc2V9LHsiYW5kUGFyYW1ldGVycyI6IiIsIm1ldGhvZCI6IlJFRkVSUkVSX1JFR0VYIiwicGFyYW1ldGVycyI6Il4uK1xcLmJhaWR1XFwuW14vXFwuXSsvLipbXFw/JiNdd2Q9LiooW1xcPyYjXS4qfCkkIiwiYW5kTWV0aG9kIjoiIiwiYW5kIjpmYWxzZX1dLCJkaXNhYmxlZCI6ZmFsc2V9LHsicHJpb3JpdHkiOjAsInRhZyI6IiIsIm5hbWUiOiJFbWFpbCBjYW1wYWlnbiIsImRldGVjdGlvbnMiOlt7ImFuZFBhcmFtZXRlcnMiOiIiLCJtZXRob2QiOiJVUkxfUkVHRVgiLCJwYXJhbWV0ZXJzIjoiW1xcPyYjXXV0bV9zb3VyY2U9W05uXWV3c2xldHRlcihbXFw/JiNdLip8KSQiLCJhbmRNZXRob2QiOiIiLCJhbmQiOmZhbHNlfV0sImRpc2FibGVkIjpmYWxzZX0seyJwcmlvcml0eSI6MCwidGFnIjoiIiwibmFtZSI6IkFMaXR0bGVNZXJjZXJpZSIsImRldGVjdGlvbnMiOlt7ImFuZFBhcmFtZXRlcnMiOiIiLCJtZXRob2QiOiJSRUZFUlJFUl9SRUdFWCIsInBhcmFtZXRlcnMiOiIuKmFsaXR0bGVtZXJjZXJpZS4qIiwiYW5kTWV0aG9kIjoiIiwiYW5kIjpmYWxzZX1dLCJkaXNhYmxlZCI6ZmFsc2V9LHsicHJpb3JpdHkiOjAsInRhZyI6IiIsIm5hbWUiOiJGYWNlYm9vayIsImRldGVjdGlvbnMiOlt7ImFuZFBhcmFtZXRlcnMiOiIiLCJtZXRob2QiOiJSRUZFUlJFUl9SRUdFWCIsInBhcmFtZXRlcnMiOiIuKmZhY2Vib29rLmNvbS4qIiwiYW5kTWV0aG9kIjoiIiwiYW5kIjpmYWxzZX1dLCJkaXNhYmxlZCI6ZmFsc2V9LHsicHJpb3JpdHkiOjAsInRhZyI6IiIsIm5hbWUiOiJUd2l0dGVyIiwiZGV0ZWN0aW9ucyI6W3siYW5kUGFyYW1ldGVycyI6IiIsIm1ldGhvZCI6IlVSTF9SRUdFWCIsInBhcmFtZXRlcnMiOiJbXFw/JiNddXRtX3NvdXJjZT10d2l0dGVyKFtcXD8mI10uKnwpJCIsImFuZE1ldGhvZCI6IiIsImFuZCI6ZmFsc2V9XSwiZGlzYWJsZWQiOmZhbHNlfSx7InByaW9yaXR5IjotMiwidGFnIjoiIiwibmFtZSI6IlJlcHV0YXRpb24iLCJkZXRlY3Rpb25zIjpbeyJhbmRQYXJhbWV0ZXJzIjoiIiwibWV0aG9kIjoiUkVGRVJSRVJfUkVHRVgiLCJwYXJhbWV0ZXJzIjoiTElUVExFIE1BUktFVCIsImFuZE1ldGhvZCI6IiIsImFuZCI6ZmFsc2V9LHsiYW5kUGFyYW1ldGVycyI6IiIsIm1ldGhvZCI6IlJFRkVSUkVSX1JFR0VYIiwicGFyYW1ldGVycyI6IiIsImFuZE1ldGhvZCI6IiIsImFuZCI6ZmFsc2V9XSwiZGlzYWJsZWQiOmZhbHNlfV0sImtleVBhZ2VzIjpbXSwia2V5V29yZHMiOltdLCJ0cmFjayI6dHJ1ZSwiZnVsbFRyYWNraW5nTW9kZSI6ZmFsc2UsInJ1bk1lbnRhbGlzdCI6ZmFsc2UsInJ1blN0YXRzIjpmYWxzZSwibGVhcm5lcldpdGhIaWRkZW5MYXllciI6ZmFsc2UsImRyb3BSYXRlIjowLjAsImN1c3RvbURhdGEiOltdLCJjdXN0b21TY3JpcHRCZWZvcmUiOiIifQ==";
/* Sizzle code. Version v2.2.0-pre, 2015-03-10 */
/* We explicitely disable the AMD mechanism at the end (else it currently won't work with sites loading Kameleoon via require.js */
!function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=gb(),z=gb(),A=gb(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+M+"))|)"+L+"*\\]",O=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+N+")*)|.*)\\)|)",P=new RegExp(L+"+","g"),Q=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),R=new RegExp("^"+L+"*,"+L+"*"),S=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),T=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),U=new RegExp(O),V=new RegExp("^"+M+"$"),W={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M+"|[*])"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+O),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,$=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_=/[+~]/,ab=/'|\\/g,bb=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),cb=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},db=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(eb){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function fb(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if(d=d||[],"string"!=typeof a||!a||b&&(k=b.nodeType)&&1!==k&&9!==k&&11!==k)return d;if(!e&&((b?b.ownerDocument||b:v)!==n&&m(b),p)){if(b=b||n,k=b.nodeType,11!==k&&(f=$.exec(a)))if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return H.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName)return H.apply(d,b.getElementsByClassName(j)),d}if(!(!c.qsa||A[a+" "]||q&&q.test(a))){if(s=r=u,w=b,x=1!==k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){o=g(a),(r=b.getAttribute("id"))?s=r.replace(ab,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;while(l--)o[l]=s+qb(o[l]);w=_.test(a)&&ob(b.parentNode)||b,x=o.join(",")}if(x)try{return H.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(Q,"$1"),b,d,e)}function gb(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function hb(a){return a[u]=!0,a}function ib(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function jb(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function kb(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function lb(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function mb(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function nb(a){return hb(function(b){return b=+b,hb(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function ob(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=fb.support={},fb.expando=u,f=fb.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=fb.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=g.documentElement,e=g.defaultView,e&&e!==e.top&&(e.addEventListener?e.addEventListener("unload",db,!1):e.attachEvent&&e.attachEvent("onunload",db)),p=!f(g),c.attributes=ib(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ib(function(a){return a.appendChild(g.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Z.test(g.getElementsByClassName),c.getById=ib(function(a){return o.appendChild(a).id=u,!g.getElementsByName||!g.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(bb,cb);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(bb,cb);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=Z.test(g.querySelectorAll))&&(ib(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ib(function(a){var b=g.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=Z.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ib(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",O)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=Z.test(o.compareDocumentPosition),t=b||Z.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===g||a.ownerDocument===v&&t(v,a)?-1:b===g||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===g?-1:b===g?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return kb(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)i.unshift(c);while(h[d]===i[d])d++;return d?kb(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},g):n},fb.matches=function(a,b){return fb(a,null,null,b)},fb.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(T,"='$1']"),!(!c.matchesSelector||!p||A[b+" "]||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return fb(b,n,null,[a]).length>0},fb.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},fb.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},fb.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},fb.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=fb.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=fb.selectors={cacheLength:50,createPseudo:hb,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(bb,cb),a[3]=(a[3]||a[4]||a[5]||"").replace(bb,cb),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||fb.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&fb.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return W.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&U.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(bb,cb).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=fb.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(P," ")+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(s&&((l[u]||(l[u]={}))[a]=[w,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||fb.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?hb(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:hb(function(a){var b=[],c=[],d=h(a.replace(Q,"$1"));return d[u]?hb(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:hb(function(a){return function(b){return fb(a,b).length>0}}),contains:hb(function(a){return a=a.replace(bb,cb),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:hb(function(a){return V.test(a||"")||fb.error("unsupported lang: "+a),a=a.replace(bb,cb).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Y.test(a.nodeName)},input:function(a){return X.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:nb(function(){return[0]}),last:nb(function(a,b){return[b-1]}),eq:nb(function(a,b,c){return[0>c?c+b:c]}),even:nb(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:nb(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:nb(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:nb(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=lb(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=mb(b);function pb(){}pb.prototype=d.filters=d.pseudos,d.setFilters=new pb,g=fb.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=R.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=S.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(Q," ")}),h=h.slice(c.length));for(g in d.filter)!(e=W[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?fb.error(a):z(a,i).slice(0)};function qb(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function rb(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function sb(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function tb(a,b,c){for(var d=0,e=b.length;e>d;d++)fb(a,b[d],c);return c}function ub(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function vb(a,b,c,d,e,f){return d&&!d[u]&&(d=vb(d)),e&&!e[u]&&(e=vb(e,f)),hb(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||tb(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:ub(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=ub(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=ub(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function wb(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=rb(function(a){return a===b},h,!0),l=rb(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[rb(sb(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return vb(i>1&&sb(m),i>1&&qb(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(Q,"$1"),c,e>i&&wb(a.slice(i,e)),f>e&&wb(a=a.slice(e)),f>e&&qb(a))}m.push(c)}return sb(m)}function xb(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,o,p,q=0,r="0",s=f&&[],t=[],u=j,v=f||e&&d.find.TAG("*",k),x=w+=null==u?1:Math.random()||.1,y=v.length;for(k&&(j=g!==n&&g);r!==y&&null!=(l=v[r]);r++){if(e&&l){o=0,g||(l.ownerDocument||l)===n||(m(l),g=n);while(p=a[o++])if(p(l,g,h)){i.push(l);break}k&&(w=x)}c&&((l=!p&&l)&&q--,f&&s.push(l))}if(q+=r,c&&r!==q){o=0;while(p=b[o++])p(s,t,g,h);if(f){if(q>0)while(r--)s[r]||t[r]||(t[r]=F.call(i));t=ub(t)}H.apply(i,t),k&&!f&&t.length>0&&q+b.length>1&&fb.uniqueSort(i)}return k&&(w=x,j=u),s};return c?hb(f):f}h=fb.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=wb(b[c]),f[u]?d.push(f):e.push(f);f=A(a,xb(e,d)),f.selector=a}return f},i=fb.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(bb,cb),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=W.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(bb,cb),_.test(j[0].type)&&ob(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&qb(j),!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,_.test(a)&&b&&ob(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ib(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ib(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||jb("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ib(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||jb("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ib(function(a){return null==a.getAttribute("disabled")})||jb(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),("function"==typeof define&&define.amd&&false)?define(function(){return fb}):"undefined"!=typeof module&&module.exports?module.exports=fb:a.Sizzle=fb}(window);Kameleoon.Analyst.load();}